/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source visit the plugins github repository
*/

/*
License obsidian-tasks:
MIT License

Copyright (c) 2021 Martin Schenck and Clare Macrae

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/

/*
License rrule (included library):
rrule.js: Library for working with recurrence rules for calendar dates.
=======================================================================

Copyright 2010, Jakub Roztocil <jakub@roztocil.name> and Lars Schöning

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

    1. Redistributions of source code must retain the above copyright notice,
       this list of conditions and the following disclaimer.

    2. Redistributions in binary form must reproduce the above copyright
       notice, this list of conditions and the following disclaimer in the
       documentation and/or other materials provided with the distribution.

    3. Neither the name of The author nor the names of its contributors may
       be used to endorse or promote products derived from this software
       without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE AUTHOR AND CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.



./rrule.js and ./test/tests.js is based on python-dateutil. LICENCE:

python-dateutil - Extensions to the standard Python datetime module.
====================================================================

Copyright (c) 2003-2011 - Gustavo Niemeyer <gustavo@niemeyer.net>
Copyright (c) 2012 - Tomi Pieviläinen <tomi.pievilainen@iki.fi>

All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright notice,
      this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright notice,
      this list of conditions and the following disclaimer in the documentation
      and/or other materials provided with the distribution.
    * Neither the name of the copyright holder nor the names of its
      contributors may be used to endorse or promote products derived from
      this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

/*
License chrono-node (included library):
The MIT License

Copyright (c) 2014, Wanasit Tanakitrungruang

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
*/

"use strict";var Yk=Object.create;var ha=Object.defineProperty,Bk=Object.defineProperties,Hk=Object.getOwnPropertyDescriptor,Vk=Object.getOwnPropertyDescriptors,zk=Object.getOwnPropertyNames,eu=Object.getOwnPropertySymbols,Kk=Object.getPrototypeOf,xc=Object.prototype.hasOwnProperty,zh=Object.prototype.propertyIsEnumerable;var Vh=(r,e,t)=>e in r?ha(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Q=(r,e)=>{for(var t in e||(e={}))xc.call(e,t)&&Vh(r,t,e[t]);if(eu)for(var t of eu(e))zh.call(e,t)&&Vh(r,t,e[t]);return r},be=(r,e)=>Bk(r,Vk(e));var tu=(r,e)=>{var t={};for(var n in r)xc.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&eu)for(var n of eu(r))e.indexOf(n)<0&&zh.call(r,n)&&(t[n]=r[n]);return t};var k=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Qk=(r,e)=>{for(var t in e)ha(r,t,{get:e[t],enumerable:!0})},Kh=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of zk(e))!xc.call(r,i)&&i!==t&&ha(r,i,{get:()=>e[i],enumerable:!(n=Hk(e,i))||n.enumerable});return r};var ga=(r,e,t)=>(t=r!=null?Yk(Kk(r)):{},Kh(e||!r||!r.__esModule?ha(t,"default",{value:r,enumerable:!0}):t,r)),Xk=r=>Kh(ha({},"__esModule",{value:!0}),r);var P=(r,e,t)=>new Promise((n,i)=>{var s=u=>{try{o(t.next(u))}catch(l){i(l)}},a=u=>{try{o(t.throw(u))}catch(l){i(l)}},o=u=>u.done?n(u.value):Promise.resolve(u.value).then(s,a);o((t=t.apply(r,e)).next())});var Re=k(Vn=>{"use strict";Object.defineProperty(Vn,"__esModule",{value:!0});Vn.matchAnyPattern=Vn.extractTerms=Vn.repeatedTimeunitPattern=void 0;function tE(r,e){let t=e.replace(/\((?!\?)/g,"(?:");return`${r}${t}\\s{0,5}(?:,?\\s{0,5}${t}){0,10}`}Vn.repeatedTimeunitPattern=tE;function Qh(r){let e;return r instanceof Array?e=[...r]:r instanceof Map?e=Array.from(r.keys()):e=Object.keys(r),e}Vn.extractTerms=Qh;function rE(r){return`(?:${Qh(r).sort((t,n)=>n.length-t.length).join("|").replace(/\./g,"\\.")})`}Vn.matchAnyPattern=rE});var _e=k((Mc,Cc)=>{(function(r,e){typeof Mc=="object"&&typeof Cc!="undefined"?Cc.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs=e()})(Mc,function(){"use strict";var r=1e3,e=6e4,t=36e5,n="millisecond",i="second",s="minute",a="hour",o="day",u="week",l="month",c="quarter",d="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,b=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,S={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},E=function(q,$,O){var B=String(q);return!B||B.length>=$?q:""+Array($+1-B.length).join(O)+q},_={s:E,z:function(q){var $=-q.utcOffset(),O=Math.abs($),B=Math.floor(O/60),F=O%60;return($<=0?"+":"-")+E(B,2,"0")+":"+E(F,2,"0")},m:function q($,O){if($.date()<O.date())return-q(O,$);var B=12*(O.year()-$.year())+(O.month()-$.month()),F=$.clone().add(B,l),X=O-F<0,f=$.clone().add(B+(X?-1:1),l);return+(-(B+(O-F)/(X?F-f:f-F))||0)},a:function(q){return q<0?Math.ceil(q)||0:Math.floor(q)},p:function(q){return{M:l,y:d,w:u,d:o,D:p,h:a,m:s,s:i,ms:n,Q:c}[q]||String(q||"").toLowerCase().replace(/s$/,"")},u:function(q){return q===void 0}},R="en",j={};j[R]=S;var U=function(q){return q instanceof xe},ne=function(q,$,O){var B;if(!q)return R;if(typeof q=="string")j[q]&&(B=q),$&&(j[q]=$,B=q);else{var F=q.name;j[F]=q,B=F}return!O&&B&&(R=B),B||!O&&R},V=function(q,$){if(U(q))return q.clone();var O=typeof $=="object"?$:{};return O.date=q,O.args=arguments,new xe(O)},G=_;G.l=ne,G.i=U,G.w=function(q,$){return V(q,{locale:$.$L,utc:$.$u,x:$.$x,$offset:$.$offset})};var xe=function(){function q(O){this.$L=ne(O.locale,null,!0),this.parse(O)}var $=q.prototype;return $.parse=function(O){this.$d=function(B){var F=B.date,X=B.utc;if(F===null)return new Date(NaN);if(G.u(F))return new Date;if(F instanceof Date)return new Date(F);if(typeof F=="string"&&!/Z$/i.test(F)){var f=F.match(g);if(f){var h=f[2]-1||0,y=(f[7]||"0").substring(0,3);return X?new Date(Date.UTC(f[1],h,f[3]||1,f[4]||0,f[5]||0,f[6]||0,y)):new Date(f[1],h,f[3]||1,f[4]||0,f[5]||0,f[6]||0,y)}}return new Date(F)}(O),this.$x=O.x||{},this.init()},$.init=function(){var O=this.$d;this.$y=O.getFullYear(),this.$M=O.getMonth(),this.$D=O.getDate(),this.$W=O.getDay(),this.$H=O.getHours(),this.$m=O.getMinutes(),this.$s=O.getSeconds(),this.$ms=O.getMilliseconds()},$.$utils=function(){return G},$.isValid=function(){return this.$d.toString()!==m},$.isSame=function(O,B){var F=V(O);return this.startOf(B)<=F&&F<=this.endOf(B)},$.isAfter=function(O,B){return V(O)<this.startOf(B)},$.isBefore=function(O,B){return this.endOf(B)<V(O)},$.$g=function(O,B,F){return G.u(O)?this[B]:this.set(F,O)},$.unix=function(){return Math.floor(this.valueOf()/1e3)},$.valueOf=function(){return this.$d.getTime()},$.startOf=function(O,B){var F=this,X=!!G.u(B)||B,f=G.p(O),h=function(x,N){var he=G.w(F.$u?Date.UTC(F.$y,N,x):new Date(F.$y,N,x),F);return X?he:he.endOf(o)},y=function(x,N){return G.w(F.toDate()[x].apply(F.toDate("s"),(X?[0,0,0,0]:[23,59,59,999]).slice(N)),F)},T=this.$W,w=this.$M,D=this.$D,M="set"+(this.$u?"UTC":"");switch(f){case d:return X?h(1,0):h(31,11);case l:return X?h(1,w):h(0,w+1);case u:var A=this.$locale().weekStart||0,v=(T<A?T+7:T)-A;return h(X?D-v:D+(6-v),w);case o:case p:return y(M+"Hours",0);case a:return y(M+"Minutes",1);case s:return y(M+"Seconds",2);case i:return y(M+"Milliseconds",3);default:return this.clone()}},$.endOf=function(O){return this.startOf(O,!1)},$.$set=function(O,B){var F,X=G.p(O),f="set"+(this.$u?"UTC":""),h=(F={},F[o]=f+"Date",F[p]=f+"Date",F[l]=f+"Month",F[d]=f+"FullYear",F[a]=f+"Hours",F[s]=f+"Minutes",F[i]=f+"Seconds",F[n]=f+"Milliseconds",F)[X],y=X===o?this.$D+(B-this.$W):B;if(X===l||X===d){var T=this.clone().set(p,1);T.$d[h](y),T.init(),this.$d=T.set(p,Math.min(this.$D,T.daysInMonth())).$d}else h&&this.$d[h](y);return this.init(),this},$.set=function(O,B){return this.clone().$set(O,B)},$.get=function(O){return this[G.p(O)]()},$.add=function(O,B){var F,X=this;O=Number(O);var f=G.p(B),h=function(w){var D=V(X);return G.w(D.date(D.date()+Math.round(w*O)),X)};if(f===l)return this.set(l,this.$M+O);if(f===d)return this.set(d,this.$y+O);if(f===o)return h(1);if(f===u)return h(7);var y=(F={},F[s]=e,F[a]=t,F[i]=r,F)[f]||1,T=this.$d.getTime()+O*y;return G.w(T,this)},$.subtract=function(O,B){return this.add(-1*O,B)},$.format=function(O){var B=this,F=this.$locale();if(!this.isValid())return F.invalidDate||m;var X=O||"YYYY-MM-DDTHH:mm:ssZ",f=G.z(this),h=this.$H,y=this.$m,T=this.$M,w=F.weekdays,D=F.months,M=function(N,he,te,ae){return N&&(N[he]||N(B,X))||te[he].substr(0,ae)},A=function(N){return G.s(h%12||12,N,"0")},v=F.meridiem||function(N,he,te){var ae=N<12?"AM":"PM";return te?ae.toLowerCase():ae},x={YY:String(this.$y).slice(-2),YYYY:this.$y,M:T+1,MM:G.s(T+1,2,"0"),MMM:M(F.monthsShort,T,D,3),MMMM:M(D,T),D:this.$D,DD:G.s(this.$D,2,"0"),d:String(this.$W),dd:M(F.weekdaysMin,this.$W,w,2),ddd:M(F.weekdaysShort,this.$W,w,3),dddd:w[this.$W],H:String(h),HH:G.s(h,2,"0"),h:A(1),hh:A(2),a:v(h,y,!0),A:v(h,y,!1),m:String(y),mm:G.s(y,2,"0"),s:String(this.$s),ss:G.s(this.$s,2,"0"),SSS:G.s(this.$ms,3,"0"),Z:f};return X.replace(b,function(N,he){return he||x[N]||f.replace(":","")})},$.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},$.diff=function(O,B,F){var X,f=G.p(B),h=V(O),y=(h.utcOffset()-this.utcOffset())*e,T=this-h,w=G.m(this,h);return w=(X={},X[d]=w/12,X[l]=w,X[c]=w/3,X[u]=(T-y)/6048e5,X[o]=(T-y)/864e5,X[a]=T/t,X[s]=T/e,X[i]=T/r,X)[f]||T,F?w:G.a(w)},$.daysInMonth=function(){return this.endOf(l).$D},$.$locale=function(){return j[this.$L]},$.locale=function(O,B){if(!O)return this.$L;var F=this.clone(),X=ne(O,B,!0);return X&&(F.$L=X),F},$.clone=function(){return G.w(this.$d,this)},$.toDate=function(){return new Date(this.valueOf())},$.toJSON=function(){return this.isValid()?this.toISOString():null},$.toISOString=function(){return this.$d.toISOString()},$.toString=function(){return this.$d.toUTCString()},q}(),Me=xe.prototype;return V.prototype=Me,[["$ms",n],["$s",i],["$m",s],["$H",a],["$W",o],["$M",l],["$y",d],["$D",p]].forEach(function(q){Me[q[1]]=function($){return this.$g($,q[0],q[1])}}),V.extend=function(q,$){return q.$i||(q($,xe,V),q.$i=!0),V},V.locale=ne,V.isDayjs=U,V.unix=function(q){return V(1e3*q)},V.en=j[R],V.Ls=j,V.p={},V})});var pt=k(zn=>{"use strict";var nE=zn&&zn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(zn,"__esModule",{value:!0});zn.findYearClosestToRef=zn.findMostLikelyADYear=void 0;var iE=nE(_e());function sE(r){return r<100&&(r>50?r=r+1900:r=r+2e3),r}zn.findMostLikelyADYear=sE;function aE(r,e,t){let n=iE.default(r),i=n;i=i.month(t-1),i=i.date(e),i=i.year(n.year());let s=i.add(1,"y"),a=i.add(-1,"y");return Math.abs(s.diff(n))<Math.abs(i.diff(n))?i=s:Math.abs(a.diff(n))<Math.abs(i.diff(n))&&(i=a),i.year()}zn.findYearClosestToRef=aE});var mt=k(le=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});le.parseTimeUnits=le.TIME_UNITS_PATTERN=le.parseYear=le.YEAR_PATTERN=le.parseOrdinalNumberPattern=le.ORDINAL_NUMBER_PATTERN=le.parseNumberPattern=le.NUMBER_PATTERN=le.TIME_UNIT_DICTIONARY=le.ORDINAL_WORD_DICTIONARY=le.INTEGER_WORD_DICTIONARY=le.MONTH_DICTIONARY=le.FULL_MONTH_NAME_DICTIONARY=le.WEEKDAY_DICTIONARY=void 0;var nu=Re(),oE=pt();le.WEEKDAY_DICTIONARY={sunday:0,sun:0,"sun.":0,monday:1,mon:1,"mon.":1,tuesday:2,tue:2,"tue.":2,wednesday:3,wed:3,"wed.":3,thursday:4,thurs:4,"thurs.":4,thur:4,"thur.":4,thu:4,"thu.":4,friday:5,fri:5,"fri.":5,saturday:6,sat:6,"sat.":6};le.FULL_MONTH_NAME_DICTIONARY={january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12};le.MONTH_DICTIONARY=Object.assign(Object.assign({},le.FULL_MONTH_NAME_DICTIONARY),{jan:1,"jan.":1,feb:2,"feb.":2,mar:3,"mar.":3,apr:4,"apr.":4,jun:6,"jun.":6,jul:7,"jul.":7,aug:8,"aug.":8,sep:9,"sep.":9,sept:9,"sept.":9,oct:10,"oct.":10,nov:11,"nov.":11,dec:12,"dec.":12});le.INTEGER_WORD_DICTIONARY={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12};le.ORDINAL_WORD_DICTIONARY={first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eighth:8,ninth:9,tenth:10,eleventh:11,twelfth:12,thirteenth:13,fourteenth:14,fifteenth:15,sixteenth:16,seventeenth:17,eighteenth:18,nineteenth:19,twentieth:20,"twenty first":21,"twenty-first":21,"twenty second":22,"twenty-second":22,"twenty third":23,"twenty-third":23,"twenty fourth":24,"twenty-fourth":24,"twenty fifth":25,"twenty-fifth":25,"twenty sixth":26,"twenty-sixth":26,"twenty seventh":27,"twenty-seventh":27,"twenty eighth":28,"twenty-eighth":28,"twenty ninth":29,"twenty-ninth":29,thirtieth:30,"thirty first":31,"thirty-first":31};le.TIME_UNIT_DICTIONARY={sec:"second",second:"second",seconds:"second",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",hour:"hour",hours:"hour",day:"d",days:"d",week:"week",weeks:"week",month:"month",months:"month",qtr:"quarter",quarter:"quarter",quarters:"quarter",y:"year",yr:"year",year:"year",years:"year"};le.NUMBER_PATTERN=`(?:${nu.matchAnyPattern(le.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s{0,2}an?)?|an?\\b(?:\\s{0,2}few)?|few|several|a?\\s{0,2}couple\\s{0,2}(?:of)?)`;function Zh(r){let e=r.toLowerCase();return le.INTEGER_WORD_DICTIONARY[e]!==void 0?le.INTEGER_WORD_DICTIONARY[e]:e==="a"||e==="an"?1:e.match(/few/)?3:e.match(/half/)?.5:e.match(/couple/)?2:e.match(/several/)?7:parseFloat(e)}le.parseNumberPattern=Zh;le.ORDINAL_NUMBER_PATTERN=`(?:${nu.matchAnyPattern(le.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:st|nd|rd|th)?)`;function uE(r){let e=r.toLowerCase();return le.ORDINAL_WORD_DICTIONARY[e]!==void 0?le.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:st|nd|rd|th)$/i,""),parseInt(e))}le.parseOrdinalNumberPattern=uE;le.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s{0,2}(?:BE|AD|BC|BCE|CE)|[1-2][0-9]{3}|[5-9][0-9])";function lE(r){if(/BE/i.test(r))return r=r.replace(/BE/i,""),parseInt(r)-543;if(/BCE?/i.test(r))return r=r.replace(/BCE?/i,""),-parseInt(r);if(/(AD|CE)/i.test(r))return r=r.replace(/(AD|CE)/i,""),parseInt(r);let e=parseInt(r);return oE.findMostLikelyADYear(e)}le.parseYear=lE;var Jh=`(${le.NUMBER_PATTERN})\\s{0,3}(${nu.matchAnyPattern(le.TIME_UNIT_DICTIONARY)})`,Xh=new RegExp(Jh,"i");le.TIME_UNITS_PATTERN=nu.repeatedTimeunitPattern("(?:(?:about|around)\\s{0,3})?",Jh);function cE(r){let e={},t=r,n=Xh.exec(t);for(;n;)dE(e,n),t=t.substring(n[0].length).trim(),n=Xh.exec(t);return e}le.parseTimeUnits=cE;function dE(r,e){let t=Zh(e[1]),n=le.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var eg=k((Ac,Pc)=>{(function(r,e){typeof Ac=="object"&&typeof Pc!="undefined"?Pc.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs_plugin_quarterOfYear=e()})(Ac,function(){"use strict";var r="month",e="quarter";return function(t,n){var i=n.prototype;i.quarter=function(o){return this.$utils().u(o)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(o-1))};var s=i.add;i.add=function(o,u){return o=Number(o),this.$utils().p(u)===e?this.add(3*o,r):s.bind(this)(o,u)};var a=i.startOf;i.startOf=function(o,u){var l=this.$utils(),c=!!l.u(u)||u;if(l.p(o)===e){var d=this.quarter()-1;return c?this.month(3*d).startOf(r).startOf("day"):this.month(3*d+2).endOf(r).endOf("day")}return a.bind(this)(o,u)}}})});var cr=k(Vr=>{"use strict";Object.defineProperty(Vr,"__esModule",{value:!0});Vr.implySimilarTime=Vr.assignSimilarTime=Vr.assignSimilarDate=Vr.assignTheNextDay=void 0;var tg=Je();function fE(r,e){e=e.add(1,"day"),rg(r,e),ng(r,e)}Vr.assignTheNextDay=fE;function rg(r,e){r.assign("day",e.date()),r.assign("month",e.month()+1),r.assign("year",e.year())}Vr.assignSimilarDate=rg;function pE(r,e){r.assign("hour",e.hour()),r.assign("minute",e.minute()),r.assign("second",e.second()),r.assign("millisecond",e.millisecond()),r.get("hour")<12?r.assign("meridiem",tg.Meridiem.AM):r.assign("meridiem",tg.Meridiem.PM)}Vr.assignSimilarTime=pE;function ng(r,e){r.imply("hour",e.hour()),r.imply("minute",e.minute()),r.imply("second",e.second()),r.imply("millisecond",e.millisecond())}Vr.implySimilarTime=ng});var ig=k(yi=>{"use strict";Object.defineProperty(yi,"__esModule",{value:!0});yi.toTimezoneOffset=yi.TIMEZONE_ABBR_MAP=void 0;yi.TIMEZONE_ABBR_MAP={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:60,CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:-300,FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:180,MST:-420,MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:-480,PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360};function mE(r){var e;return r==null?null:typeof r=="number"?r:(e=yi.TIMEZONE_ABBR_MAP[r])!==null&&e!==void 0?e:null}yi.toTimezoneOffset=mE});var Ue=k(zr=>{"use strict";var sg=zr&&zr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(zr,"__esModule",{value:!0});zr.ParsingResult=zr.ParsingComponents=zr.ReferenceWithTimezone=void 0;var hE=sg(eg()),iu=sg(_e()),Nc=cr(),gE=ig();iu.default.extend(hE.default);var Ic=class{constructor(e){var t;e=e!=null?e:new Date,e instanceof Date?this.instant=e:(this.instant=(t=e.instant)!==null&&t!==void 0?t:new Date,this.timezoneOffset=gE.toTimezoneOffset(e.timezone))}};zr.ReferenceWithTimezone=Ic;var bi=class{constructor(e,t){if(this.reference=e,this.knownValues={},this.impliedValues={},t)for(let i in t)this.knownValues[i]=t[i];let n=iu.default(e.instant);this.imply("day",n.date()),this.imply("month",n.month()+1),this.imply("year",n.year()),this.imply("hour",12),this.imply("minute",0),this.imply("second",0),this.imply("millisecond",0)}get(e){return e in this.knownValues?this.knownValues[e]:e in this.impliedValues?this.impliedValues[e]:null}isCertain(e){return e in this.knownValues}getCertainComponents(){return Object.keys(this.knownValues)}imply(e,t){return e in this.knownValues?this:(this.impliedValues[e]=t,this)}assign(e,t){return this.knownValues[e]=t,delete this.impliedValues[e],this}delete(e){delete this.knownValues[e],delete this.impliedValues[e]}clone(){let e=new bi(this.reference);e.knownValues={},e.impliedValues={};for(let t in this.knownValues)e.knownValues[t]=this.knownValues[t];for(let t in this.impliedValues)e.impliedValues[t]=this.impliedValues[t];return e}isOnlyDate(){return!this.isCertain("hour")&&!this.isCertain("minute")&&!this.isCertain("second")}isOnlyTime(){return!this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isOnlyWeekdayComponent(){return this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isOnlyDayMonthComponent(){return this.isCertain("day")&&this.isCertain("month")&&!this.isCertain("year")}isValidDate(){let e=this.dateWithoutTimezoneAdjustment();return!(e.getFullYear()!==this.get("year")||e.getMonth()!==this.get("month")-1||e.getDate()!==this.get("day")||this.get("hour")!=null&&e.getHours()!=this.get("hour")||this.get("minute")!=null&&e.getMinutes()!=this.get("minute"))}toString(){return`[ParsingComponents {knownValues: ${JSON.stringify(this.knownValues)}, impliedValues: ${JSON.stringify(this.impliedValues)}}, reference: ${JSON.stringify(this.reference)}]`}dayjs(){return iu.default(this.date())}date(){let e=this.dateWithoutTimezoneAdjustment();return new Date(e.getTime()+this.getSystemTimezoneAdjustmentMinute(e)*6e4)}dateWithoutTimezoneAdjustment(){let e=new Date(this.get("year"),this.get("month")-1,this.get("day"),this.get("hour"),this.get("minute"),this.get("second"),this.get("millisecond"));return e.setFullYear(this.get("year")),e}getSystemTimezoneAdjustmentMinute(e){var t,n;(!e||e.getTime()<0)&&(e=new Date);let i=-e.getTimezoneOffset(),s=(n=(t=this.get("timezoneOffset"))!==null&&t!==void 0?t:this.reference.timezoneOffset)!==null&&n!==void 0?n:i;return i-s}static createRelativeFromReference(e,t){let n=iu.default(e.instant);for(let s in t)n=n.add(t[s],s);let i=new bi(e);return t.hour||t.minute||t.second?(Nc.assignSimilarTime(i,n),Nc.assignSimilarDate(i,n),e.timezoneOffset!==null&&i.assign("timezoneOffset",-e.instant.getTimezoneOffset())):(Nc.implySimilarTime(i,n),e.timezoneOffset!==null&&i.imply("timezoneOffset",-e.instant.getTimezoneOffset()),t.d?(i.assign("day",n.date()),i.assign("month",n.month()+1),i.assign("year",n.year())):(t.week&&i.imply("weekday",n.day()),i.imply("day",n.date()),t.month?(i.assign("month",n.month()+1),i.assign("year",n.year())):(i.imply("month",n.month()+1),t.year?i.assign("year",n.year()):i.imply("year",n.year())))),i}};zr.ParsingComponents=bi;var ya=class{constructor(e,t,n,i,s){this.reference=e,this.refDate=e.instant,this.index=t,this.text=n,this.start=i||new bi(e),this.end=s}clone(){let e=new ya(this.reference,this.index,this.text);return e.start=this.start?this.start.clone():null,e.end=this.end?this.end.clone():null,e}date(){return this.start.date()}toString(){return`[ParsingResult {index: ${this.index}, text: '${this.text}', ...}]`}};zr.ParsingResult=ya});var H=k(su=>{"use strict";Object.defineProperty(su,"__esModule",{value:!0});su.AbstractParserWithWordBoundaryChecking=void 0;var Fc=class{constructor(){this.cachedInnerPattern=null,this.cachedPattern=null}patternLeftBoundary(){return"(\\W|^)"}pattern(e){let t=this.innerPattern(e);return t==this.cachedInnerPattern?this.cachedPattern:(this.cachedPattern=new RegExp(`${this.patternLeftBoundary()}${t.source}`,t.flags),this.cachedInnerPattern=t,this.cachedPattern)}extract(e,t){var n;let i=(n=t[1])!==null&&n!==void 0?n:"";t.index=t.index+i.length,t[0]=t[0].substring(i.length);for(let s=2;s<t.length;s++)t[s-1]=t[s];return this.innerExtract(e,t)}};su.AbstractParserWithWordBoundaryChecking=Fc});var ag=k(Wc=>{"use strict";Object.defineProperty(Wc,"__esModule",{value:!0});var Uc=mt(),yE=Ue(),bE=H(),TE=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${Uc.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),_E=new RegExp(`(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${Uc.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),Lc=class extends bE.AbstractParserWithWordBoundaryChecking{innerPattern(e){return e.option.forwardDate?_E:TE}innerExtract(e,t){let n=Uc.parseTimeUnits(t[1]);return yE.ParsingComponents.createRelativeFromReference(e.reference,n)}};Wc.default=Lc});var fg=k($c=>{"use strict";Object.defineProperty($c,"__esModule",{value:!0});var vE=pt(),cg=mt(),dg=mt(),au=mt(),wE=Re(),kE=H(),EE=new RegExp(`(?:on\\s{0,3})?(${au.ORDINAL_NUMBER_PATTERN})(?:\\s{0,3}(?:to|\\-|\\\u2013|until|through|till)?\\s{0,3}(${au.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s{0,3}(?:of)?\\s{0,3})(${wE.matchAnyPattern(cg.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s{0,3})(${dg.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),og=1,ug=2,SE=3,lg=4,qc=class extends kE.AbstractParserWithWordBoundaryChecking{innerPattern(){return EE}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=cg.MONTH_DICTIONARY[t[SE].toLowerCase()],s=au.parseOrdinalNumberPattern(t[og]);if(s>31)return t.index=t.index+t[og].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[lg]){let a=dg.parseYear(t[lg]);n.start.assign("year",a)}else{let a=vE.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[ug]){let a=au.parseOrdinalNumberPattern(t[ug]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};$c.default=qc});var yg=k(Gc=>{"use strict";Object.defineProperty(Gc,"__esModule",{value:!0});var OE=pt(),hg=mt(),ou=mt(),gg=mt(),DE=Re(),xE=H(),RE=new RegExp(`(${DE.matchAnyPattern(hg.MONTH_DICTIONARY)})(?:-|/|\\s*,?\\s*)(${ou.ORDINAL_NUMBER_PATTERN})(?!\\s*(?:am|pm))\\s*(?:(?:to|\\-)\\s*(${ou.ORDINAL_NUMBER_PATTERN})\\s*)?(?:(?:-|/|\\s*,?\\s*)(${gg.YEAR_PATTERN}))?(?=\\W|$)(?!\\:\\d)`,"i"),ME=1,CE=2,pg=3,mg=4,jc=class extends xE.AbstractParserWithWordBoundaryChecking{innerPattern(){return RE}innerExtract(e,t){let n=hg.MONTH_DICTIONARY[t[ME].toLowerCase()],i=ou.parseOrdinalNumberPattern(t[CE]);if(i>31)return null;let s=e.createParsingComponents({day:i,month:n});if(t[mg]){let u=gg.parseYear(t[mg]);s.assign("year",u)}else{let u=OE.findYearClosestToRef(e.refDate,i,n);s.imply("year",u)}if(!t[pg])return s;let a=ou.parseOrdinalNumberPattern(t[pg]),o=e.createParsingResult(t.index,t[0]);return o.start=s,o.end=s.clone(),o.end.assign("day",a),o}};Gc.default=jc});var _g=k(Hc=>{"use strict";Object.defineProperty(Hc,"__esModule",{value:!0});var Yc=mt(),AE=pt(),PE=Re(),Tg=mt(),NE=H(),IE=new RegExp(`((?:in)\\s*)?(${PE.matchAnyPattern(Yc.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${Tg.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),FE=1,LE=2,bg=3,Bc=class extends NE.AbstractParserWithWordBoundaryChecking{innerPattern(){return IE}innerExtract(e,t){let n=t[LE].toLowerCase();if(t[0].length<=3&&!Yc.FULL_MONTH_NAME_DICTIONARY[n])return null;let i=e.createParsingResult(t.index+(t[FE]||"").length,t.index+t[0].length);i.start.imply("day",1);let s=Yc.MONTH_DICTIONARY[n];if(i.start.assign("month",s),t[bg]){let a=Tg.parseYear(t[bg]);i.start.assign("year",a)}else{let a=AE.findYearClosestToRef(e.refDate,1,s);i.start.imply("year",a)}return i}};Hc.default=Bc});var kg=k(zc=>{"use strict";Object.defineProperty(zc,"__esModule",{value:!0});var wg=mt(),UE=Re(),WE=H(),qE=new RegExp(`([0-9]{4})[\\.\\/\\s](?:(${UE.matchAnyPattern(wg.MONTH_DICTIONARY)})|([0-9]{1,2}))[\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),$E=1,jE=2,vg=3,GE=4,Vc=class extends WE.AbstractParserWithWordBoundaryChecking{innerPattern(){return qE}innerExtract(e,t){let n=t[vg]?parseInt(t[vg]):wg.MONTH_DICTIONARY[t[jE].toLowerCase()];if(n<1||n>12)return null;let i=parseInt(t[$E]);return{day:parseInt(t[GE]),month:n,year:i}}};zc.default=Vc});var Eg=k(Qc=>{"use strict";Object.defineProperty(Qc,"__esModule",{value:!0});var YE=H(),BE=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),HE=1,VE=2,Kc=class extends YE.AbstractParserWithWordBoundaryChecking{innerPattern(){return BE}innerExtract(e,t){let n=parseInt(t[VE]),i=parseInt(t[HE]);return e.createParsingComponents().imply("day",1).assign("month",i).assign("year",n)}};Qc.default=Kc});var Ti=k(cu=>{"use strict";Object.defineProperty(cu,"__esModule",{value:!0});cu.AbstractTimeExpressionParser=void 0;var xt=Je();function zE(r,e,t,n){return new RegExp(`${r}${e}(\\d{1,4})(?:(?:\\.|:|\uFF1A)(\\d{1,2})(?:(?::|\uFF1A)(\\d{2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${t}`,n)}function KE(r,e){return new RegExp(`^(${r})(\\d{1,4})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${e}`,"i")}var Sg=2,is=3,uu=4,lu=5,ba=6,Xc=class{constructor(e=!1){this.cachedPrimaryPrefix=null,this.cachedPrimarySuffix=null,this.cachedPrimaryTimePattern=null,this.cachedFollowingPhase=null,this.cachedFollowingSuffix=null,this.cachedFollowingTimePatten=null,this.strictMode=e}patternFlags(){return"i"}primaryPatternLeftBoundary(){return"(^|\\s|T|\\b)"}primarySuffix(){return"(?=\\W|$)"}followingSuffix(){return"(?=\\W|$)"}pattern(e){return this.getPrimaryTimePatternThroughCache()}extract(e,t){let n=this.extractPrimaryTimeComponents(e,t);if(!n)return t.index+=t[0].length,null;let i=t.index+t[1].length,s=t[0].substring(t[1].length),a=e.createParsingResult(i,s,n);t.index+=t[0].length;let o=e.text.substring(t.index),l=this.getFollowingTimePatternThroughCache().exec(o);return s.match(/^\d{3,4}/)&&l&&l[0].match(/^\s*([+-])\s*\d{2,4}$/)?null:!l||l[0].match(/^\s*([+-])\s*\d{3,4}$/)?this.checkAndReturnWithoutFollowingPattern(a):(a.end=this.extractFollowingTimeComponents(e,l,a),a.end&&(a.text+=l[0]),this.checkAndReturnWithFollowingPattern(a))}extractPrimaryTimeComponents(e,t,n=!1){let i=e.createParsingComponents(),s=0,a=null,o=parseInt(t[Sg]);if(o>100){if(this.strictMode||t[is]!=null)return null;s=o%100,o=Math.floor(o/100)}if(o>24)return null;if(t[is]!=null){if(t[is].length==1&&!t[ba])return null;s=parseInt(t[is])}if(s>=60)return null;if(o>12&&(a=xt.Meridiem.PM),t[ba]!=null){if(o>12)return null;let u=t[ba][0].toLowerCase();u=="a"&&(a=xt.Meridiem.AM,o==12&&(o=0)),u=="p"&&(a=xt.Meridiem.PM,o!=12&&(o+=12))}if(i.assign("hour",o),i.assign("minute",s),a!==null?i.assign("meridiem",a):o<12?i.imply("meridiem",xt.Meridiem.AM):i.imply("meridiem",xt.Meridiem.PM),t[lu]!=null){let u=parseInt(t[lu].substring(0,3));if(u>=1e3)return null;i.assign("millisecond",u)}if(t[uu]!=null){let u=parseInt(t[uu]);if(u>=60)return null;i.assign("second",u)}return i}extractFollowingTimeComponents(e,t,n){let i=e.createParsingComponents();if(t[lu]!=null){let u=parseInt(t[lu].substring(0,3));if(u>=1e3)return null;i.assign("millisecond",u)}if(t[uu]!=null){let u=parseInt(t[uu]);if(u>=60)return null;i.assign("second",u)}let s=parseInt(t[Sg]),a=0,o=-1;if(t[is]!=null?a=parseInt(t[is]):s>100&&(a=s%100,s=Math.floor(s/100)),a>=60||s>24)return null;if(s>=12&&(o=xt.Meridiem.PM),t[ba]!=null){if(s>12)return null;let u=t[ba][0].toLowerCase();u=="a"&&(o=xt.Meridiem.AM,s==12&&(s=0,i.isCertain("day")||i.imply("day",i.get("day")+1))),u=="p"&&(o=xt.Meridiem.PM,s!=12&&(s+=12)),n.start.isCertain("meridiem")||(o==xt.Meridiem.AM?(n.start.imply("meridiem",xt.Meridiem.AM),n.start.get("hour")==12&&n.start.assign("hour",0)):(n.start.imply("meridiem",xt.Meridiem.PM),n.start.get("hour")!=12&&n.start.assign("hour",n.start.get("hour")+12)))}return i.assign("hour",s),i.assign("minute",a),o>=0?i.assign("meridiem",o):n.start.isCertain("meridiem")&&n.start.get("hour")>12?n.start.get("hour")-12>s?i.imply("meridiem",xt.Meridiem.AM):s<=12&&(i.assign("hour",s+12),i.assign("meridiem",xt.Meridiem.PM)):s>12?i.imply("meridiem",xt.Meridiem.PM):s<=12&&i.imply("meridiem",xt.Meridiem.AM),i.date().getTime()<n.start.date().getTime()&&i.imply("day",i.get("day")+1),i}checkAndReturnWithoutFollowingPattern(e){if(e.text.match(/^\d$/)||e.text.match(/^\d\d\d+$/)||e.text.match(/\d[apAP]$/))return null;let t=e.text.match(/[^\d:.](\d[\d.]+)$/);if(t){let n=t[1];if(this.strictMode||n.includes(".")&&!n.match(/\d(\.\d{2})+$/)||parseInt(n)>24)return null}return e}checkAndReturnWithFollowingPattern(e){if(e.text.match(/^\d+-\d+$/))return null;let t=e.text.match(/[^\d:.](\d[\d.]+)\s*-\s*(\d[\d.]+)$/);if(t){if(this.strictMode)return null;let n=t[1],i=t[2];if(i.includes(".")&&!i.match(/\d(\.\d{2})+$/))return null;let s=parseInt(i),a=parseInt(n);if(s>24||a>24)return null}return e}getPrimaryTimePatternThroughCache(){let e=this.primaryPrefix(),t=this.primarySuffix();return this.cachedPrimaryPrefix===e&&this.cachedPrimarySuffix===t?this.cachedPrimaryTimePattern:(this.cachedPrimaryTimePattern=zE(this.primaryPatternLeftBoundary(),e,t,this.patternFlags()),this.cachedPrimaryPrefix=e,this.cachedPrimarySuffix=t,this.cachedPrimaryTimePattern)}getFollowingTimePatternThroughCache(){let e=this.followingPhase(),t=this.followingSuffix();return this.cachedFollowingPhase===e&&this.cachedFollowingSuffix===t?this.cachedFollowingTimePatten:(this.cachedFollowingTimePatten=KE(e,t),this.cachedFollowingPhase=e,this.cachedFollowingSuffix=t,this.cachedFollowingTimePatten)}};cu.AbstractTimeExpressionParser=Xc});var Og=k(Jc=>{"use strict";Object.defineProperty(Jc,"__esModule",{value:!0});var du=Je(),QE=Ti(),Zc=class extends QE.AbstractTimeExpressionParser{constructor(e){super(e)}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|to|\\?)\\s*"}primaryPrefix(){return"(?:(?:at|from)\\s*)??"}primarySuffix(){return"(?:\\s*(?:o\\W*clock|at\\s*night|in\\s*the\\s*(?:morning|afternoon)))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){let n=super.extractPrimaryTimeComponents(e,t);if(n){if(t[0].endsWith("night")){let i=n.get("hour");i>=6&&i<12?(n.assign("hour",n.get("hour")+12),n.assign("meridiem",du.Meridiem.PM)):i<6&&n.assign("meridiem",du.Meridiem.AM)}if(t[0].endsWith("afternoon")){n.assign("meridiem",du.Meridiem.PM);let i=n.get("hour");i>=0&&i<=6&&n.assign("hour",n.get("hour")+12)}t[0].endsWith("morning")&&(n.assign("meridiem",du.Meridiem.AM),n.get("hour")<12&&n.assign("hour",n.get("hour")))}return n}};Jc.default=Zc});var dr=k(ss=>{"use strict";Object.defineProperty(ss,"__esModule",{value:!0});ss.addImpliedTimeUnits=ss.reverseTimeUnits=void 0;function XE(r){let e={};for(let t in r)e[t]=-r[t];return e}ss.reverseTimeUnits=XE;function ZE(r,e){let t=r.clone(),n=r.dayjs();for(let i in e)n=n.add(e[i],i);return("day"in e||"d"in e||"week"in e||"month"in e||"year"in e)&&(t.imply("day",n.date()),t.imply("month",n.month()+1),t.imply("year",n.year())),("second"in e||"minute"in e||"hour"in e)&&(t.imply("second",n.second()),t.imply("minute",n.minute()),t.imply("hour",n.hour())),t}ss.addImpliedTimeUnits=ZE});var Dg=k(rd=>{"use strict";Object.defineProperty(rd,"__esModule",{value:!0});var td=mt(),JE=Ue(),eS=H(),tS=dr(),rS=new RegExp(`(${td.TIME_UNITS_PATTERN})\\s{0,5}(?:ago|before|earlier)(?=(?:\\W|$))`,"i"),nS=new RegExp(`(${td.TIME_UNITS_PATTERN})\\s{0,5}ago(?=(?:\\W|$))`,"i"),ed=class extends eS.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?nS:rS}innerExtract(e,t){let n=td.parseTimeUnits(t[1]),i=tS.reverseTimeUnits(n);return JE.ParsingComponents.createRelativeFromReference(e.reference,i)}};rd.default=ed});var xg=k(sd=>{"use strict";Object.defineProperty(sd,"__esModule",{value:!0});var id=mt(),iS=Ue(),sS=H(),aS=new RegExp(`(${id.TIME_UNITS_PATTERN})\\s{0,5}(?:later|after|from now|henceforth|forward|out)(?=(?:\\W|$))`,"i"),oS=new RegExp("("+id.TIME_UNITS_PATTERN+")(later|from now)(?=(?:\\W|$))","i"),uS=1,nd=class extends sS.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?oS:aS}innerExtract(e,t){let n=id.parseTimeUnits(t[uS]);return iS.ParsingComponents.createRelativeFromReference(e.reference,n)}};sd.default=nd});var os=k(as=>{"use strict";Object.defineProperty(as,"__esModule",{value:!0});as.MergingRefiner=as.Filter=void 0;var ad=class{refine(e,t){return t.filter(n=>this.isValid(e,n))}};as.Filter=ad;var od=class{refine(e,t){if(t.length<2)return t;let n=[],i=t[0],s=null;for(let a=1;a<t.length;a++){s=t[a];let o=e.text.substring(i.index+i.text.length,s.index);if(!this.shouldMergeResults(o,i,s,e))n.push(i),i=s;else{let u=i,l=s,c=this.mergeResults(o,u,l,e);e.debug(()=>{console.log(`${this.constructor.name} merged ${u} and ${l} into ${c}`)}),i=c}}return i!=null&&n.push(i),n}};as.MergingRefiner=od});var Kr=k(ld=>{"use strict";Object.defineProperty(ld,"__esModule",{value:!0});var lS=os(),ud=class extends lS.MergingRefiner{shouldMergeResults(e,t,n){return!t.end&&!n.end&&e.match(this.patternBetween())!=null}mergeResults(e,t,n){if(!t.start.isOnlyWeekdayComponent()&&!n.start.isOnlyWeekdayComponent()&&(n.start.getCertainComponents().forEach(s=>{t.start.isCertain(s)||t.start.assign(s,n.start.get(s))}),t.start.getCertainComponents().forEach(s=>{n.start.isCertain(s)||n.start.assign(s,t.start.get(s))})),t.start.date().getTime()>n.start.date().getTime()){let s=t.start.dayjs(),a=n.start.dayjs();t.start.isOnlyWeekdayComponent()&&s.add(-7,"days").isBefore(a)?(s=s.add(-7,"days"),t.start.imply("day",s.date()),t.start.imply("month",s.month()+1),t.start.imply("year",s.year())):n.start.isOnlyWeekdayComponent()&&a.add(7,"days").isAfter(s)?(a=a.add(7,"days"),n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())):[n,t]=[t,n]}let i=t.clone();return i.start=t.start,i.end=n.start,i.index=Math.min(t.index,n.index),t.index<n.index?i.text=t.text+e+n.text:i.text=n.text+e+t.text,i}};ld.default=ud});var Rg=k(Ta=>{"use strict";var cS=Ta&&Ta.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ta,"__esModule",{value:!0});var dS=cS(Kr()),cd=class extends dS.default{patternBetween(){return/^\s*(to|-)\s*$/i}};Ta.default=cd});var Mg=k(us=>{"use strict";Object.defineProperty(us,"__esModule",{value:!0});us.mergeDateTimeComponent=us.mergeDateTimeResult=void 0;var fS=Je();function pS(r,e){let t=r.clone(),n=r.start,i=e.start;if(t.start=dd(n,i),r.end!=null||e.end!=null){let s=r.end==null?r.start:r.end,a=e.end==null?e.start:e.end,o=dd(s,a);r.end==null&&o.date().getTime()<t.start.date().getTime()&&(o.isCertain("day")?o.assign("day",o.get("day")+1):o.imply("day",o.get("day")+1)),t.end=o}return t}us.mergeDateTimeResult=pS;function dd(r,e){let t=r.clone();return e.isCertain("hour")?(t.assign("hour",e.get("hour")),t.assign("minute",e.get("minute")),e.isCertain("second")?(t.assign("second",e.get("second")),e.isCertain("millisecond")?t.assign("millisecond",e.get("millisecond")):t.imply("millisecond",e.get("millisecond"))):(t.imply("second",e.get("second")),t.imply("millisecond",e.get("millisecond")))):(t.imply("hour",e.get("hour")),t.imply("minute",e.get("minute")),t.imply("second",e.get("second")),t.imply("millisecond",e.get("millisecond"))),e.isCertain("timezoneOffset")&&t.assign("timezoneOffset",e.get("timezoneOffset")),e.isCertain("meridiem")?t.assign("meridiem",e.get("meridiem")):e.get("meridiem")!=null&&t.get("meridiem")==null&&t.imply("meridiem",e.get("meridiem")),t.get("meridiem")==fS.Meridiem.PM&&t.get("hour")<12&&(e.isCertain("hour")?t.assign("hour",t.get("hour")+12):t.imply("hour",t.get("hour")+12)),t}us.mergeDateTimeComponent=dd});var hn=k(pd=>{"use strict";Object.defineProperty(pd,"__esModule",{value:!0});var mS=os(),Cg=Mg(),fd=class extends mS.MergingRefiner{shouldMergeResults(e,t,n){return(t.start.isOnlyDate()&&n.start.isOnlyTime()||n.start.isOnlyDate()&&t.start.isOnlyTime())&&e.match(this.patternBetween())!=null}mergeResults(e,t,n){let i=t.start.isOnlyDate()?Cg.mergeDateTimeResult(t,n):Cg.mergeDateTimeResult(n,t);return i.index=t.index,i.text=t.text+e+n.text,i}};pd.default=fd});var Ag=k(_a=>{"use strict";var hS=_a&&_a.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_a,"__esModule",{value:!0});var gS=hS(hn()),md=class extends gS.default{patternBetween(){return new RegExp("^\\s*(T|at|after|before|on|of|,|-)?\\s*$")}};_a.default=md});var Pg=k(gd=>{"use strict";Object.defineProperty(gd,"__esModule",{value:!0});var yS=new RegExp("^\\s*,?\\s*\\(?([A-Z]{2,4})\\)?(?=\\W|$)","i"),bS={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:60,CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:-300,FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:240,MST:-420,MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:-480,PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360},hd=class{constructor(e){this.timezone=Object.assign(Object.assign({},bS),e)}refine(e,t){var n;let i=(n=e.option.timezones)!==null&&n!==void 0?n:{};return t.forEach(s=>{var a,o;let u=e.text.substring(s.index+s.text.length),l=yS.exec(u);if(!l)return;let c=l[1].toUpperCase(),d=(o=(a=i[c])!==null&&a!==void 0?a:this.timezone[c])!==null&&o!==void 0?o:null;if(d===null)return;e.debug(()=>{console.log(`Extracting timezone: '${c}' into: ${d} for: ${s.start}`)});let p=s.start.get("timezoneOffset");p!==null&&d!=p&&(s.start.isCertain("timezoneOffset")||c!=l[1])||s.start.isOnlyDate()&&c!=l[1]||(s.text+=l[0],s.start.isCertain("timezoneOffset")||s.start.assign("timezoneOffset",d),s.end!=null&&!s.end.isCertain("timezoneOffset")&&s.end.assign("timezoneOffset",d))}),t}};gd.default=hd});var fu=k(bd=>{"use strict";Object.defineProperty(bd,"__esModule",{value:!0});var TS=new RegExp("^\\s*(?:\\(?(?:GMT|UTC)\\s?)?([+-])(\\d{1,2})(?::?(\\d{2}))?\\)?","i"),_S=1,vS=2,wS=3,yd=class{refine(e,t){return t.forEach(function(n){if(n.start.isCertain("timezoneOffset"))return;let i=e.text.substring(n.index+n.text.length),s=TS.exec(i);if(!s)return;e.debug(()=>{console.log(`Extracting timezone: '${s[0]}' into : ${n}`)});let a=parseInt(s[vS]),o=parseInt(s[wS]||"0"),u=a*60+o;u>14*60||(s[_S]==="-"&&(u=-u),n.end!=null&&n.end.assign("timezoneOffset",u),n.start.assign("timezoneOffset",u),n.text+=s[0])}),t}};bd.default=yd});var Ng=k(_d=>{"use strict";Object.defineProperty(_d,"__esModule",{value:!0});var Td=class{refine(e,t){if(t.length<2)return t;let n=[],i=t[0];for(let s=1;s<t.length;s++){let a=t[s];a.index<i.index+i.text.length?a.text.length>i.text.length&&(i=a):(n.push(i),i=a)}return i!=null&&n.push(i),n}};_d.default=Td});var Ig=k(va=>{"use strict";var kS=va&&va.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(va,"__esModule",{value:!0});var ES=kS(_e()),vd=class{refine(e,t){return e.option.forwardDate&&t.forEach(function(n){let i=ES.default(e.refDate);if(n.start.isOnlyDayMonthComponent()&&i.isAfter(n.start.dayjs()))for(let s=0;s<3&&i.isAfter(n.start.dayjs());s++)n.start.imply("year",n.start.get("year")+1),e.debug(()=>{console.log(`Forward yearly adjusted for ${n} (${n.start})`)}),n.end&&!n.end.isCertain("year")&&(n.end.imply("year",n.end.get("year")+1),e.debug(()=>{console.log(`Forward yearly adjusted for ${n} (${n.end})`)}));n.start.isOnlyWeekdayComponent()&&i.isAfter(n.start.dayjs())&&(i.day()>=n.start.get("weekday")?i=i.day(n.start.get("weekday")+7):i=i.day(n.start.get("weekday")),n.start.imply("day",i.date()),n.start.imply("month",i.month()+1),n.start.imply("year",i.year()),e.debug(()=>{console.log(`Forward weekly adjusted for ${n} (${n.start})`)}),n.end&&n.end.isOnlyWeekdayComponent()&&(i.day()>n.end.get("weekday")?i=i.day(n.end.get("weekday")+7):i=i.day(n.end.get("weekday")),n.end.imply("day",i.date()),n.end.imply("month",i.month()+1),n.end.imply("year",i.year()),e.debug(()=>{console.log(`Forward weekly adjusted for ${n} (${n.end})`)})))}),t}};va.default=vd});var Fg=k(kd=>{"use strict";Object.defineProperty(kd,"__esModule",{value:!0});var SS=os(),wd=class extends SS.Filter{constructor(e){super(),this.strictMode=e}isValid(e,t){return t.text.replace(" ","").match(/^\d*(\.\d*)?$/)?(e.debug(()=>{console.log(`Removing unlikely result '${t.text}'`)}),!1):t.start.isValidDate()?t.end&&!t.end.isValidDate()?(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.end})`)}),!1):this.strictMode?this.isStrictModeValid(e,t):!0:(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.start})`)}),!1)}isStrictModeValid(e,t){return t.start.isOnlyWeekdayComponent()?(e.debug(()=>{console.log(`(Strict) Removing weekday only component: ${t} (${t.end})`)}),!1):t.start.isOnlyTime()&&(!t.start.isCertain("hour")||!t.start.isCertain("minute"))?(e.debug(()=>{console.log(`(Strict) Removing uncertain time component: ${t} (${t.end})`)}),!1):!0}};kd.default=wd});var Od=k(Sd=>{"use strict";Object.defineProperty(Sd,"__esModule",{value:!0});var OS=H(),DS=new RegExp("([0-9]{4})\\-([0-9]{1,2})\\-([0-9]{1,2})(?:T([0-9]{1,2}):([0-9]{1,2})(?::([0-9]{1,2})(?:\\.(\\d{1,4}))?)?(?:Z|([+-]\\d{2}):?(\\d{2})?)?)?(?=\\W|$)","i"),xS=1,RS=2,MS=3,Lg=4,CS=5,Ug=6,Wg=7,qg=8,$g=9,Ed=class extends OS.AbstractParserWithWordBoundaryChecking{innerPattern(){return DS}innerExtract(e,t){let n={};if(n.year=parseInt(t[xS]),n.month=parseInt(t[RS]),n.day=parseInt(t[MS]),t[Lg]!=null)if(n.hour=parseInt(t[Lg]),n.minute=parseInt(t[CS]),t[Ug]!=null&&(n.second=parseInt(t[Ug])),t[Wg]!=null&&(n.millisecond=parseInt(t[Wg])),t[qg]==null)n.timezoneOffset=0;else{let i=parseInt(t[qg]),s=0;t[$g]!=null&&(s=parseInt(t[$g]));let a=i*60;a<0?a-=s:a+=s,n.timezoneOffset=a}return n}};Sd.default=Ed});var jg=k(xd=>{"use strict";Object.defineProperty(xd,"__esModule",{value:!0});var AS=os(),Dd=class extends AS.MergingRefiner{mergeResults(e,t,n){let i=n.clone();return i.index=t.index,i.text=t.text+e+i.text,i.start.assign("weekday",t.start.get("weekday")),i.end&&i.end.assign("weekday",t.start.get("weekday")),i}shouldMergeResults(e,t,n){return t.start.isOnlyWeekdayComponent()&&!t.start.isCertain("hour")&&n.start.isCertain("day")&&e.match(/^,?\s*$/)!=null}};xd.default=Dd});var gn=k(ls=>{"use strict";var _i=ls&&ls.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ls,"__esModule",{value:!0});ls.includeCommonConfiguration=void 0;var PS=_i(Pg()),NS=_i(fu()),Gg=_i(Ng()),IS=_i(Ig()),FS=_i(Fg()),LS=_i(Od()),US=_i(jg());function WS(r,e=!1){return r.parsers.unshift(new LS.default),r.refiners.unshift(new US.default),r.refiners.unshift(new PS.default),r.refiners.unshift(new NS.default),r.refiners.unshift(new Gg.default),r.refiners.push(new Gg.default),r.refiners.push(new IS.default),r.refiners.push(new FS.default(e)),r}ls.includeCommonConfiguration=WS});var bn=k(Se=>{"use strict";var qS=Se&&Se.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Se,"__esModule",{value:!0});Se.noon=Se.morning=Se.midnight=Se.yesterdayEvening=Se.evening=Se.lastNight=Se.tonight=Se.theDayAfter=Se.tomorrow=Se.theDayBefore=Se.yesterday=Se.today=Se.now=void 0;var Qr=Ue(),cs=qS(_e()),yn=cr(),wa=Je();function $S(r){let e=cs.default(r.instant),t=new Qr.ParsingComponents(r,{});return yn.assignSimilarDate(t,e),yn.assignSimilarTime(t,e),r.timezoneOffset!==null&&t.assign("timezoneOffset",e.utcOffset()),t}Se.now=$S;function jS(r){let e=cs.default(r.instant),t=new Qr.ParsingComponents(r,{});return yn.assignSimilarDate(t,e),yn.implySimilarTime(t,e),t}Se.today=jS;function GS(r){return Yg(r,1)}Se.yesterday=GS;function Yg(r,e){return Rd(r,-e)}Se.theDayBefore=Yg;function YS(r){return Rd(r,1)}Se.tomorrow=YS;function Rd(r,e){let t=cs.default(r.instant),n=new Qr.ParsingComponents(r,{});return t=t.add(e,"day"),yn.assignSimilarDate(n,t),yn.implySimilarTime(n,t),n}Se.theDayAfter=Rd;function BS(r,e=22){let t=cs.default(r.instant),n=new Qr.ParsingComponents(r,{});return n.imply("hour",e),n.imply("meridiem",wa.Meridiem.PM),yn.assignSimilarDate(n,t),n}Se.tonight=BS;function HS(r,e=0){let t=cs.default(r.instant),n=new Qr.ParsingComponents(r,{});return t.hour()<6&&(t=t.add(-1,"day")),yn.assignSimilarDate(n,t),n.imply("hour",e),n}Se.lastNight=HS;function VS(r,e=20){let t=new Qr.ParsingComponents(r,{});return t.imply("meridiem",wa.Meridiem.PM),t.imply("hour",e),t}Se.evening=VS;function zS(r,e=20){let t=cs.default(r.instant),n=new Qr.ParsingComponents(r,{});return t=t.add(-1,"day"),yn.assignSimilarDate(n,t),n.imply("hour",e),n.imply("meridiem",wa.Meridiem.PM),n}Se.yesterdayEvening=zS;function KS(r){let e=new Qr.ParsingComponents(r,{});return e.imply("hour",0),e.imply("minute",0),e.imply("second",0),e}Se.midnight=KS;function QS(r,e=6){let t=new Qr.ParsingComponents(r,{});return t.imply("meridiem",wa.Meridiem.AM),t.imply("hour",e),t}Se.morning=QS;function XS(r){let e=new Qr.ParsingComponents(r,{});return e.imply("meridiem",wa.Meridiem.AM),e.imply("hour",12),e}Se.noon=XS});var Bg=k(Dr=>{"use strict";var ZS=Dr&&Dr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),JS=Dr&&Dr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),eO=Dr&&Dr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&ZS(e,r,t);return JS(e,r),e},tO=Dr&&Dr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Dr,"__esModule",{value:!0});var rO=tO(_e()),nO=H(),iO=cr(),ka=eO(bn()),sO=/(now|today|tonight|tomorrow|tmr|tmrw|yesterday|last\s*night)(?=\W|$)/i,Md=class extends nO.AbstractParserWithWordBoundaryChecking{innerPattern(e){return sO}innerExtract(e,t){let n=rO.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();switch(i){case"now":return ka.now(e.reference);case"today":return ka.today(e.reference);case"yesterday":return ka.yesterday(e.reference);case"tomorrow":case"tmr":case"tmrw":return ka.tomorrow(e.reference);case"tonight":return ka.tonight(e.reference);default:i.match(/last\s*night/)&&(n.hour()>6&&(n=n.add(-1,"day")),iO.assignSimilarDate(s,n),s.imply("hour",0));break}return s}};Dr.default=Md});var Hg=k(Ea=>{"use strict";var aO=Ea&&Ea.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ea,"__esModule",{value:!0});var pu=Je(),oO=H(),uO=aO(_e()),lO=cr(),cO=/(?:this)?\s{0,3}(morning|afternoon|evening|night|midnight|noon)(?=\W|$)/i,Cd=class extends oO.AbstractParserWithWordBoundaryChecking{innerPattern(){return cO}innerExtract(e,t){let n=uO.default(e.refDate),i=e.createParsingComponents();switch(t[1].toLowerCase()){case"afternoon":i.imply("meridiem",pu.Meridiem.PM),i.imply("hour",15);break;case"evening":case"night":i.imply("meridiem",pu.Meridiem.PM),i.imply("hour",20);break;case"midnight":lO.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"morning":i.imply("meridiem",pu.Meridiem.AM),i.imply("hour",6);break;case"noon":i.imply("meridiem",pu.Meridiem.AM),i.imply("hour",12);break}return i}};Ea.default=Cd});var vi=k(Kn=>{"use strict";var dO=Kn&&Kn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Kn,"__esModule",{value:!0});Kn.toDayJSClosestWeekday=Kn.toDayJSWeekday=void 0;var Vg=dO(_e());function fO(r,e,t){if(!t)return zg(r,e);let n=Vg.default(r);switch(t){case"this":n=n.day(e);break;case"next":n=n.day(e+7);break;case"last":n=n.day(e-7);break}return n}Kn.toDayJSWeekday=fO;function zg(r,e){let t=Vg.default(r),n=t.day();return Math.abs(e-7-n)<Math.abs(e-n)?t=t.day(e-7):Math.abs(e+7-n)<Math.abs(e-n)?t=t.day(e+7):t=t.day(e),t}Kn.toDayJSClosestWeekday=zg});var Qg=k(Pd=>{"use strict";Object.defineProperty(Pd,"__esModule",{value:!0});var Kg=mt(),pO=Re(),mO=H(),hO=vi(),gO=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:on\\s*?)?(?:(this|last|past|next)\\s*)?(${pO.matchAnyPattern(Kg.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(this|last|past|next)\\s*week)?(?=\\W|$)`,"i"),yO=1,bO=2,TO=3,Ad=class extends mO.AbstractParserWithWordBoundaryChecking{innerPattern(){return gO}innerExtract(e,t){let n=t[bO].toLowerCase(),i=Kg.WEEKDAY_DICTIONARY[n],s=t[yO],a=t[TO],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="last"||o=="past"?u="last":o=="next"?u="next":o=="this"&&(u="this");let l=hO.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Pd.default=Ad});var Jg=k(Sa=>{"use strict";var _O=Sa&&Sa.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Sa,"__esModule",{value:!0});var Zg=mt(),Xg=Ue(),vO=_O(_e()),wO=H(),kO=Re(),EO=new RegExp(`(this|last|past|next|after\\s*this)\\s*(${kO.matchAnyPattern(Zg.TIME_UNIT_DICTIONARY)})(?=\\s*)(?=\\W|$)`,"i"),SO=1,OO=2,Nd=class extends wO.AbstractParserWithWordBoundaryChecking{innerPattern(){return EO}innerExtract(e,t){let n=t[SO].toLowerCase(),i=t[OO].toLowerCase(),s=Zg.TIME_UNIT_DICTIONARY[i];if(n=="next"||n.startsWith("after")){let u={};return u[s]=1,Xg.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="last"||n=="past"){let u={};return u[s]=-1,Xg.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=vO.default(e.reference.instant);return i.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):i.match(/month/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):i.match(/year/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};Sa.default=Nd});var xr=k(ps=>{"use strict";Object.defineProperty(ps,"__esModule",{value:!0});ps.ParsingContext=ps.Chrono=void 0;var ds=Ue(),DO=Id(),fs=class{constructor(e){e=e||DO.createCasualConfiguration(),this.parsers=[...e.parsers],this.refiners=[...e.refiners]}clone(){return new fs({parsers:[...this.parsers],refiners:[...this.refiners]})}parseDate(e,t,n){let i=this.parse(e,t,n);return i.length>0?i[0].start.date():null}parse(e,t,n){let i=new mu(e,t,n),s=[];return this.parsers.forEach(a=>{let o=fs.executeParser(i,a);s=s.concat(o)}),s.sort((a,o)=>a.index-o.index),this.refiners.forEach(function(a){s=a.refine(i,s)}),s}static executeParser(e,t){let n=[],i=t.pattern(e),s=e.text,a=e.text,o=i.exec(a);for(;o;){let u=o.index+s.length-a.length;o.index=u;let l=t.extract(e,o);if(!l){a=s.substring(o.index+1),o=i.exec(a);continue}let c=null;l instanceof ds.ParsingResult?c=l:l instanceof ds.ParsingComponents?(c=e.createParsingResult(o.index,o[0]),c.start=l):c=e.createParsingResult(o.index,o[0],l),e.debug(()=>console.log(`${t.constructor.name} extracted result ${c}`)),n.push(c),a=s.substring(u+c.text.length),o=i.exec(a)}return n}};ps.Chrono=fs;var mu=class{constructor(e,t,n){this.text=e,this.reference=new ds.ReferenceWithTimezone(t),this.option=n!=null?n:{},this.refDate=this.reference.instant}createParsingComponents(e){return e instanceof ds.ParsingComponents?e:new ds.ParsingComponents(this.reference,e)}createParsingResult(e,t,n,i){let s=typeof t=="string"?t:this.text.substring(e,t),a=n?this.createParsingComponents(n):null,o=i?this.createParsingComponents(i):null;return new ds.ParsingResult(this.reference,e,s,a,o)}debug(e){this.option.debug&&(this.option.debug instanceof Function?this.option.debug(e):this.option.debug.debug(e))}};ps.ParsingContext=mu});var wi=k(Ud=>{"use strict";Object.defineProperty(Ud,"__esModule",{value:!0});var ey=pt(),xO=new RegExp("([^\\d]|^)([0-3]{0,1}[0-9]{1})[\\/\\.\\-]([0-3]{0,1}[0-9]{1})(?:[\\/\\.\\-]([0-9]{4}|[0-9]{2}))?(\\W|$)","i"),hu=1,ty=5,ry=2,ny=3,Fd=4,Ld=class{constructor(e){this.groupNumberMonth=e?ny:ry,this.groupNumberDay=e?ry:ny}pattern(){return xO}extract(e,t){if(t[hu]=="/"||t[ty]=="/"){t.index+=t[0].length;return}let n=t.index+t[hu].length,i=t[0].substr(t[hu].length,t[0].length-t[hu].length-t[ty].length);if(i.match(/^\d\.\d$/)||i.match(/^\d\.\d{1,2}\.\d{1,2}\s*$/)||!t[Fd]&&t[0].indexOf("/")<0)return;let s=e.createParsingResult(n,i),a=parseInt(t[this.groupNumberMonth]),o=parseInt(t[this.groupNumberDay]);if((a<1||a>12)&&a>12)if(o>=1&&o<=12&&a<=31)[o,a]=[a,o];else return null;if(o<1||o>31)return null;if(s.start.assign("day",o),s.start.assign("month",a),t[Fd]){let u=parseInt(t[Fd]),l=ey.findMostLikelyADYear(u);s.start.assign("year",l)}else{let u=ey.findYearClosestToRef(e.refDate,o,a);s.start.imply("year",u)}return s}};Ud.default=Ld});var sy=k(qd=>{"use strict";Object.defineProperty(qd,"__esModule",{value:!0});var iy=mt(),RO=Ue(),MO=H(),CO=dr(),AO=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${iy.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),Wd=class extends MO.AbstractParserWithWordBoundaryChecking{innerPattern(){return AO}innerExtract(e,t){let n=t[1].toLowerCase(),i=iy.parseTimeUnits(t[2]);switch(n){case"last":case"past":case"-":i=CO.reverseTimeUnits(i);break}return RO.ParsingComponents.createRelativeFromReference(e.reference,i)}};qd.default=Wd});var oy=k(Gd=>{"use strict";Object.defineProperty(Gd,"__esModule",{value:!0});var PO=os(),$d=Ue(),NO=mt(),IO=dr();function ay(r){return r.text.match(/\s+(before|from)$/i)!=null}function FO(r){return r.text.match(/\s+(after|since)$/i)!=null}var jd=class extends PO.MergingRefiner{patternBetween(){return/^\s*$/i}shouldMergeResults(e,t,n){return!e.match(this.patternBetween())||!ay(t)&&!FO(t)?!1:!!n.start.get("day")&&!!n.start.get("month")&&!!n.start.get("year")}mergeResults(e,t,n){let i=NO.parseTimeUnits(t.text);ay(t)&&(i=IO.reverseTimeUnits(i));let s=$d.ParsingComponents.createRelativeFromReference(new $d.ReferenceWithTimezone(n.start.date()),i);return new $d.ParsingResult(n.reference,t.index,`${t.text}${e}${n.text}`,s)}};Gd.default=jd});var Id=k(He=>{"use strict";var nt=He&&He.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(He,"__esModule",{value:!0});He.createConfiguration=He.createCasualConfiguration=He.parseDate=He.parse=He.GB=He.strict=He.casual=void 0;var LO=nt(ag()),UO=nt(fg()),WO=nt(yg()),qO=nt(_g()),$O=nt(kg()),jO=nt(Eg()),GO=nt(Og()),YO=nt(Dg()),BO=nt(xg()),HO=nt(Rg()),VO=nt(Ag()),zO=gn(),KO=nt(Bg()),QO=nt(Hg()),XO=nt(Qg()),ZO=nt(Jg()),Yd=xr(),JO=nt(wi()),e0=nt(sy()),t0=nt(oy());He.casual=new Yd.Chrono(uy(!1));He.strict=new Yd.Chrono(gu(!0,!1));He.GB=new Yd.Chrono(gu(!1,!0));function r0(r,e,t){return He.casual.parse(r,e,t)}He.parse=r0;function n0(r,e,t){return He.casual.parseDate(r,e,t)}He.parseDate=n0;function uy(r=!1){let e=gu(!1,r);return e.parsers.unshift(new KO.default),e.parsers.unshift(new QO.default),e.parsers.unshift(new qO.default),e.parsers.unshift(new ZO.default),e.parsers.unshift(new e0.default),e}He.createCasualConfiguration=uy;function gu(r=!0,e=!1){return zO.includeCommonConfiguration({parsers:[new JO.default(e),new LO.default,new UO.default,new WO.default,new XO.default,new $O.default,new jO.default,new GO.default(r),new YO.default(r),new BO.default(r)],refiners:[new t0.default,new VO.default,new HO.default]},r)}He.createConfiguration=gu});var ly=k(Hd=>{"use strict";Object.defineProperty(Hd,"__esModule",{value:!0});var i0=Ti(),Bd=class extends i0.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:um|von)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|bis)\\s*"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};Hd.default=Bd});var Oa=k(Ce=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});Ce.parseTimeUnits=Ce.TIME_UNITS_PATTERN=Ce.parseYear=Ce.YEAR_PATTERN=Ce.parseNumberPattern=Ce.NUMBER_PATTERN=Ce.TIME_UNIT_DICTIONARY=Ce.INTEGER_WORD_DICTIONARY=Ce.MONTH_DICTIONARY=Ce.WEEKDAY_DICTIONARY=void 0;var Vd=Re(),s0=pt();Ce.WEEKDAY_DICTIONARY={sonntag:0,so:0,montag:1,mo:1,dienstag:2,di:2,mittwoch:3,mi:3,donnerstag:4,do:4,freitag:5,fr:5,samstag:6,sa:6};Ce.MONTH_DICTIONARY={januar:1,j\u00E4nner:1,janner:1,jan:1,"jan.":1,februar:2,feber:2,feb:2,"feb.":2,m\u00E4rz:3,maerz:3,m\u00E4r:3,"m\xE4r.":3,mrz:3,"mrz.":3,april:4,apr:4,"apr.":4,mai:5,juni:6,jun:6,"jun.":6,juli:7,jul:7,"jul.":7,august:8,aug:8,"aug.":8,september:9,sep:9,"sep.":9,sept:9,"sept.":9,oktober:10,okt:10,"okt.":10,november:11,nov:11,"nov.":11,dezember:12,dez:12,"dez.":12};Ce.INTEGER_WORD_DICTIONARY={eins:1,eine:1,einem:1,einen:1,einer:1,zwei:2,drei:3,vier:4,f\u00FCnf:5,fuenf:5,sechs:6,sieben:7,acht:8,neun:9,zehn:10,elf:11,zw\u00F6lf:12,zwoelf:12};Ce.TIME_UNIT_DICTIONARY={sek:"second",sekunde:"second",sekunden:"second",min:"minute",minute:"minute",minuten:"minute",h:"hour",std:"hour",stunde:"hour",stunden:"hour",tag:"d",tage:"d",tagen:"d",woche:"week",wochen:"week",monat:"month",monate:"month",monaten:"month",monats:"month",quartal:"quarter",quartals:"quarter",quartale:"quarter",quartalen:"quarter",a:"year",j:"year",jr:"year",jahr:"year",jahre:"year",jahren:"year",jahres:"year"};Ce.NUMBER_PATTERN=`(?:${Vd.matchAnyPattern(Ce.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s*an?)?|an?\\b(?:\\s*few)?|few|several|a?\\s*couple\\s*(?:of)?)`;function dy(r){let e=r.toLowerCase();return Ce.INTEGER_WORD_DICTIONARY[e]!==void 0?Ce.INTEGER_WORD_DICTIONARY[e]:e==="a"||e==="an"?1:e.match(/few/)?3:e.match(/half/)?.5:e.match(/couple/)?2:e.match(/several/)?7:parseFloat(e)}Ce.parseNumberPattern=dy;Ce.YEAR_PATTERN="(?:[0-9]{1,4}(?:\\s*[vn]\\.?\\s*(?:C(?:hr)?|(?:u\\.?|d\\.?(?:\\s*g\\.?)?)?\\s*Z)\\.?|\\s*(?:u\\.?|d\\.?(?:\\s*g\\.)?)\\s*Z\\.?)?)";function a0(r){if(/v/i.test(r))return-parseInt(r.replace(/[^0-9]+/gi,""));if(/n/i.test(r))return parseInt(r.replace(/[^0-9]+/gi,""));if(/z/i.test(r))return parseInt(r.replace(/[^0-9]+/gi,""));let e=parseInt(r);return s0.findMostLikelyADYear(e)}Ce.parseYear=a0;var fy=`(${Ce.NUMBER_PATTERN})\\s{0,5}(${Vd.matchAnyPattern(Ce.TIME_UNIT_DICTIONARY)})\\s{0,5}`,cy=new RegExp(fy,"i");Ce.TIME_UNITS_PATTERN=Vd.repeatedTimeunitPattern("",fy);function o0(r){let e={},t=r,n=cy.exec(t);for(;n;)u0(e,n),t=t.substring(n[0].length),n=cy.exec(t);return e}Ce.parseTimeUnits=o0;function u0(r,e){let t=dy(e[1]),n=Ce.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var my=k(Kd=>{"use strict";Object.defineProperty(Kd,"__esModule",{value:!0});var py=Oa(),l0=Re(),c0=H(),d0=vi(),f0=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:a[mn]\\s*?)?(?:(diese[mn]|letzte[mn]|n(?:\xE4|ae)chste[mn])\\s*)?(${l0.matchAnyPattern(py.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(diese|letzte|n(?:\xE4|ae)chste)\\s*woche)?(?=\\W|$)`,"i"),p0=1,m0=3,h0=2,zd=class extends c0.AbstractParserWithWordBoundaryChecking{innerPattern(){return f0}innerExtract(e,t){let n=t[h0].toLowerCase(),i=py.WEEKDAY_DICTIONARY[n],s=t[p0],a=t[m0],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o.match(/letzte/)?u="last":o.match(/chste/)?u="next":o.match(/diese/)&&(u="this");let l=d0.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Kd.default=zd});var by=k(Qd=>{"use strict";Object.defineProperty(Qd,"__esModule",{value:!0});var Qn=Je(),g0=new RegExp("(^|\\s|T)(?:(?:um|von)\\s*)?(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s)?)?(?:\\s*Uhr)?(?:\\s*(morgens|vormittags|nachmittags|abends|nachts|am\\s+(?:Morgen|Vormittag|Nachmittag|Abend)|in\\s+der\\s+Nacht))?(?=\\W|$)","i"),y0=new RegExp("^\\s*(\\-|\\\u2013|\\~|\\\u301C|bis(?:\\s+um)?|\\?)\\s*(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s)?)?(?:\\s*Uhr)?(?:\\s*(morgens|vormittags|nachmittags|abends|nachts|am\\s+(?:Morgen|Vormittag|Nachmittag|Abend)|in\\s+der\\s+Nacht))?(?=\\W|$)","i"),b0=2,hy=3,gy=4,yy=5,ms=class{pattern(e){return g0}extract(e,t){let n=e.createParsingResult(t.index+t[1].length,t[0].substring(t[1].length));if(n.text.match(/^\d{4}$/)||(n.start=ms.extractTimeComponent(n.start.clone(),t),!n.start))return t.index+=t[0].length,null;let i=e.text.substring(t.index+t[0].length),s=y0.exec(i);return s&&(n.end=ms.extractTimeComponent(n.start.clone(),s),n.end&&(n.text+=s[0])),n}static extractTimeComponent(e,t){let n=0,i=0,s=null;if(n=parseInt(t[b0]),t[hy]!=null&&(i=parseInt(t[hy])),i>=60||n>24)return null;if(n>=12&&(s=Qn.Meridiem.PM),t[yy]!=null){if(n>12)return null;let a=t[yy].toLowerCase();a.match(/morgen|vormittag/)&&(s=Qn.Meridiem.AM,n==12&&(n=0)),a.match(/nachmittag|abend/)&&(s=Qn.Meridiem.PM,n!=12&&(n+=12)),a.match(/nacht/)&&(n==12?(s=Qn.Meridiem.AM,n=0):n<6?s=Qn.Meridiem.AM:(s=Qn.Meridiem.PM,n+=12))}if(e.assign("hour",n),e.assign("minute",i),s!==null?e.assign("meridiem",s):n<12?e.imply("meridiem",Qn.Meridiem.AM):e.imply("meridiem",Qn.Meridiem.PM),t[gy]!=null){let a=parseInt(t[gy]);if(a>=60)return null;e.assign("second",a)}return e}};Qd.default=ms});var Ty=k(Da=>{"use strict";var T0=Da&&Da.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Da,"__esModule",{value:!0});var _0=T0(Kr()),Xd=class extends _0.default{patternBetween(){return/^\s*(bis(?:\s*(?:am|zum))?|-)\s*$/i}};Da.default=Xd});var _y=k(xa=>{"use strict";var v0=xa&&xa.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(xa,"__esModule",{value:!0});var w0=v0(hn()),Zd=class extends w0.default{patternBetween(){return new RegExp("^\\s*(T|um|am|,|-)?\\s*$")}};xa.default=Zd});var Jd=k(Ma=>{"use strict";var k0=Ma&&Ma.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ma,"__esModule",{value:!0});var E0=k0(_e()),ki=Je(),S0=H(),O0=cr(),D0=dr(),Ra=class extends S0.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(diesen)?\s*(morgen|vormittag|mittags?|nachmittag|abend|nacht|mitternacht)(?=\W|$)/i}innerExtract(e,t){let n=E0.default(e.refDate),i=t[2].toLowerCase(),s=e.createParsingComponents();return O0.implySimilarTime(s,n),Ra.extractTimeComponents(s,i)}static extractTimeComponents(e,t){switch(t){case"morgen":e.imply("hour",6),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",ki.Meridiem.AM);break;case"vormittag":e.imply("hour",9),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",ki.Meridiem.AM);break;case"mittag":case"mittags":e.imply("hour",12),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",ki.Meridiem.AM);break;case"nachmittag":e.imply("hour",15),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",ki.Meridiem.PM);break;case"abend":e.imply("hour",18),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",ki.Meridiem.PM);break;case"nacht":e.imply("hour",22),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",ki.Meridiem.PM);break;case"mitternacht":e.get("hour")>1&&(e=D0.addImpliedTimeUnits(e,{day:1})),e.imply("hour",0),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",ki.Meridiem.AM);break}return e}};Ma.default=Ra});var ky=k(Rr=>{"use strict";var x0=Rr&&Rr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),R0=Rr&&Rr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),M0=Rr&&Rr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&x0(e,r,t);return R0(e,r),e},wy=Rr&&Rr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Rr,"__esModule",{value:!0});var C0=wy(_e()),A0=H(),Ei=cr(),P0=wy(Jd()),vy=M0(bn()),N0=new RegExp("(jetzt|heute|morgen|\xFCbermorgen|uebermorgen|gestern|vorgestern|letzte\\s*nacht)(?:\\s*(morgen|vormittag|mittags?|nachmittag|abend|nacht|mitternacht))?(?=\\W|$)","i"),I0=1,F0=2,ef=class extends A0.AbstractParserWithWordBoundaryChecking{innerPattern(e){return N0}innerExtract(e,t){let n=C0.default(e.refDate),i=(t[I0]||"").toLowerCase(),s=(t[F0]||"").toLowerCase(),a=e.createParsingComponents();switch(i){case"jetzt":a=vy.now(e.reference);break;case"heute":a=vy.today(e.reference);break;case"morgen":Ei.assignTheNextDay(a,n);break;case"\xFCbermorgen":case"uebermorgen":n=n.add(1,"day"),Ei.assignTheNextDay(a,n);break;case"gestern":n=n.add(-1,"day"),Ei.assignSimilarDate(a,n),Ei.implySimilarTime(a,n);break;case"vorgestern":n=n.add(-2,"day"),Ei.assignSimilarDate(a,n),Ei.implySimilarTime(a,n);break;default:i.match(/letzte\s*nacht/)&&(n.hour()>6&&(n=n.add(-1,"day")),Ei.assignSimilarDate(a,n),a.imply("hour",0));break}return s&&(a=P0.default.extractTimeComponents(a,s)),a}};Rr.default=ef});var Ry=k(rf=>{"use strict";Object.defineProperty(rf,"__esModule",{value:!0});var L0=pt(),Dy=Oa(),xy=Oa(),U0=Re(),W0=H(),q0=new RegExp(`(?:am\\s*?)?(?:den\\s*?)?([0-9]{1,2})\\.(?:\\s*(?:bis(?:\\s*(?:am|zum))?|\\-|\\\u2013|\\s)\\s*([0-9]{1,2})\\.?)?\\s*(${U0.matchAnyPattern(Dy.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s*)(${xy.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),Ey=1,Sy=2,$0=3,Oy=4,tf=class extends W0.AbstractParserWithWordBoundaryChecking{innerPattern(){return q0}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Dy.MONTH_DICTIONARY[t[$0].toLowerCase()],s=parseInt(t[Ey]);if(s>31)return t.index=t.index+t[Ey].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[Oy]){let a=xy.parseYear(t[Oy]);n.start.assign("year",a)}else{let a=L0.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[Sy]){let a=parseInt(t[Sy]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};rf.default=tf});var My=k(sf=>{"use strict";Object.defineProperty(sf,"__esModule",{value:!0});var yu=Oa(),j0=Ue(),G0=H(),Y0=dr(),B0=Re(),nf=class extends G0.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`(?:\\s*((?:n\xE4chste|kommende|folgende|letzte|vergangene|vorige|vor(?:her|an)gegangene)(?:s|n|m|r)?|vor|in)\\s*)?(${yu.NUMBER_PATTERN})?(?:\\s*(n\xE4chste|kommende|folgende|letzte|vergangene|vorige|vor(?:her|an)gegangene)(?:s|n|m|r)?)?\\s*(${B0.matchAnyPattern(yu.TIME_UNIT_DICTIONARY)})`,"i")}innerExtract(e,t){let n=t[2]?yu.parseNumberPattern(t[2]):1,i=yu.TIME_UNIT_DICTIONARY[t[4].toLowerCase()],s={};s[i]=n;let a=t[1]||t[3]||"";if(a=a.toLowerCase(),!!a)return(/vor/.test(a)||/letzte/.test(a)||/vergangen/.test(a))&&(s=Y0.reverseTimeUnits(s)),j0.ParsingComponents.createRelativeFromReference(e.reference,s)}};sf.default=nf});var Py=k(it=>{"use strict";var Mr=it&&it.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(it,"__esModule",{value:!0});it.createConfiguration=it.createCasualConfiguration=it.parseDate=it.parse=it.strict=it.casual=void 0;var H0=gn(),Cy=xr(),V0=Mr(wi()),z0=Mr(Od()),K0=Mr(ly()),Q0=Mr(my()),X0=Mr(by()),Z0=Mr(Ty()),J0=Mr(_y()),e1=Mr(ky()),t1=Mr(Jd()),r1=Mr(Ry()),n1=Mr(My());it.casual=new Cy.Chrono(Ay());it.strict=new Cy.Chrono(af(!0));function i1(r,e,t){return it.casual.parse(r,e,t)}it.parse=i1;function s1(r,e,t){return it.casual.parseDate(r,e,t)}it.parseDate=s1;function Ay(r=!0){let e=af(!1,r);return e.parsers.unshift(new t1.default),e.parsers.unshift(new e1.default),e.parsers.unshift(new n1.default),e}it.createCasualConfiguration=Ay;function af(r=!0,e=!0){return H0.includeCommonConfiguration({parsers:[new z0.default,new V0.default(e),new K0.default,new X0.default,new r1.default,new Q0.default],refiners:[new Z0.default,new J0.default]},r)}it.createConfiguration=af});var Iy=k(Cr=>{"use strict";var a1=Cr&&Cr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),o1=Cr&&Cr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),u1=Cr&&Cr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&a1(e,r,t);return o1(e,r),e},l1=Cr&&Cr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Cr,"__esModule",{value:!0});var c1=l1(_e()),d1=Je(),f1=H(),Ny=cr(),bu=u1(bn()),of=class extends f1.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(maintenant|aujourd'hui|demain|hier|cette\s*nuit|la\s*veille)(?=\W|$)/i}innerExtract(e,t){let n=c1.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();switch(i){case"maintenant":return bu.now(e.reference);case"aujourd'hui":return bu.today(e.reference);case"hier":return bu.yesterday(e.reference);case"demain":return bu.tomorrow(e.reference);default:i.match(/cette\s*nuit/)?(Ny.assignSimilarDate(s,n),s.imply("hour",22),s.imply("meridiem",d1.Meridiem.PM)):i.match(/la\s*veille/)&&(n=n.add(-1,"day"),Ny.assignSimilarDate(s,n),s.imply("hour",0))}return s}};Cr.default=of});var Fy=k(lf=>{"use strict";Object.defineProperty(lf,"__esModule",{value:!0});var Ca=Je(),p1=H(),uf=class extends p1.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(cet?)?\s*(matin|soir|après-midi|aprem|a midi|à minuit)(?=\W|$)/i}innerExtract(e,t){let n=t[2].toLowerCase(),i=e.createParsingComponents();switch(n){case"apr\xE8s-midi":case"aprem":i.imply("hour",14),i.imply("minute",0),i.imply("meridiem",Ca.Meridiem.PM);break;case"soir":i.imply("hour",18),i.imply("minute",0),i.imply("meridiem",Ca.Meridiem.PM);break;case"matin":i.imply("hour",8),i.imply("minute",0),i.imply("meridiem",Ca.Meridiem.AM);break;case"a midi":i.imply("hour",12),i.imply("minute",0),i.imply("meridiem",Ca.Meridiem.AM);break;case"\xE0 minuit":i.imply("hour",0),i.imply("meridiem",Ca.Meridiem.AM);break}return i}};lf.default=uf});var Ly=k(df=>{"use strict";Object.defineProperty(df,"__esModule",{value:!0});var m1=Ti(),cf=class extends m1.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:[\xE0a])\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|[\xE0a]|\\?)\\s*"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};df.default=cf});var Uy=k(Aa=>{"use strict";var h1=Aa&&Aa.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Aa,"__esModule",{value:!0});var g1=h1(hn()),ff=class extends g1.default{patternBetween(){return new RegExp("^\\s*(T|\xE0|a|vers|de|,|-)?\\s*$")}};Aa.default=ff});var Wy=k(Pa=>{"use strict";var y1=Pa&&Pa.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Pa,"__esModule",{value:!0});var b1=y1(Kr()),pf=class extends b1.default{patternBetween(){return/^\s*(à|a|-)\s*$/i}};Pa.default=pf});var Xn=k(ve=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});ve.parseTimeUnits=ve.TIME_UNITS_PATTERN=ve.parseYear=ve.YEAR_PATTERN=ve.parseOrdinalNumberPattern=ve.ORDINAL_NUMBER_PATTERN=ve.parseNumberPattern=ve.NUMBER_PATTERN=ve.TIME_UNIT_DICTIONARY=ve.INTEGER_WORD_DICTIONARY=ve.MONTH_DICTIONARY=ve.WEEKDAY_DICTIONARY=void 0;var mf=Re();ve.WEEKDAY_DICTIONARY={dimanche:0,dim:0,lundi:1,lun:1,mardi:2,mar:2,mercredi:3,mer:3,jeudi:4,jeu:4,vendredi:5,ven:5,samedi:6,sam:6};ve.MONTH_DICTIONARY={janvier:1,jan:1,"jan.":1,f\u00E9vrier:2,f\u00E9v:2,"f\xE9v.":2,fevrier:2,fev:2,"fev.":2,mars:3,mar:3,"mar.":3,avril:4,avr:4,"avr.":4,mai:5,juin:6,jun:6,juillet:7,juil:7,jul:7,"jul.":7,ao\u00FBt:8,aout:8,septembre:9,sep:9,"sep.":9,sept:9,"sept.":9,octobre:10,oct:10,"oct.":10,novembre:11,nov:11,"nov.":11,d\u00E9cembre:12,decembre:12,dec:12,"dec.":12};ve.INTEGER_WORD_DICTIONARY={un:1,deux:2,trois:3,quatre:4,cinq:5,six:6,sept:7,huit:8,neuf:9,dix:10,onze:11,douze:12,treize:13};ve.TIME_UNIT_DICTIONARY={sec:"second",seconde:"second",secondes:"second",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",heure:"hour",heures:"hour",jour:"d",jours:"d",semaine:"week",semaines:"week",mois:"month",trimestre:"quarter",trimestres:"quarter",ans:"year",ann\u00E9e:"year",ann\u00E9es:"year"};ve.NUMBER_PATTERN=`(?:${mf.matchAnyPattern(ve.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|une?\\b|quelques?|demi-?)`;function $y(r){let e=r.toLowerCase();return ve.INTEGER_WORD_DICTIONARY[e]!==void 0?ve.INTEGER_WORD_DICTIONARY[e]:e==="une"||e==="un"?1:e.match(/quelques?/)?3:e.match(/demi-?/)?.5:parseFloat(e)}ve.parseNumberPattern=$y;ve.ORDINAL_NUMBER_PATTERN="(?:[0-9]{1,2}(?:er)?)";function T1(r){let e=r.toLowerCase();return e=e.replace(/(?:er)$/i,""),parseInt(e)}ve.parseOrdinalNumberPattern=T1;ve.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s*(?:AC|AD|p\\.\\s*C(?:hr?)?\\.\\s*n\\.)|[1-2][0-9]{3}|[5-9][0-9])";function _1(r){if(/AC/i.test(r))return r=r.replace(/BC/i,""),-parseInt(r);if(/AD/i.test(r)||/C/i.test(r))return r=r.replace(/[^\d]+/i,""),parseInt(r);let e=parseInt(r);return e<100&&(e>50?e=e+1900:e=e+2e3),e}ve.parseYear=_1;var jy=`(${ve.NUMBER_PATTERN})\\s{0,5}(${mf.matchAnyPattern(ve.TIME_UNIT_DICTIONARY)})\\s{0,5}`,qy=new RegExp(jy,"i");ve.TIME_UNITS_PATTERN=mf.repeatedTimeunitPattern("",jy);function v1(r){let e={},t=r,n=qy.exec(t);for(;n;)w1(e,n),t=t.substring(n[0].length),n=qy.exec(t);return e}ve.parseTimeUnits=v1;function w1(r,e){let t=$y(e[1]),n=ve.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var Yy=k(gf=>{"use strict";Object.defineProperty(gf,"__esModule",{value:!0});var Gy=Xn(),k1=Re(),E1=H(),S1=vi(),O1=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:(?:ce)\\s*)?(${k1.matchAnyPattern(Gy.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(dernier|prochain)\\s*)?(?=\\W|\\d|$)`,"i"),D1=1,x1=2,hf=class extends E1.AbstractParserWithWordBoundaryChecking{innerPattern(){return O1}innerExtract(e,t){let n=t[D1].toLowerCase(),i=Gy.WEEKDAY_DICTIONARY[n];if(i===void 0)return null;let s=t[x1];s=s||"",s=s.toLowerCase();let a=null;s=="dernier"?a="last":s=="prochain"&&(a="next");let o=S1.toDayJSWeekday(e.refDate,i,a);return e.createParsingComponents().assign("weekday",i).imply("day",o.date()).imply("month",o.month()+1).imply("year",o.year())}};gf.default=hf});var zy=k(yf=>{"use strict";Object.defineProperty(yf,"__esModule",{value:!0});var Na=Je(),R1=new RegExp("(^|\\s|T)(?:(?:[\xE0a])\\s*)?(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s|:)?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),M1=new RegExp("^\\s*(\\-|\\\u2013|\\~|\\\u301C|[\xE0a]|\\?)\\s*(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s|:)?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),C1=2,By=3,Hy=4,Vy=5,hs=class{pattern(e){return R1}extract(e,t){let n=e.createParsingResult(t.index+t[1].length,t[0].substring(t[1].length));if(n.text.match(/^\d{4}$/)||(n.start=hs.extractTimeComponent(n.start.clone(),t),!n.start))return t.index+=t[0].length,null;let i=e.text.substring(t.index+t[0].length),s=M1.exec(i);return s&&(n.end=hs.extractTimeComponent(n.start.clone(),s),n.end&&(n.text+=s[0])),n}static extractTimeComponent(e,t){let n=0,i=0,s=null;if(n=parseInt(t[C1]),t[By]!=null&&(i=parseInt(t[By])),i>=60||n>24)return null;if(n>=12&&(s=Na.Meridiem.PM),t[Vy]!=null){if(n>12)return null;let a=t[Vy][0].toLowerCase();a=="a"&&(s=Na.Meridiem.AM,n==12&&(n=0)),a=="p"&&(s=Na.Meridiem.PM,n!=12&&(n+=12))}if(e.assign("hour",n),e.assign("minute",i),s!==null?e.assign("meridiem",s):n<12?e.imply("meridiem",Na.Meridiem.AM):e.imply("meridiem",Na.Meridiem.PM),t[Hy]!=null){let a=parseInt(t[Hy]);if(a>=60)return null;e.assign("second",a)}return e}};yf.default=hs});var eb=k(Tf=>{"use strict";Object.defineProperty(Tf,"__esModule",{value:!0});var A1=pt(),Zy=Xn(),Jy=Xn(),Tu=Xn(),P1=Re(),N1=H(),I1=new RegExp(`(?:on\\s*?)?(${Tu.ORDINAL_NUMBER_PATTERN})(?:\\s*(?:au|\\-|\\\u2013|jusqu'au?|\\s)\\s*(${Tu.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s*(?:de)?\\s*)(${P1.matchAnyPattern(Zy.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s*)(${Jy.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),Ky=1,Qy=2,F1=3,Xy=4,bf=class extends N1.AbstractParserWithWordBoundaryChecking{innerPattern(){return I1}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Zy.MONTH_DICTIONARY[t[F1].toLowerCase()],s=Tu.parseOrdinalNumberPattern(t[Ky]);if(s>31)return t.index=t.index+t[Ky].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[Xy]){let a=Jy.parseYear(t[Xy]);n.start.assign("year",a)}else{let a=A1.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[Qy]){let a=Tu.parseOrdinalNumberPattern(t[Qy]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Tf.default=bf});var rb=k(vf=>{"use strict";Object.defineProperty(vf,"__esModule",{value:!0});var tb=Xn(),L1=Ue(),U1=H(),W1=dr(),_f=class extends U1.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`il y a\\s*(${tb.TIME_UNITS_PATTERN})(?=(?:\\W|$))`,"i")}innerExtract(e,t){let n=tb.parseTimeUnits(t[1]),i=W1.reverseTimeUnits(n);return L1.ParsingComponents.createRelativeFromReference(e.reference,i)}};vf.default=_f});var ib=k(kf=>{"use strict";Object.defineProperty(kf,"__esModule",{value:!0});var nb=Xn(),q1=Ue(),$1=H(),wf=class extends $1.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp(`(?:dans|en|pour|pendant|de)\\s*(${nb.TIME_UNITS_PATTERN})(?=\\W|$)`,"i")}innerExtract(e,t){let n=nb.parseTimeUnits(t[1]);return q1.ParsingComponents.createRelativeFromReference(e.reference,n)}};kf.default=wf});var sb=k(Sf=>{"use strict";Object.defineProperty(Sf,"__esModule",{value:!0});var _u=Xn(),j1=Ue(),G1=H(),Y1=dr(),B1=Re(),Ef=class extends G1.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`(?:les?|la|l'|du|des?)\\s*(${_u.NUMBER_PATTERN})?(?:\\s*(prochaine?s?|derni[e\xE8]re?s?|pass[\xE9e]e?s?|pr[\xE9e]c[\xE9e]dents?|suivante?s?))?\\s*(${B1.matchAnyPattern(_u.TIME_UNIT_DICTIONARY)})(?:\\s*(prochaine?s?|derni[e\xE8]re?s?|pass[\xE9e]e?s?|pr[\xE9e]c[\xE9e]dents?|suivante?s?))?`,"i")}innerExtract(e,t){let n=t[1]?_u.parseNumberPattern(t[1]):1,i=_u.TIME_UNIT_DICTIONARY[t[3].toLowerCase()],s={};s[i]=n;let a=t[2]||t[4]||"";if(a=a.toLowerCase(),!!a)return(/derni[eè]re?s?/.test(a)||/pass[ée]e?s?/.test(a)||/pr[ée]c[ée]dents?/.test(a))&&(s=Y1.reverseTimeUnits(s)),j1.ParsingComponents.createRelativeFromReference(e.reference,s)}};Sf.default=Ef});var ub=k(st=>{"use strict";var fr=st&&st.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(st,"__esModule",{value:!0});st.createConfiguration=st.createCasualConfiguration=st.parseDate=st.parse=st.strict=st.casual=void 0;var H1=gn(),ab=xr(),V1=fr(Iy()),z1=fr(Fy()),K1=fr(wi()),Q1=fr(Ly()),X1=fr(Uy()),Z1=fr(Wy()),J1=fr(Yy()),eD=fr(zy()),tD=fr(eb()),rD=fr(rb()),nD=fr(ib()),iD=fr(sb());st.casual=new ab.Chrono(ob());st.strict=new ab.Chrono(Of(!0));function sD(r,e,t){return st.casual.parse(r,e,t)}st.parse=sD;function aD(r,e,t){return st.casual.parseDate(r,e,t)}st.parseDate=aD;function ob(r=!0){let e=Of(!1,r);return e.parsers.unshift(new V1.default),e.parsers.unshift(new z1.default),e.parsers.unshift(new iD.default),e}st.createCasualConfiguration=ob;function Of(r=!0,e=!0){return H1.includeCommonConfiguration({parsers:[new K1.default(e),new tD.default,new Q1.default,new eD.default,new rD.default,new nD.default,new J1.default],refiners:[new X1.default,new Z1.default]},r)}st.createConfiguration=Of});var lb=k(vu=>{"use strict";Object.defineProperty(vu,"__esModule",{value:!0});vu.toHankaku=void 0;function oD(r){return String(r).replace(/\u2019/g,"'").replace(/\u201D/g,'"').replace(/\u3000/g," ").replace(/\uFFE5/g,"\xA5").replace(/[\uFF01\uFF03-\uFF06\uFF08\uFF09\uFF0C-\uFF19\uFF1C-\uFF1F\uFF21-\uFF3B\uFF3D\uFF3F\uFF41-\uFF5B\uFF5D\uFF5E]/g,uD)}vu.toHankaku=oD;function uD(r){return String.fromCharCode(r.charCodeAt(0)-65248)}});var db=k(Ia=>{"use strict";var lD=Ia&&Ia.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ia,"__esModule",{value:!0});var Df=lb(),cD=pt(),dD=lD(_e()),fD=/(?:(?:([同今本])|((昭和|平成|令和)?([0-9０-９]{1,4}|元)))年\s*)?([0-9０-９]{1,2})月\s*([0-9０-９]{1,2})日/i,cb=1,pD=2,xf=3,mD=4,hD=5,gD=6,Rf=class{pattern(){return fD}extract(e,t){let n=parseInt(Df.toHankaku(t[hD])),i=parseInt(Df.toHankaku(t[gD])),s=e.createParsingComponents({day:i,month:n});if(t[cb]&&t[cb].match("\u540C|\u4ECA|\u672C")){let a=dD.default(e.refDate);s.assign("year",a.year())}if(t[pD]){let a=t[mD],o=a=="\u5143"?1:parseInt(Df.toHankaku(a));t[xf]=="\u4EE4\u548C"?o+=2018:t[xf]=="\u5E73\u6210"?o+=1988:t[xf]=="\u662D\u548C"&&(o+=1925),s.assign("year",o)}else{let a=cD.findYearClosestToRef(e.refDate,i,n);s.imply("year",a)}return s}};Ia.default=Rf});var fb=k(Fa=>{"use strict";var yD=Fa&&Fa.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Fa,"__esModule",{value:!0});var bD=yD(Kr()),Mf=class extends bD.default{patternBetween(){return/^\s*(から|ー|-)\s*$/i}};Fa.default=Mf});var mb=k(Ar=>{"use strict";var TD=Ar&&Ar.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),_D=Ar&&Ar.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),vD=Ar&&Ar.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&TD(e,r,t);return _D(e,r),e},wD=Ar&&Ar.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ar,"__esModule",{value:!0});var kD=wD(_e()),pb=Je(),Cf=vD(bn()),ED=/今日|当日|昨日|明日|今夜|今夕|今晩|今朝/i,Af=class{pattern(){return ED}extract(e,t){let n=t[0],i=kD.default(e.refDate),s=e.createParsingComponents();switch(n){case"\u6628\u65E5":return Cf.yesterday(e.reference);case"\u660E\u65E5":return Cf.tomorrow(e.reference);case"\u4ECA\u65E5":case"\u5F53\u65E5":return Cf.today(e.reference)}return n=="\u4ECA\u591C"||n=="\u4ECA\u5915"||n=="\u4ECA\u6669"?(s.imply("hour",22),s.assign("meridiem",pb.Meridiem.PM)):n.match("\u4ECA\u671D")&&(s.imply("hour",6),s.assign("meridiem",pb.Meridiem.AM)),s.assign("day",i.date()),s.assign("month",i.month()+1),s.assign("year",i.year()),s}};Ar.default=Af});var yb=k(at=>{"use strict";var Pf=at&&at.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(at,"__esModule",{value:!0});at.createConfiguration=at.createCasualConfiguration=at.parseDate=at.parse=at.strict=at.casual=void 0;var SD=Pf(db()),OD=Pf(fb()),DD=Pf(mb()),hb=xr();at.casual=new hb.Chrono(gb());at.strict=new hb.Chrono(Nf());function xD(r,e,t){return at.casual.parse(r,e,t)}at.parse=xD;function RD(r,e,t){return at.casual.parseDate(r,e,t)}at.parseDate=RD;function gb(){let r=Nf();return r.parsers.unshift(new DD.default),r}at.createCasualConfiguration=gb;function Nf(){return{parsers:[new SD.default],refiners:[new OD.default]}}at.createConfiguration=Nf});var wu=k(Xr=>{"use strict";Object.defineProperty(Xr,"__esModule",{value:!0});Xr.parseYear=Xr.YEAR_PATTERN=Xr.MONTH_DICTIONARY=Xr.WEEKDAY_DICTIONARY=void 0;Xr.WEEKDAY_DICTIONARY={domingo:0,dom:0,segunda:1,"segunda-feira":1,seg:1,ter\u00E7a:2,"ter\xE7a-feira":2,ter:2,quarta:3,"quarta-feira":3,qua:3,quinta:4,"quinta-feira":4,qui:4,sexta:5,"sexta-feira":5,sex:5,s\u00E1bado:6,sabado:6,sab:6};Xr.MONTH_DICTIONARY={janeiro:1,jan:1,"jan.":1,fevereiro:2,fev:2,"fev.":2,mar\u00E7o:3,mar:3,"mar.":3,abril:4,abr:4,"abr.":4,maio:5,mai:5,"mai.":5,junho:6,jun:6,"jun.":6,julho:7,jul:7,"jul.":7,agosto:8,ago:8,"ago.":8,setembro:9,set:9,"set.":9,outubro:10,out:10,"out.":10,novembro:11,nov:11,"nov.":11,dezembro:12,dez:12,"dez.":12};Xr.YEAR_PATTERN="[0-9]{1,4}(?![^\\s]\\d)(?:\\s*[a|d]\\.?\\s*c\\.?|\\s*a\\.?\\s*d\\.?)?";function MD(r){if(r.match(/^[0-9]{1,4}$/)){let e=parseInt(r);return e<100&&(e>50?e=e+1900:e=e+2e3),e}return r.match(/a\.?\s*c\.?/i)?(r=r.replace(/a\.?\s*c\.?/i,""),-parseInt(r)):parseInt(r)}Xr.parseYear=MD});var Tb=k(Ff=>{"use strict";Object.defineProperty(Ff,"__esModule",{value:!0});var bb=wu(),CD=Re(),AD=H(),PD=vi(),ND=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:(este|esta|passado|pr[o\xF3]ximo)\\s*)?(${CD.matchAnyPattern(bb.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(este|esta|passado|pr[\xF3o]ximo)\\s*semana)?(?=\\W|\\d|$)`,"i"),ID=1,FD=2,LD=3,If=class extends AD.AbstractParserWithWordBoundaryChecking{innerPattern(){return ND}innerExtract(e,t){let n=t[FD].toLowerCase(),i=bb.WEEKDAY_DICTIONARY[n];if(i===void 0)return null;let s=t[ID],a=t[LD],o=s||a||"";o=o.toLowerCase();let u=null;o=="passado"?u="this":o=="pr\xF3ximo"||o=="proximo"?u="next":o=="este"&&(u="this");let l=PD.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Ff.default=If});var _b=k(Uf=>{"use strict";Object.defineProperty(Uf,"__esModule",{value:!0});var UD=Ti(),Lf=class extends UD.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:ao?|\xE0s?|das|da|de|do)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|a(?:o)?|\\?)\\s*"}};Uf.default=Lf});var vb=k(La=>{"use strict";var WD=La&&La.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(La,"__esModule",{value:!0});var qD=WD(hn()),Wf=class extends qD.default{patternBetween(){return new RegExp("^\\s*(?:,|\xE0)?\\s*$")}};La.default=Wf});var wb=k(Ua=>{"use strict";var $D=Ua&&Ua.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ua,"__esModule",{value:!0});var jD=$D(Kr()),qf=class extends jD.default{patternBetween(){return/^\s*(?:-)\s*$/i}};Ua.default=qf});var xb=k(jf=>{"use strict";Object.defineProperty(jf,"__esModule",{value:!0});var GD=pt(),Ob=wu(),Db=wu(),YD=Re(),BD=H(),HD=new RegExp(`([0-9]{1,2})(?:\xBA|\xAA|\xB0)?(?:\\s*(?:desde|de|\\-|\\\u2013|ao?|\\s)\\s*([0-9]{1,2})(?:\xBA|\xAA|\xB0)?)?\\s*(?:de)?\\s*(?:-|/|\\s*(?:de|,)?\\s*)(${YD.matchAnyPattern(Ob.MONTH_DICTIONARY)})(?:\\s*(?:de|,)?\\s*(${Db.YEAR_PATTERN}))?(?=\\W|$)`,"i"),kb=1,Eb=2,VD=3,Sb=4,$f=class extends BD.AbstractParserWithWordBoundaryChecking{innerPattern(){return HD}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Ob.MONTH_DICTIONARY[t[VD].toLowerCase()],s=parseInt(t[kb]);if(s>31)return t.index=t.index+t[kb].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[Sb]){let a=Db.parseYear(t[Sb]);n.start.assign("year",a)}else{let a=GD.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[Eb]){let a=parseInt(t[Eb]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};jf.default=$f});var Rb=k(Tn=>{"use strict";var zD=Tn&&Tn.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),KD=Tn&&Tn.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),QD=Tn&&Tn.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&zD(e,r,t);return KD(e,r),e};Object.defineProperty(Tn,"__esModule",{value:!0});var XD=H(),ku=QD(bn()),Gf=class extends XD.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(agora|hoje|amanha|amanhã|ontem)(?=\W|$)/i}innerExtract(e,t){let n=t[0].toLowerCase(),i=e.createParsingComponents();switch(n){case"agora":return ku.now(e.reference);case"hoje":return ku.today(e.reference);case"amanha":case"amanh\xE3":return ku.tomorrow(e.reference);case"ontem":return ku.yesterday(e.reference)}return i}};Tn.default=Gf});var Mb=k(Wa=>{"use strict";var ZD=Wa&&Wa.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Wa,"__esModule",{value:!0});var Eu=Je(),JD=H(),ex=cr(),tx=ZD(_e()),Yf=class extends JD.AbstractParserWithWordBoundaryChecking{innerPattern(){return/(?:esta\s*)?(manha|manhã|tarde|meia-noite|meio-dia|noite)(?=\W|$)/i}innerExtract(e,t){let n=tx.default(e.refDate),i=e.createParsingComponents();switch(t[1].toLowerCase()){case"tarde":i.imply("meridiem",Eu.Meridiem.PM),i.imply("hour",15);break;case"noite":i.imply("meridiem",Eu.Meridiem.PM),i.imply("hour",22);break;case"manha":case"manh\xE3":i.imply("meridiem",Eu.Meridiem.AM),i.imply("hour",6);break;case"meia-noite":ex.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"meio-dia":i.imply("meridiem",Eu.Meridiem.AM),i.imply("hour",12);break}return i}};Wa.default=Yf});var Pb=k(ot=>{"use strict";var Zn=ot&&ot.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ot,"__esModule",{value:!0});ot.createConfiguration=ot.createCasualConfiguration=ot.parseDate=ot.parse=ot.strict=ot.casual=void 0;var rx=gn(),Cb=xr(),nx=Zn(wi()),ix=Zn(Tb()),sx=Zn(_b()),ax=Zn(vb()),ox=Zn(wb()),ux=Zn(xb()),lx=Zn(Rb()),cx=Zn(Mb());ot.casual=new Cb.Chrono(Ab());ot.strict=new Cb.Chrono(Bf(!0));function dx(r,e,t){return ot.casual.parse(r,e,t)}ot.parse=dx;function fx(r,e,t){return ot.casual.parseDate(r,e,t)}ot.parseDate=fx;function Ab(r=!0){let e=Bf(!1,r);return e.parsers.push(new lx.default),e.parsers.push(new cx.default),e}ot.createCasualConfiguration=Ab;function Bf(r=!0,e=!0){return rx.includeCommonConfiguration({parsers:[new nx.default(e),new ix.default,new sx.default,new ux.default],refiners:[new ax.default,new ox.default]},r)}ot.createConfiguration=Bf});var Nb=k(qa=>{"use strict";var px=qa&&qa.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(qa,"__esModule",{value:!0});var mx=px(Kr()),Hf=class extends mx.default{patternBetween(){return/^\s*(tot|-)\s*$/i}};qa.default=Hf});var Ib=k($a=>{"use strict";var hx=$a&&$a.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty($a,"__esModule",{value:!0});var gx=hx(hn()),Vf=class extends gx.default{patternBetween(){return new RegExp("^\\s*(om|na|voor|in de|,|-)?\\s*$")}};$a.default=Vf});var Fb=k(_n=>{"use strict";var yx=_n&&_n.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),bx=_n&&_n.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Tx=_n&&_n.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&yx(e,r,t);return bx(e,r),e};Object.defineProperty(_n,"__esModule",{value:!0});var _x=H(),Su=Tx(bn()),zf=class extends _x.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(nu|vandaag|morgen|morgend|gisteren)(?=\W|$)/i}innerExtract(e,t){let n=t[0].toLowerCase(),i=e.createParsingComponents();switch(n){case"nu":return Su.now(e.reference);case"vandaag":return Su.today(e.reference);case"morgen":case"morgend":return Su.tomorrow(e.reference);case"gisteren":return Su.yesterday(e.reference)}return i}};_n.default=zf});var Lb=k(ja=>{"use strict";var vx=ja&&ja.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ja,"__esModule",{value:!0});var Ou=Je(),wx=H(),kx=vx(_e()),Ex=cr(),Sx=1,Ox=2,Kf=class extends wx.AbstractParserWithWordBoundaryChecking{innerPattern(){return/(deze)?\s*(namiddag|avond|middernacht|ochtend|middag|'s middags|'s avonds|'s ochtends)(?=\W|$)/i}innerExtract(e,t){let n=kx.default(e.refDate),i=e.createParsingComponents();switch(t[Sx]==="deze"&&(i.assign("day",e.refDate.getDate()),i.assign("month",e.refDate.getMonth()+1),i.assign("year",e.refDate.getFullYear())),t[Ox].toLowerCase()){case"namiddag":case"'s namiddags":i.imply("meridiem",Ou.Meridiem.PM),i.imply("hour",15);break;case"avond":case"'s avonds'":i.imply("meridiem",Ou.Meridiem.PM),i.imply("hour",20);break;case"middernacht":Ex.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"ochtend":case"'s ochtends":i.imply("meridiem",Ou.Meridiem.AM),i.imply("hour",6);break;case"middag":case"'s middags":i.imply("meridiem",Ou.Meridiem.AM),i.imply("hour",12);break}return i}};ja.default=Kf});var Vt=k(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.parseTimeUnits=fe.TIME_UNITS_PATTERN=fe.parseYear=fe.YEAR_PATTERN=fe.parseOrdinalNumberPattern=fe.ORDINAL_NUMBER_PATTERN=fe.parseNumberPattern=fe.NUMBER_PATTERN=fe.TIME_UNIT_DICTIONARY=fe.ORDINAL_WORD_DICTIONARY=fe.INTEGER_WORD_DICTIONARY=fe.MONTH_DICTIONARY=fe.WEEKDAY_DICTIONARY=void 0;var Du=Re(),Dx=pt();fe.WEEKDAY_DICTIONARY={zondag:0,zon:0,"zon.":0,zo:0,"zo.":0,maandag:1,ma:1,"ma.":1,dinsdag:2,din:2,"din.":2,di:2,"di.":2,woensdag:3,woe:3,"woe.":3,wo:3,"wo.":3,donderdag:4,dond:4,"dond.":4,do:4,"do.":4,vrijdag:5,vrij:5,"vrij.":5,vr:5,"vr.":5,zaterdag:6,zat:6,"zat.":6,za:6,"za.":6};fe.MONTH_DICTIONARY={januari:1,jan:1,"jan.":1,februari:2,feb:2,"feb.":2,maart:3,mar:3,"mar.":3,april:4,apr:4,"apr.":4,mei:5,juni:6,jun:6,"jun.":6,juli:7,jul:7,"jul.":7,augustus:8,aug:8,"aug.":8,september:9,sep:9,"sep.":9,sept:9,"sept.":9,oktober:10,okt:10,"okt.":10,november:11,nov:11,"nov.":11,december:12,dec:12,"dec.":12};fe.INTEGER_WORD_DICTIONARY={een:1,twee:2,drie:3,vier:4,vijf:5,zes:6,zeven:7,acht:8,negen:9,tien:10,elf:11,twaalf:12};fe.ORDINAL_WORD_DICTIONARY={eerste:1,tweede:2,derde:3,vierde:4,vijfde:5,zesde:6,zevende:7,achtste:8,negende:9,tiende:10,elfde:11,twaalfde:12,dertiende:13,veertiende:14,vijftiende:15,zestiende:16,zeventiende:17,achttiende:18,negentiende:19,twintigste:20,eenentwintigste:21,twee\u00EBntwintigste:22,drieentwintigste:23,vierentwintigste:24,vijfentwintigste:25,zesentwintigste:26,zevenentwintigste:27,achtentwintig:28,negenentwintig:29,dertigste:30,eenendertigste:31};fe.TIME_UNIT_DICTIONARY={sec:"second",second:"second",seconden:"second",min:"minute",mins:"minute",minute:"minute",minuut:"minute",minuten:"minute",minuutje:"minute",h:"hour",hr:"hour",hrs:"hour",uur:"hour",u:"hour",uren:"hour",dag:"d",dagen:"d",week:"week",weken:"week",maand:"month",maanden:"month",jaar:"year",jr:"year",jaren:"year"};fe.NUMBER_PATTERN=`(?:${Du.matchAnyPattern(fe.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+[\\.,][0-9]+|halve?|half|paar)`;function Wb(r){let e=r.toLowerCase();return fe.INTEGER_WORD_DICTIONARY[e]!==void 0?fe.INTEGER_WORD_DICTIONARY[e]:e==="paar"?2:e==="half"||e.match(/halve?/)?.5:parseFloat(e.replace(",","."))}fe.parseNumberPattern=Wb;fe.ORDINAL_NUMBER_PATTERN=`(?:${Du.matchAnyPattern(fe.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:ste|de)?)`;function xx(r){let e=r.toLowerCase();return fe.ORDINAL_WORD_DICTIONARY[e]!==void 0?fe.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:ste|de)$/i,""),parseInt(e))}fe.parseOrdinalNumberPattern=xx;fe.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s*(?:voor Christus|na Christus)|[1-2][0-9]{3}|[5-9][0-9])";function Rx(r){if(/voor Christus/i.test(r))return r=r.replace(/voor Christus/i,""),-parseInt(r);if(/na Christus/i.test(r))return r=r.replace(/na Christus/i,""),parseInt(r);let e=parseInt(r);return Dx.findMostLikelyADYear(e)}fe.parseYear=Rx;var qb=`(${fe.NUMBER_PATTERN})\\s{0,5}(${Du.matchAnyPattern(fe.TIME_UNIT_DICTIONARY)})\\s{0,5}`,Ub=new RegExp(qb,"i");fe.TIME_UNITS_PATTERN=Du.repeatedTimeunitPattern("(?:(?:binnen|in)\\s*)?",qb);function Mx(r){let e={},t=r,n=Ub.exec(t);for(;n;)Cx(e,n),t=t.substring(n[0].length),n=Ub.exec(t);return e}fe.parseTimeUnits=Mx;function Cx(r,e){let t=Wb(e[1]),n=fe.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var jb=k(Xf=>{"use strict";Object.defineProperty(Xf,"__esModule",{value:!0});var $b=Vt(),Ax=Ue(),Px=H(),Qf=class extends Px.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(?:binnen|in|binnen de|voor)\\s*("+$b.TIME_UNITS_PATTERN+")(?=\\W|$)","i")}innerExtract(e,t){let n=$b.parseTimeUnits(t[1]);return Ax.ParsingComponents.createRelativeFromReference(e.reference,n)}};Xf.default=Qf});var Yb=k(Jf=>{"use strict";Object.defineProperty(Jf,"__esModule",{value:!0});var Gb=Vt(),Nx=Re(),Ix=H(),Fx=vi(),Lx=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:op\\s*?)?(?:(deze|vorige|volgende)\\s*(?:week\\s*)?)?(${Nx.matchAnyPattern(Gb.WEEKDAY_DICTIONARY)})(?=\\W|$)`,"i"),Ux=1,Wx=2,qx=3,Zf=class extends Ix.AbstractParserWithWordBoundaryChecking{innerPattern(){return Lx}innerExtract(e,t){let n=t[Wx].toLowerCase(),i=Gb.WEEKDAY_DICTIONARY[n],s=t[Ux],a=t[qx],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="vorige"?u="last":o=="volgende"?u="next":o=="deze"&&(u="this");let l=Fx.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Jf.default=Zf});var Qb=k(tp=>{"use strict";Object.defineProperty(tp,"__esModule",{value:!0});var $x=pt(),zb=Vt(),xu=Vt(),Kb=Vt(),jx=Re(),Gx=H(),Yx=new RegExp(`(?:on\\s*?)?(${xu.ORDINAL_NUMBER_PATTERN})(?:\\s*(?:tot|\\-|\\\u2013|until|through|till|\\s)\\s*(${xu.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s*(?:of)?\\s*)(`+jx.matchAnyPattern(zb.MONTH_DICTIONARY)+`)(?:(?:-|/|,?\\s*)(${Kb.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),Bx=3,Bb=1,Hb=2,Vb=4,ep=class extends Gx.AbstractParserWithWordBoundaryChecking{innerPattern(){return Yx}innerExtract(e,t){let n=zb.MONTH_DICTIONARY[t[Bx].toLowerCase()],i=xu.parseOrdinalNumberPattern(t[Bb]);if(i>31)return t.index=t.index+t[Bb].length,null;let s=e.createParsingComponents({day:i,month:n});if(t[Vb]){let u=Kb.parseYear(t[Vb]);s.assign("year",u)}else{let u=$x.findYearClosestToRef(e.refDate,i,n);s.imply("year",u)}if(!t[Hb])return s;let a=xu.parseOrdinalNumberPattern(t[Hb]),o=e.createParsingResult(t.index,t[0]);return o.start=s,o.end=s.clone(),o.end.assign("day",a),o}};tp.default=ep});var eT=k(np=>{"use strict";Object.defineProperty(np,"__esModule",{value:!0});var Zb=Vt(),Hx=pt(),Vx=Re(),Jb=Vt(),zx=H(),Kx=new RegExp(`(${Vx.matchAnyPattern(Zb.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${Jb.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),Qx=1,Xb=2,rp=class extends zx.AbstractParserWithWordBoundaryChecking{innerPattern(){return Kx}innerExtract(e,t){let n=e.createParsingComponents();n.imply("day",1);let i=t[Qx],s=Zb.MONTH_DICTIONARY[i.toLowerCase()];if(n.assign("month",s),t[Xb]){let a=Jb.parseYear(t[Xb]);n.assign("year",a)}else{let a=Hx.findYearClosestToRef(e.refDate,1,s);n.imply("year",a)}return n}};np.default=rp});var tT=k(sp=>{"use strict";Object.defineProperty(sp,"__esModule",{value:!0});var Xx=H(),Zx=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),Jx=1,eR=2,ip=class extends Xx.AbstractParserWithWordBoundaryChecking{innerPattern(){return Zx}innerExtract(e,t){let n=parseInt(t[eR]),i=parseInt(t[Jx]);return e.createParsingComponents().imply("day",1).assign("month",i).assign("year",n)}};sp.default=ip});var rT=k(op=>{"use strict";Object.defineProperty(op,"__esModule",{value:!0});var tR=Ti(),ap=class extends tR.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:om)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|om|\\?)\\s*"}primarySuffix(){return"(?:\\s*(?:uur))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};op.default=ap});var sT=k(lp=>{"use strict";Object.defineProperty(lp,"__esModule",{value:!0});var iT=Vt(),rR=Re(),nR=H(),iR=new RegExp(`([0-9]{4})[\\.\\/\\s](?:(${rR.matchAnyPattern(iT.MONTH_DICTIONARY)})|([0-9]{1,2}))[\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),sR=1,aR=2,nT=3,oR=4,up=class extends nR.AbstractParserWithWordBoundaryChecking{innerPattern(){return iR}innerExtract(e,t){let n=t[nT]?parseInt(t[nT]):iT.MONTH_DICTIONARY[t[aR].toLowerCase()];if(n<1||n>12)return null;let i=parseInt(t[sR]);return{day:parseInt(t[oR]),month:n,year:i}}};lp.default=up});var aT=k(Ga=>{"use strict";var uR=Ga&&Ga.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ga,"__esModule",{value:!0});var lR=H(),Ru=Je(),cp=cr(),cR=uR(_e()),dR=1,fR=2,dp=class extends lR.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(gisteren|morgen|van)(ochtend|middag|namiddag|avond|nacht)(?=\W|$)/i}innerExtract(e,t){let n=t[dR].toLowerCase(),i=t[fR].toLowerCase(),s=e.createParsingComponents(),a=cR.default(e.refDate);switch(n){case"gisteren":cp.assignSimilarDate(s,a.add(-1,"day"));break;case"van":cp.assignSimilarDate(s,a);break;case"morgen":cp.assignTheNextDay(s,a);break}switch(i){case"ochtend":s.imply("meridiem",Ru.Meridiem.AM),s.imply("hour",6);break;case"middag":s.imply("meridiem",Ru.Meridiem.AM),s.imply("hour",12);break;case"namiddag":s.imply("meridiem",Ru.Meridiem.PM),s.imply("hour",15);break;case"avond":s.imply("meridiem",Ru.Meridiem.PM),s.imply("hour",20);break}return s}};Ga.default=dp});var uT=k(pp=>{"use strict";Object.defineProperty(pp,"__esModule",{value:!0});var oT=Vt(),pR=Ue(),mR=H(),hR=dr(),gR=new RegExp(`(deze|vorige|afgelopen|komende|over|\\+|-)\\s*(${oT.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),fp=class extends mR.AbstractParserWithWordBoundaryChecking{innerPattern(){return gR}innerExtract(e,t){let n=t[1].toLowerCase(),i=oT.parseTimeUnits(t[2]);switch(n){case"vorige":case"afgelopen":case"-":i=hR.reverseTimeUnits(i);break}return pR.ParsingComponents.createRelativeFromReference(e.reference,i)}};pp.default=fp});var dT=k(Ya=>{"use strict";var yR=Ya&&Ya.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ya,"__esModule",{value:!0});var cT=Vt(),lT=Ue(),bR=yR(_e()),TR=H(),_R=Re(),vR=new RegExp(`(dit|deze|komende|volgend|volgende|afgelopen|vorige)\\s*(${_R.matchAnyPattern(cT.TIME_UNIT_DICTIONARY)})(?=\\s*)(?=\\W|$)`,"i"),wR=1,kR=2,mp=class extends TR.AbstractParserWithWordBoundaryChecking{innerPattern(){return vR}innerExtract(e,t){let n=t[wR].toLowerCase(),i=t[kR].toLowerCase(),s=cT.TIME_UNIT_DICTIONARY[i];if(n=="volgend"||n=="volgende"||n=="komende"){let u={};return u[s]=1,lT.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="afgelopen"||n=="vorige"){let u={};return u[s]=-1,lT.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=bR.default(e.reference.instant);return i.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):i.match(/maand/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):i.match(/jaar/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};Ya.default=mp});var fT=k(yp=>{"use strict";Object.defineProperty(yp,"__esModule",{value:!0});var gp=Vt(),ER=Ue(),SR=H(),OR=dr(),DR=new RegExp("("+gp.TIME_UNITS_PATTERN+")(?:geleden|voor|eerder)(?=(?:\\W|$))","i"),xR=new RegExp("("+gp.TIME_UNITS_PATTERN+")geleden(?=(?:\\W|$))","i"),hp=class extends SR.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?xR:DR}innerExtract(e,t){let n=gp.parseTimeUnits(t[1]),i=OR.reverseTimeUnits(n);return ER.ParsingComponents.createRelativeFromReference(e.reference,i)}};yp.default=hp});var pT=k(_p=>{"use strict";Object.defineProperty(_p,"__esModule",{value:!0});var Tp=Vt(),RR=Ue(),MR=H(),CR=new RegExp("("+Tp.TIME_UNITS_PATTERN+")(later|na|vanaf nu|voortaan|vooruit|uit)(?=(?:\\W|$))","i"),AR=new RegExp("("+Tp.TIME_UNITS_PATTERN+")(later|vanaf nu)(?=(?:\\W|$))","i"),PR=1,bp=class extends MR.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?AR:CR}innerExtract(e,t){let n=Tp.parseTimeUnits(t[PR]);return RR.ParsingComponents.createRelativeFromReference(e.reference,n)}};_p.default=bp});var yT=k(ut=>{"use strict";var ht=ut&&ut.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ut,"__esModule",{value:!0});ut.createConfiguration=ut.createCasualConfiguration=ut.parseDate=ut.parse=ut.strict=ut.casual=void 0;var NR=gn(),mT=xr(),IR=ht(Nb()),FR=ht(Ib()),LR=ht(Fb()),UR=ht(Lb()),WR=ht(wi()),qR=ht(jb()),$R=ht(Yb()),jR=ht(Qb()),hT=ht(eT()),GR=ht(tT()),YR=ht(rT()),BR=ht(sT()),HR=ht(aT()),VR=ht(uT()),zR=ht(dT()),KR=ht(fT()),QR=ht(pT());ut.casual=new mT.Chrono(gT());ut.strict=new mT.Chrono(vp(!0));function XR(r,e,t){return ut.casual.parse(r,e,t)}ut.parse=XR;function ZR(r,e,t){return ut.casual.parseDate(r,e,t)}ut.parseDate=ZR;function gT(r=!0){let e=vp(!1,r);return e.parsers.unshift(new LR.default),e.parsers.unshift(new UR.default),e.parsers.unshift(new HR.default),e.parsers.unshift(new hT.default),e.parsers.unshift(new zR.default),e.parsers.unshift(new VR.default),e}ut.createCasualConfiguration=gT;function vp(r=!0,e=!0){return NR.includeCommonConfiguration({parsers:[new WR.default(e),new qR.default,new jR.default,new hT.default,new $R.default,new BR.default,new GR.default,new YR.default(r),new KR.default(r),new QR.default(r)],refiners:[new FR.default,new IR.default]},r)}ut.createConfiguration=vp});var vT=k(Ba=>{"use strict";var JR=Ba&&Ba.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ba,"__esModule",{value:!0});var eM=JR(_e()),tM=H(),rM=1,bT=2,nM=3,TT=4,_T=5,iM=6,wp=class extends tM.AbstractParserWithWordBoundaryChecking{innerPattern(e){return new RegExp("(\u800C\u5BB6|\u7ACB(?:\u523B|\u5373)|\u5373\u523B)|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s|,|\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?","i")}innerExtract(e,t){let n=t.index,i=e.createParsingResult(n,t[0]),s=eM.default(e.refDate),a=s;if(t[rM])i.start.imply("hour",s.hour()),i.start.imply("minute",s.minute()),i.start.imply("second",s.second()),i.start.imply("millisecond",s.millisecond());else if(t[bT]){let o=t[bT],u=t[nM];o=="\u660E"||o=="\u807D"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u5F8C"?a=a.add(2,"day"):o=="\u5927\u5F8C"&&(a=a.add(3,"day")),u=="\u65E9"||u=="\u671D"?i.start.imply("hour",6):u=="\u665A"&&(i.start.imply("hour",22),i.start.imply("meridiem",1))}else if(t[TT]){let u=t[TT][0];u=="\u65E9"||u=="\u671D"||u=="\u4E0A"?i.start.imply("hour",6):u=="\u4E0B"||u=="\u664F"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):u=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):u=="\u591C"||u=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):u=="\u51CC"&&i.start.imply("hour",0)}else if(t[_T]){let o=t[_T];o=="\u660E"||o=="\u807D"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u5F8C"?a=a.add(2,"day"):o=="\u5927\u5F8C"&&(a=a.add(3,"day"));let u=t[iM];if(u){let l=u[0];l=="\u65E9"||l=="\u671D"||l=="\u4E0A"?i.start.imply("hour",6):l=="\u4E0B"||l=="\u664F"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):l=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):l=="\u591C"||l=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):l=="\u51CC"&&i.start.imply("hour",0)}}return i.start.assign("day",a.date()),i.start.assign("month",a.month()+1),i.start.assign("year",a.year()),i}};Ba.default=wp});var gs=k(Ft=>{"use strict";Object.defineProperty(Ft,"__esModule",{value:!0});Ft.zhStringToYear=Ft.zhStringToNumber=Ft.WEEKDAY_OFFSET=Ft.NUMBER=void 0;Ft.NUMBER={\u96F6:0,\u4E00:1,\u4E8C:2,\u5169:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6,\u4E03:7,\u516B:8,\u4E5D:9,\u5341:10,\u5EFF:20,\u5345:30};Ft.WEEKDAY_OFFSET={\u5929:0,\u65E5:0,\u4E00:1,\u4E8C:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6};function sM(r){let e=0;for(let t=0;t<r.length;t++){let n=r[t];n==="\u5341"?e=e===0?Ft.NUMBER[n]:e*Ft.NUMBER[n]:e+=Ft.NUMBER[n]}return e}Ft.zhStringToNumber=sM;function aM(r){let e="";for(let t=0;t<r.length;t++){let n=r[t];e=e+Ft.NUMBER[n]}return parseInt(e)}Ft.zhStringToYear=aM});var kT=k(Ha=>{"use strict";var oM=Ha&&Ha.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ha,"__esModule",{value:!0});var uM=oM(_e()),lM=H(),Si=gs(),kp=1,wT=2,Ep=3,Sp=class extends lM.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(\\d{2,4}|["+Object.keys(Si.NUMBER).join("")+"]{4}|["+Object.keys(Si.NUMBER).join("")+"]{2})?(?:\\s*)(?:\u5E74)?(?:[\\s|,|\uFF0C]*)(\\d{1,2}|["+Object.keys(Si.NUMBER).join("")+"]{1,2})(?:\\s*)(?:\u6708)(?:\\s*)(\\d{1,2}|["+Object.keys(Si.NUMBER).join("")+"]{1,2})?(?:\\s*)(?:\u65E5|\u865F)?")}innerExtract(e,t){let n=uM.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=parseInt(t[wT]);if(isNaN(s)&&(s=Si.zhStringToNumber(t[wT])),i.start.assign("month",s),t[Ep]){let a=parseInt(t[Ep]);isNaN(a)&&(a=Si.zhStringToNumber(t[Ep])),i.start.assign("day",a)}else i.start.imply("day",n.date());if(t[kp]){let a=parseInt(t[kp]);isNaN(a)&&(a=Si.zhStringToYear(t[kp])),i.start.assign("year",a)}else i.start.imply("year",n.year());return i}};Ha.default=Sp});var ST=k(Va=>{"use strict";var cM=Va&&Va.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Va,"__esModule",{value:!0});var dM=cM(_e()),fM=H(),ET=gs(),pM=new RegExp("(\\d+|["+Object.keys(ET.NUMBER).join("")+"]+|\u534A|\u5E7E)(?:\\s*)(?:\u500B)?(\u79D2(?:\u9418)?|\u5206\u9418|\u5C0F\u6642|\u9418|\u65E5|\u5929|\u661F\u671F|\u79AE\u62DC|\u6708|\u5E74)(?:(?:\u4E4B|\u904E)?\u5F8C|(?:\u4E4B)?\u5167)","i"),Op=1,mM=2,Dp=class extends fM.AbstractParserWithWordBoundaryChecking{innerPattern(){return pM}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=parseInt(t[Op]);if(isNaN(i)&&(i=ET.zhStringToNumber(t[Op])),isNaN(i)){let u=t[Op];if(u==="\u5E7E")i=3;else if(u==="\u534A")i=.5;else return null}let s=dM.default(e.refDate),o=t[mM][0];return o.match(/[日天星禮月年]/)?(o=="\u65E5"||o=="\u5929"?s=s.add(i,"d"):o=="\u661F"||o=="\u79AE"?s=s.add(i*7,"d"):o=="\u6708"?s=s.add(i,"month"):o=="\u5E74"&&(s=s.add(i,"year")),n.start.assign("year",s.year()),n.start.assign("month",s.month()+1),n.start.assign("day",s.date()),n):(o=="\u79D2"?s=s.add(i,"second"):o=="\u5206"?s=s.add(i,"minute"):(o=="\u5C0F"||o=="\u9418")&&(s=s.add(i,"hour")),n.start.imply("year",s.year()),n.start.imply("month",s.month()+1),n.start.imply("day",s.date()),n.start.assign("hour",s.hour()),n.start.assign("minute",s.minute()),n.start.assign("second",s.second()),n)}};Va.default=Dp});var DT=k(za=>{"use strict";var hM=za&&za.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(za,"__esModule",{value:!0});var gM=hM(_e()),yM=H(),OT=gs(),bM=new RegExp("(?<prefix>\u4E0A|\u4ECA|\u4E0B|\u9019|\u5462)(?:\u500B)?(?:\u661F\u671F|\u79AE\u62DC|\u9031)(?<weekday>"+Object.keys(OT.WEEKDAY_OFFSET).join("|")+")"),xp=class extends yM.AbstractParserWithWordBoundaryChecking{innerPattern(){return bM}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=OT.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=null,o=t.groups.prefix;o=="\u4E0A"?a="last":o=="\u4E0B"?a="next":(o=="\u4ECA"||o=="\u9019"||o=="\u5462")&&(a="this");let u=gM.default(e.refDate),l=!1,c=u.day();return a=="last"||a=="past"?(u=u.day(s-7),l=!0):a=="next"?(u=u.day(s+7),l=!0):a=="this"?u=u.day(s):Math.abs(s-7-c)<Math.abs(s-c)?u=u.day(s-7):Math.abs(s+7-c)<Math.abs(s-c)?u=u.day(s+7):u=u.day(s),n.start.assign("weekday",s),l?(n.start.assign("day",u.date()),n.start.assign("month",u.month()+1),n.start.assign("year",u.year())):(n.start.imply("day",u.date()),n.start.imply("month",u.month()+1),n.start.imply("year",u.year())),n}};za.default=xp});var xT=k(Ka=>{"use strict";var TM=Ka&&Ka.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ka,"__esModule",{value:!0});var _M=TM(_e()),vM=H(),mr=gs(),wM=new RegExp("(?:\u7531|\u5F9E|\u81EA)?(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(mr.NUMBER).join("")+"]+)(?:\\s*)(?:\u9EDE|\u6642|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(mr.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(mr.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),kM=new RegExp("(?:^\\s*(?:\u5230|\u81F3|\\-|\\\u2013|\\~|\\\u301C)\\s*)(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(mr.NUMBER).join("")+"]+)(?:\\s*)(?:\u9EDE|\u6642|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(mr.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(mr.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),Mu=1,Cu=2,Au=3,Pu=4,Nu=5,Iu=6,pr=7,ys=8,Fu=9,Rp=class extends vM.AbstractParserWithWordBoundaryChecking{innerPattern(){return wM}innerExtract(e,t){if(t.index>0&&e.text[t.index-1].match(/\w/))return null;let n=_M.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=n.clone();if(t[Mu]){var a=t[Mu];a=="\u660E"||a=="\u807D"?n.hour()>1&&s.add(1,"day"):a=="\u6628"||a=="\u5C0B"||a=="\u7434"?s.add(-1,"day"):a=="\u524D"?s.add(-2,"day"):a=="\u5927\u524D"?s.add(-3,"day"):a=="\u5F8C"?s.add(2,"day"):a=="\u5927\u5F8C"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else if(t[Pu]){var o=t[Pu];o=="\u660E"||o=="\u807D"?s.add(1,"day"):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?s.add(-1,"day"):o=="\u524D"?s.add(-2,"day"):o=="\u5927\u524D"?s.add(-3,"day"):o=="\u5F8C"?s.add(2,"day"):o=="\u5927\u5F8C"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else i.start.imply("day",s.date()),i.start.imply("month",s.month()+1),i.start.imply("year",s.year());let u=0,l=0,c=-1;if(t[ys]){var d=parseInt(t[ys]);if(isNaN(d)&&(d=mr.zhStringToNumber(t[ys])),d>=60)return null;i.start.assign("second",d)}if(u=parseInt(t[Iu]),isNaN(u)&&(u=mr.zhStringToNumber(t[Iu])),t[pr]?t[pr]=="\u534A"?l=30:t[pr]=="\u6B63"||t[pr]=="\u6574"?l=0:(l=parseInt(t[pr]),isNaN(l)&&(l=mr.zhStringToNumber(t[pr]))):u>100&&(l=u%100,u=Math.floor(u/100)),l>=60||u>24)return null;if(u>=12&&(c=1),t[Fu]){if(u>12)return null;var p=t[Fu][0].toLowerCase();p=="a"&&(c=0,u==12&&(u=0)),p=="p"&&(c=1,u!=12&&(u+=12))}else if(t[Cu]){var m=t[Cu],g=m[0];g=="\u671D"||g=="\u65E9"?(c=0,u==12&&(u=0)):g=="\u665A"&&(c=1,u!=12&&(u+=12))}else if(t[Au]){var b=t[Au],S=b[0];S=="\u4E0A"||S=="\u671D"||S=="\u65E9"||S=="\u51CC"?(c=0,u==12&&(u=0)):(S=="\u4E0B"||S=="\u664F"||S=="\u665A")&&(c=1,u!=12&&(u+=12))}else if(t[Nu]){var E=t[Nu],_=E[0];_=="\u4E0A"||_=="\u671D"||_=="\u65E9"||_=="\u51CC"?(c=0,u==12&&(u=0)):(_=="\u4E0B"||_=="\u664F"||_=="\u665A")&&(c=1,u!=12&&(u+=12))}if(i.start.assign("hour",u),i.start.assign("minute",l),c>=0?i.start.assign("meridiem",c):u<12?i.start.imply("meridiem",0):i.start.imply("meridiem",1),t=kM.exec(e.text.substring(i.index+i.text.length)),!t)return i.text.match(/^\d+$/)?null:i;let R=s.clone();if(i.end=e.createParsingComponents(),t[Mu]){var a=t[Mu];a=="\u660E"||a=="\u807D"?n.hour()>1&&R.add(1,"day"):a=="\u6628"||a=="\u5C0B"||a=="\u7434"?R.add(-1,"day"):a=="\u524D"?R.add(-2,"day"):a=="\u5927\u524D"?R.add(-3,"day"):a=="\u5F8C"?R.add(2,"day"):a=="\u5927\u5F8C"&&R.add(3,"day"),i.end.assign("day",R.date()),i.end.assign("month",R.month()+1),i.end.assign("year",R.year())}else if(t[Pu]){var o=t[Pu];o=="\u660E"||o=="\u807D"?R.add(1,"day"):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?R.add(-1,"day"):o=="\u524D"?R.add(-2,"day"):o=="\u5927\u524D"?R.add(-3,"day"):o=="\u5F8C"?R.add(2,"day"):o=="\u5927\u5F8C"&&R.add(3,"day"),i.end.assign("day",R.date()),i.end.assign("month",R.month()+1),i.end.assign("year",R.year())}else i.end.imply("day",R.date()),i.end.imply("month",R.month()+1),i.end.imply("year",R.year());if(u=0,l=0,c=-1,t[ys]){var d=parseInt(t[ys]);if(isNaN(d)&&(d=mr.zhStringToNumber(t[ys])),d>=60)return null;i.end.assign("second",d)}if(u=parseInt(t[Iu]),isNaN(u)&&(u=mr.zhStringToNumber(t[Iu])),t[pr]?t[pr]=="\u534A"?l=30:t[pr]=="\u6B63"||t[pr]=="\u6574"?l=0:(l=parseInt(t[pr]),isNaN(l)&&(l=mr.zhStringToNumber(t[pr]))):u>100&&(l=u%100,u=Math.floor(u/100)),l>=60||u>24)return null;if(u>=12&&(c=1),t[Fu]){if(u>12)return null;var p=t[Fu][0].toLowerCase();p=="a"&&(c=0,u==12&&(u=0)),p=="p"&&(c=1,u!=12&&(u+=12)),i.start.isCertain("meridiem")||(c==0?(i.start.imply("meridiem",0),i.start.get("hour")==12&&i.start.assign("hour",0)):(i.start.imply("meridiem",1),i.start.get("hour")!=12&&i.start.assign("hour",i.start.get("hour")+12)))}else if(t[Cu]){var m=t[Cu],g=m[0];g=="\u671D"||g=="\u65E9"?(c=0,u==12&&(u=0)):g=="\u665A"&&(c=1,u!=12&&(u+=12))}else if(t[Au]){var b=t[Au],S=b[0];S=="\u4E0A"||S=="\u671D"||S=="\u65E9"||S=="\u51CC"?(c=0,u==12&&(u=0)):(S=="\u4E0B"||S=="\u664F"||S=="\u665A")&&(c=1,u!=12&&(u+=12))}else if(t[Nu]){var E=t[Nu],_=E[0];_=="\u4E0A"||_=="\u671D"||_=="\u65E9"||_=="\u51CC"?(c=0,u==12&&(u=0)):(_=="\u4E0B"||_=="\u664F"||_=="\u665A")&&(c=1,u!=12&&(u+=12))}return i.text=i.text+t[0],i.end.assign("hour",u),i.end.assign("minute",l),c>=0?i.end.assign("meridiem",c):i.start.isCertain("meridiem")&&i.start.get("meridiem")==1&&i.start.get("hour")>u?i.end.imply("meridiem",0):u>12&&i.end.imply("meridiem",1),i.end.date().getTime()<i.start.date().getTime()&&i.end.imply("day",i.end.get("day")+1),i}};Ka.default=Rp});var MT=k(Qa=>{"use strict";var EM=Qa&&Qa.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Qa,"__esModule",{value:!0});var SM=EM(_e()),OM=H(),RT=gs(),DM=new RegExp("(?:\u661F\u671F|\u79AE\u62DC|\u9031)(?<weekday>"+Object.keys(RT.WEEKDAY_OFFSET).join("|")+")"),Mp=class extends OM.AbstractParserWithWordBoundaryChecking{innerPattern(){return DM}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=RT.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=SM.default(e.refDate),o=!1,u=a.day();return Math.abs(s-7-u)<Math.abs(s-u)?a=a.day(s-7):Math.abs(s+7-u)<Math.abs(s-u)?a=a.day(s+7):a=a.day(s),n.start.assign("weekday",s),o?(n.start.assign("day",a.date()),n.start.assign("month",a.month()+1),n.start.assign("year",a.year())):(n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())),n}};Qa.default=Mp});var CT=k(Xa=>{"use strict";var xM=Xa&&Xa.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Xa,"__esModule",{value:!0});var RM=xM(Kr()),Cp=class extends RM.default{patternBetween(){return/^\s*(至|到|\-|\~|～|－|ー)\s*$/i}};Xa.default=Cp});var AT=k(Za=>{"use strict";var MM=Za&&Za.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Za,"__esModule",{value:!0});var CM=MM(hn()),Ap=class extends CM.default{patternBetween(){return/^\s*$/i}};Za.default=Ap});var PT=k(Ve=>{"use strict";var vn=Ve&&Ve.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ve,"__esModule",{value:!0});Ve.createConfiguration=Ve.createCasualConfiguration=Ve.parseDate=Ve.parse=Ve.strict=Ve.casual=Ve.hant=void 0;var Pp=xr(),AM=vn(fu()),PM=gn(),NM=vn(vT()),IM=vn(kT()),FM=vn(ST()),LM=vn(DT()),UM=vn(xT()),WM=vn(MT()),qM=vn(CT()),$M=vn(AT());Ve.hant=new Pp.Chrono(Np());Ve.casual=new Pp.Chrono(Np());Ve.strict=new Pp.Chrono(Ip());function jM(r,e,t){return Ve.casual.parse(r,e,t)}Ve.parse=jM;function GM(r,e,t){return Ve.casual.parseDate(r,e,t)}Ve.parseDate=GM;function Np(){let r=Ip();return r.parsers.unshift(new NM.default),r}Ve.createCasualConfiguration=Np;function Ip(){let r=PM.includeCommonConfiguration({parsers:[new IM.default,new LM.default,new WM.default,new UM.default,new FM.default],refiners:[new qM.default,new $M.default]});return r.refiners=r.refiners.filter(e=>!(e instanceof AM.default)),r}Ve.createConfiguration=Ip});var LT=k(Ja=>{"use strict";var YM=Ja&&Ja.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ja,"__esModule",{value:!0});var BM=YM(_e()),HM=H(),VM=1,NT=2,zM=3,IT=4,FT=5,KM=6,Fp=class extends HM.AbstractParserWithWordBoundaryChecking{innerPattern(e){return new RegExp("(\u73B0\u5728|\u7ACB(?:\u523B|\u5373)|\u5373\u523B)|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s|,|\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?","i")}innerExtract(e,t){let n=t.index,i=e.createParsingResult(n,t[0]),s=BM.default(e.refDate),a=s;if(t[VM])i.start.imply("hour",s.hour()),i.start.imply("minute",s.minute()),i.start.imply("second",s.second()),i.start.imply("millisecond",s.millisecond());else if(t[NT]){let o=t[NT],u=t[zM];o=="\u660E"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u540E"?a=a.add(2,"day"):o=="\u5927\u540E"&&(a=a.add(3,"day")),u=="\u65E9"?i.start.imply("hour",6):u=="\u665A"&&(i.start.imply("hour",22),i.start.imply("meridiem",1))}else if(t[IT]){let u=t[IT][0];u=="\u65E9"||u=="\u4E0A"?i.start.imply("hour",6):u=="\u4E0B"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):u=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):u=="\u591C"||u=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):u=="\u51CC"&&i.start.imply("hour",0)}else if(t[FT]){let o=t[FT];o=="\u660E"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u540E"?a=a.add(2,"day"):o=="\u5927\u540E"&&(a=a.add(3,"day"));let u=t[KM];if(u){let l=u[0];l=="\u65E9"||l=="\u4E0A"?i.start.imply("hour",6):l=="\u4E0B"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):l=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):l=="\u591C"||l=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):l=="\u51CC"&&i.start.imply("hour",0)}}return i.start.assign("day",a.date()),i.start.assign("month",a.month()+1),i.start.assign("year",a.year()),i}};Ja.default=Fp});var bs=k(Lt=>{"use strict";Object.defineProperty(Lt,"__esModule",{value:!0});Lt.zhStringToYear=Lt.zhStringToNumber=Lt.WEEKDAY_OFFSET=Lt.NUMBER=void 0;Lt.NUMBER={\u96F6:0,"\u3007":0,\u4E00:1,\u4E8C:2,\u4E24:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6,\u4E03:7,\u516B:8,\u4E5D:9,\u5341:10};Lt.WEEKDAY_OFFSET={\u5929:0,\u65E5:0,\u4E00:1,\u4E8C:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6};function QM(r){let e=0;for(let t=0;t<r.length;t++){let n=r[t];n==="\u5341"?e=e===0?Lt.NUMBER[n]:e*Lt.NUMBER[n]:e+=Lt.NUMBER[n]}return e}Lt.zhStringToNumber=QM;function XM(r){let e="";for(let t=0;t<r.length;t++){let n=r[t];e=e+Lt.NUMBER[n]}return parseInt(e)}Lt.zhStringToYear=XM});var WT=k(eo=>{"use strict";var ZM=eo&&eo.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(eo,"__esModule",{value:!0});var JM=ZM(_e()),eC=H(),Oi=bs(),Lp=1,UT=2,Up=3,Wp=class extends eC.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(\\d{2,4}|["+Object.keys(Oi.NUMBER).join("")+"]{4}|["+Object.keys(Oi.NUMBER).join("")+"]{2})?(?:\\s*)(?:\u5E74)?(?:[\\s|,|\uFF0C]*)(\\d{1,2}|["+Object.keys(Oi.NUMBER).join("")+"]{1,3})(?:\\s*)(?:\u6708)(?:\\s*)(\\d{1,2}|["+Object.keys(Oi.NUMBER).join("")+"]{1,3})?(?:\\s*)(?:\u65E5|\u53F7)?")}innerExtract(e,t){let n=JM.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=parseInt(t[UT]);if(isNaN(s)&&(s=Oi.zhStringToNumber(t[UT])),i.start.assign("month",s),t[Up]){let a=parseInt(t[Up]);isNaN(a)&&(a=Oi.zhStringToNumber(t[Up])),i.start.assign("day",a)}else i.start.imply("day",n.date());if(t[Lp]){let a=parseInt(t[Lp]);isNaN(a)&&(a=Oi.zhStringToYear(t[Lp])),i.start.assign("year",a)}else i.start.imply("year",n.year());return i}};eo.default=Wp});var $T=k(to=>{"use strict";var tC=to&&to.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(to,"__esModule",{value:!0});var rC=tC(_e()),nC=H(),qT=bs(),iC=new RegExp("(\\d+|["+Object.keys(qT.NUMBER).join("")+"]+|\u534A|\u51E0)(?:\\s*)(?:\u4E2A)?(\u79D2(?:\u949F)?|\u5206\u949F|\u5C0F\u65F6|\u949F|\u65E5|\u5929|\u661F\u671F|\u793C\u62DC|\u6708|\u5E74)(?:(?:\u4E4B|\u8FC7)?\u540E|(?:\u4E4B)?\u5185)","i"),qp=1,sC=2,$p=class extends nC.AbstractParserWithWordBoundaryChecking{innerPattern(){return iC}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=parseInt(t[qp]);if(isNaN(i)&&(i=qT.zhStringToNumber(t[qp])),isNaN(i)){let u=t[qp];if(u==="\u51E0")i=3;else if(u==="\u534A")i=.5;else return null}let s=rC.default(e.refDate),o=t[sC][0];return o.match(/[日天星礼月年]/)?(o=="\u65E5"||o=="\u5929"?s=s.add(i,"d"):o=="\u661F"||o=="\u793C"?s=s.add(i*7,"d"):o=="\u6708"?s=s.add(i,"month"):o=="\u5E74"&&(s=s.add(i,"year")),n.start.assign("year",s.year()),n.start.assign("month",s.month()+1),n.start.assign("day",s.date()),n):(o=="\u79D2"?s=s.add(i,"second"):o=="\u5206"?s=s.add(i,"minute"):(o=="\u5C0F"||o=="\u949F")&&(s=s.add(i,"hour")),n.start.imply("year",s.year()),n.start.imply("month",s.month()+1),n.start.imply("day",s.date()),n.start.assign("hour",s.hour()),n.start.assign("minute",s.minute()),n.start.assign("second",s.second()),n)}};to.default=$p});var GT=k(ro=>{"use strict";var aC=ro&&ro.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ro,"__esModule",{value:!0});var oC=aC(_e()),uC=H(),jT=bs(),lC=new RegExp("(?<prefix>\u4E0A|\u4E0B|\u8FD9)(?:\u4E2A)?(?:\u661F\u671F|\u793C\u62DC|\u5468)(?<weekday>"+Object.keys(jT.WEEKDAY_OFFSET).join("|")+")"),jp=class extends uC.AbstractParserWithWordBoundaryChecking{innerPattern(){return lC}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=jT.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=null,o=t.groups.prefix;o=="\u4E0A"?a="last":o=="\u4E0B"?a="next":o=="\u8FD9"&&(a="this");let u=oC.default(e.refDate),l=!1,c=u.day();return a=="last"||a=="past"?(u=u.day(s-7),l=!0):a=="next"?(u=u.day(s+7),l=!0):a=="this"?u=u.day(s):Math.abs(s-7-c)<Math.abs(s-c)?u=u.day(s-7):Math.abs(s+7-c)<Math.abs(s-c)?u=u.day(s+7):u=u.day(s),n.start.assign("weekday",s),l?(n.start.assign("day",u.date()),n.start.assign("month",u.month()+1),n.start.assign("year",u.year())):(n.start.imply("day",u.date()),n.start.imply("month",u.month()+1),n.start.imply("year",u.year())),n}};ro.default=jp});var YT=k(no=>{"use strict";var cC=no&&no.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(no,"__esModule",{value:!0});var dC=cC(_e()),fC=H(),gr=bs(),pC=new RegExp("(?:\u4ECE|\u81EA)?(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(gr.NUMBER).join("")+"]+)(?:\\s*)(?:\u70B9|\u65F6|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(gr.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(gr.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),mC=new RegExp("(?:^\\s*(?:\u5230|\u81F3|\\-|\\\u2013|\\~|\\\u301C)\\s*)(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(gr.NUMBER).join("")+"]+)(?:\\s*)(?:\u70B9|\u65F6|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(gr.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(gr.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),Lu=1,Uu=2,Wu=3,qu=4,$u=5,ju=6,hr=7,Ts=8,Gu=9,Gp=class extends fC.AbstractParserWithWordBoundaryChecking{innerPattern(){return pC}innerExtract(e,t){if(t.index>0&&e.text[t.index-1].match(/\w/))return null;let n=dC.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=n.clone();if(t[Lu]){let c=t[Lu];c=="\u660E"?n.hour()>1&&s.add(1,"day"):c=="\u6628"?s.add(-1,"day"):c=="\u524D"?s.add(-2,"day"):c=="\u5927\u524D"?s.add(-3,"day"):c=="\u540E"?s.add(2,"day"):c=="\u5927\u540E"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else if(t[qu]){let c=t[qu];c=="\u660E"?s.add(1,"day"):c=="\u6628"?s.add(-1,"day"):c=="\u524D"?s.add(-2,"day"):c=="\u5927\u524D"?s.add(-3,"day"):c=="\u540E"?s.add(2,"day"):c=="\u5927\u540E"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else i.start.imply("day",s.date()),i.start.imply("month",s.month()+1),i.start.imply("year",s.year());let a=0,o=0,u=-1;if(t[Ts]){let c=parseInt(t[Ts]);if(isNaN(c)&&(c=gr.zhStringToNumber(t[Ts])),c>=60)return null;i.start.assign("second",c)}if(a=parseInt(t[ju]),isNaN(a)&&(a=gr.zhStringToNumber(t[ju])),t[hr]?t[hr]=="\u534A"?o=30:t[hr]=="\u6B63"||t[hr]=="\u6574"?o=0:(o=parseInt(t[hr]),isNaN(o)&&(o=gr.zhStringToNumber(t[hr]))):a>100&&(o=a%100,a=Math.floor(a/100)),o>=60||a>24)return null;if(a>=12&&(u=1),t[Gu]){if(a>12)return null;let c=t[Gu][0].toLowerCase();c=="a"&&(u=0,a==12&&(a=0)),c=="p"&&(u=1,a!=12&&(a+=12))}else if(t[Uu]){let d=t[Uu][0];d=="\u65E9"?(u=0,a==12&&(a=0)):d=="\u665A"&&(u=1,a!=12&&(a+=12))}else if(t[Wu]){let d=t[Wu][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}else if(t[$u]){let d=t[$u][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}if(i.start.assign("hour",a),i.start.assign("minute",o),u>=0?i.start.assign("meridiem",u):a<12?i.start.imply("meridiem",0):i.start.imply("meridiem",1),t=mC.exec(e.text.substring(i.index+i.text.length)),!t)return i.text.match(/^\d+$/)?null:i;let l=s.clone();if(i.end=e.createParsingComponents(),t[Lu]){let c=t[Lu];c=="\u660E"?n.hour()>1&&l.add(1,"day"):c=="\u6628"?l.add(-1,"day"):c=="\u524D"?l.add(-2,"day"):c=="\u5927\u524D"?l.add(-3,"day"):c=="\u540E"?l.add(2,"day"):c=="\u5927\u540E"&&l.add(3,"day"),i.end.assign("day",l.date()),i.end.assign("month",l.month()+1),i.end.assign("year",l.year())}else if(t[qu]){let c=t[qu];c=="\u660E"?l.add(1,"day"):c=="\u6628"?l.add(-1,"day"):c=="\u524D"?l.add(-2,"day"):c=="\u5927\u524D"?l.add(-3,"day"):c=="\u540E"?l.add(2,"day"):c=="\u5927\u540E"&&l.add(3,"day"),i.end.assign("day",l.date()),i.end.assign("month",l.month()+1),i.end.assign("year",l.year())}else i.end.imply("day",l.date()),i.end.imply("month",l.month()+1),i.end.imply("year",l.year());if(a=0,o=0,u=-1,t[Ts]){let c=parseInt(t[Ts]);if(isNaN(c)&&(c=gr.zhStringToNumber(t[Ts])),c>=60)return null;i.end.assign("second",c)}if(a=parseInt(t[ju]),isNaN(a)&&(a=gr.zhStringToNumber(t[ju])),t[hr]?t[hr]=="\u534A"?o=30:t[hr]=="\u6B63"||t[hr]=="\u6574"?o=0:(o=parseInt(t[hr]),isNaN(o)&&(o=gr.zhStringToNumber(t[hr]))):a>100&&(o=a%100,a=Math.floor(a/100)),o>=60||a>24)return null;if(a>=12&&(u=1),t[Gu]){if(a>12)return null;let c=t[Gu][0].toLowerCase();c=="a"&&(u=0,a==12&&(a=0)),c=="p"&&(u=1,a!=12&&(a+=12)),i.start.isCertain("meridiem")||(u==0?(i.start.imply("meridiem",0),i.start.get("hour")==12&&i.start.assign("hour",0)):(i.start.imply("meridiem",1),i.start.get("hour")!=12&&i.start.assign("hour",i.start.get("hour")+12)))}else if(t[Uu]){let d=t[Uu][0];d=="\u65E9"?(u=0,a==12&&(a=0)):d=="\u665A"&&(u=1,a!=12&&(a+=12))}else if(t[Wu]){let d=t[Wu][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}else if(t[$u]){let d=t[$u][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}return i.text=i.text+t[0],i.end.assign("hour",a),i.end.assign("minute",o),u>=0?i.end.assign("meridiem",u):i.start.isCertain("meridiem")&&i.start.get("meridiem")==1&&i.start.get("hour")>a?i.end.imply("meridiem",0):a>12&&i.end.imply("meridiem",1),i.end.date().getTime()<i.start.date().getTime()&&i.end.imply("day",i.end.get("day")+1),i}};no.default=Gp});var HT=k(io=>{"use strict";var hC=io&&io.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(io,"__esModule",{value:!0});var gC=hC(_e()),yC=H(),BT=bs(),bC=new RegExp("(?:\u661F\u671F|\u793C\u62DC|\u5468)(?<weekday>"+Object.keys(BT.WEEKDAY_OFFSET).join("|")+")"),Yp=class extends yC.AbstractParserWithWordBoundaryChecking{innerPattern(){return bC}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=BT.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=gC.default(e.refDate),o=!1,u=a.day();return Math.abs(s-7-u)<Math.abs(s-u)?a=a.day(s-7):Math.abs(s+7-u)<Math.abs(s-u)?a=a.day(s+7):a=a.day(s),n.start.assign("weekday",s),o?(n.start.assign("day",a.date()),n.start.assign("month",a.month()+1),n.start.assign("year",a.year())):(n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())),n}};io.default=Yp});var VT=k(so=>{"use strict";var TC=so&&so.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(so,"__esModule",{value:!0});var _C=TC(Kr()),Bp=class extends _C.default{patternBetween(){return/^\s*(至|到|-|~|～|－|ー)\s*$/i}};so.default=Bp});var zT=k(ao=>{"use strict";var vC=ao&&ao.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ao,"__esModule",{value:!0});var wC=vC(hn()),Hp=class extends wC.default{patternBetween(){return/^\s*$/i}};ao.default=Hp});var KT=k(ze=>{"use strict";var wn=ze&&ze.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ze,"__esModule",{value:!0});ze.createConfiguration=ze.createCasualConfiguration=ze.parseDate=ze.parse=ze.strict=ze.casual=ze.hans=void 0;var Vp=xr(),kC=wn(fu()),EC=gn(),SC=wn(LT()),OC=wn(WT()),DC=wn($T()),xC=wn(GT()),RC=wn(YT()),MC=wn(HT()),CC=wn(VT()),AC=wn(zT());ze.hans=new Vp.Chrono(zp());ze.casual=new Vp.Chrono(zp());ze.strict=new Vp.Chrono(Kp());function PC(r,e,t){return ze.casual.parse(r,e,t)}ze.parse=PC;function NC(r,e,t){return ze.casual.parseDate(r,e,t)}ze.parseDate=NC;function zp(){let r=Kp();return r.parsers.unshift(new SC.default),r}ze.createCasualConfiguration=zp;function Kp(){let r=EC.includeCommonConfiguration({parsers:[new OC.default,new xC.default,new MC.default,new RC.default,new DC.default],refiners:[new CC.default,new AC.default]});return r.refiners=r.refiners.filter(e=>!(e instanceof kC.default)),r}ze.createConfiguration=Kp});var XT=k(zt=>{"use strict";var QT=zt&&zt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),IC=zt&&zt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),FC=zt&&zt.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&QT(e,r,t)},LC=zt&&zt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&QT(e,r,t);return IC(e,r),e};Object.defineProperty(zt,"__esModule",{value:!0});zt.hans=void 0;FC(PT(),zt);zt.hans=LC(KT())});var Ut=k(se=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});se.parseTimeUnits=se.TIME_UNITS_PATTERN=se.parseYear=se.YEAR_PATTERN=se.parseOrdinalNumberPattern=se.ORDINAL_NUMBER_PATTERN=se.parseNumberPattern=se.NUMBER_PATTERN=se.TIME_UNIT_DICTIONARY=se.ORDINAL_WORD_DICTIONARY=se.INTEGER_WORD_DICTIONARY=se.MONTH_DICTIONARY=se.FULL_MONTH_NAME_DICTIONARY=se.WEEKDAY_DICTIONARY=se.REGEX_PARTS=void 0;var Yu=Re(),UC=pt();se.REGEX_PARTS={leftBoundary:"([^\\p{L}\\p{N}_]|^)",rightBoundary:"(?=[^\\p{L}\\p{N}_]|$)",flags:"iu"};se.WEEKDAY_DICTIONARY={\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435:0,\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u044F:0,\u0432\u0441\u043A:0,"\u0432\u0441\u043A.":0,\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A:1,\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A\u0430:1,\u043F\u043D:1,"\u043F\u043D.":1,\u0432\u0442\u043E\u0440\u043D\u0438\u043A:2,\u0432\u0442\u043E\u0440\u043D\u0438\u043A\u0430:2,\u0432\u0442:2,"\u0432\u0442.":2,\u0441\u0440\u0435\u0434\u0430:3,\u0441\u0440\u0435\u0434\u044B:3,\u0441\u0440\u0435\u0434\u0443:3,\u0441\u0440:3,"\u0441\u0440.":3,\u0447\u0435\u0442\u0432\u0435\u0440\u0433:4,\u0447\u0435\u0442\u0432\u0435\u0440\u0433\u0430:4,\u0447\u0442:4,"\u0447\u0442.":4,\u043F\u044F\u0442\u043D\u0438\u0446\u0430:5,\u043F\u044F\u0442\u043D\u0438\u0446\u0443:5,\u043F\u044F\u0442\u043D\u0438\u0446\u044B:5,\u043F\u0442:5,"\u043F\u0442.":5,\u0441\u0443\u0431\u0431\u043E\u0442\u0430:6,\u0441\u0443\u0431\u0431\u043E\u0442\u0443:6,\u0441\u0443\u0431\u0431\u043E\u0442\u044B:6,\u0441\u0431:6,"\u0441\u0431.":6};se.FULL_MONTH_NAME_DICTIONARY={\u044F\u043D\u0432\u0430\u0440\u044C:1,\u044F\u043D\u0432\u0430\u0440\u044F:1,\u044F\u043D\u0432\u0430\u0440\u0435:1,\u0444\u0435\u0432\u0440\u044F\u043B\u044C:2,\u0444\u0435\u0432\u0440\u044F\u043B\u044F:2,\u0444\u0435\u0432\u0440\u044F\u043B\u0435:2,\u043C\u0430\u0440\u0442:3,\u043C\u0430\u0440\u0442\u0430:3,\u043C\u0430\u0440\u0442\u0435:3,\u0430\u043F\u0440\u0435\u043B\u044C:4,\u0430\u043F\u0440\u0435\u043B\u044F:4,\u0430\u043F\u0440\u0435\u043B\u0435:4,\u043C\u0430\u0439:5,\u043C\u0430\u044F:5,\u043C\u0430\u0435:5,\u0438\u044E\u043D\u044C:6,\u0438\u044E\u043D\u044F:6,\u0438\u044E\u043D\u0435:6,\u0438\u044E\u043B\u044C:7,\u0438\u044E\u043B\u044F:7,\u0438\u044E\u043B\u0435:7,\u0430\u0432\u0433\u0443\u0441\u0442:8,\u0430\u0432\u0433\u0443\u0441\u0442\u0430:8,\u0430\u0432\u0433\u0443\u0441\u0442\u0435:8,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044C:9,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044F:9,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u0435:9,\u043E\u043A\u0442\u044F\u0431\u0440\u044C:10,\u043E\u043A\u0442\u044F\u0431\u0440\u044F:10,\u043E\u043A\u0442\u044F\u0431\u0440\u0435:10,\u043D\u043E\u044F\u0431\u0440\u044C:11,\u043D\u043E\u044F\u0431\u0440\u044F:11,\u043D\u043E\u044F\u0431\u0440\u0435:11,\u0434\u0435\u043A\u0430\u0431\u0440\u044C:12,\u0434\u0435\u043A\u0430\u0431\u0440\u044F:12,\u0434\u0435\u043A\u0430\u0431\u0440\u0435:12};se.MONTH_DICTIONARY=Object.assign(Object.assign({},se.FULL_MONTH_NAME_DICTIONARY),{\u044F\u043D\u0432:1,"\u044F\u043D\u0432.":1,\u0444\u0435\u0432:2,"\u0444\u0435\u0432.":2,\u043C\u0430\u0440:3,"\u043C\u0430\u0440.":3,\u0430\u043F\u0440:4,"\u0430\u043F\u0440.":4,\u0430\u0432\u0433:8,"\u0430\u0432\u0433.":8,\u0441\u0435\u043D:9,"\u0441\u0435\u043D.":9,\u043E\u043A\u0442:10,"\u043E\u043A\u0442.":10,\u043D\u043E\u044F:11,"\u043D\u043E\u044F.":11,\u0434\u0435\u043A:12,"\u0434\u0435\u043A.":12});se.INTEGER_WORD_DICTIONARY={\u043E\u0434\u0438\u043D:1,\u043E\u0434\u043D\u0430:1,\u043E\u0434\u043D\u043E\u0439:1,\u043E\u0434\u043D\u0443:1,\u0434\u0432\u0435:2,\u0434\u0432\u0430:2,\u0434\u0432\u0443\u0445:2,\u0442\u0440\u0438:3,\u0442\u0440\u0435\u0445:3,\u0442\u0440\u0451\u0445:3,\u0447\u0435\u0442\u044B\u0440\u0435:4,\u0447\u0435\u0442\u044B\u0440\u0435\u0445:4,\u0447\u0435\u0442\u044B\u0440\u0451\u0445:4,\u043F\u044F\u0442\u044C:5,\u043F\u044F\u0442\u0438:5,\u0448\u0435\u0441\u0442\u044C:6,\u0448\u0435\u0441\u0442\u0438:6,\u0441\u0435\u043C\u044C:7,\u0441\u0435\u043C\u0438:7,\u0432\u043E\u0441\u0435\u043C\u044C:8,\u0432\u043E\u0441\u0435\u043C\u044C\u043C\u0438:8,\u0434\u0435\u0432\u044F\u0442\u044C:9,\u0434\u0435\u0432\u044F\u0442\u0438:9,\u0434\u0435\u0441\u044F\u0442\u044C:10,\u0434\u0435\u0441\u044F\u0442\u0438:10,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u044C:11,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u0438:11,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u044C:12,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u0438:12};se.ORDINAL_WORD_DICTIONARY={\u043F\u0435\u0440\u0432\u043E\u0435:1,\u043F\u0435\u0440\u0432\u043E\u0433\u043E:1,\u0432\u0442\u043E\u0440\u043E\u0435:2,\u0432\u0442\u043E\u0440\u043E\u0433\u043E:2,\u0442\u0440\u0435\u0442\u044C\u0435:3,\u0442\u0440\u0435\u0442\u044C\u0435\u0433\u043E:3,\u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0435:4,\u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0433\u043E:4,\u043F\u044F\u0442\u043E\u0435:5,\u043F\u044F\u0442\u043E\u0433\u043E:5,\u0448\u0435\u0441\u0442\u043E\u0435:6,\u0448\u0435\u0441\u0442\u043E\u0433\u043E:6,\u0441\u0435\u0434\u044C\u043C\u043E\u0435:7,\u0441\u0435\u0434\u044C\u043C\u043E\u0433\u043E:7,\u0432\u043E\u0441\u044C\u043C\u043E\u0435:8,\u0432\u043E\u0441\u044C\u043C\u043E\u0433\u043E:8,\u0434\u0435\u0432\u044F\u0442\u043E\u0435:9,\u0434\u0435\u0432\u044F\u0442\u043E\u0433\u043E:9,\u0434\u0435\u0441\u044F\u0442\u043E\u0435:10,\u0434\u0435\u0441\u044F\u0442\u043E\u0433\u043E:10,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:11,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:11,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:12,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:12,\u0442\u0440\u0438\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:13,\u0442\u0440\u0438\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:13,\u0447\u0435\u0442\u044B\u0440\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:14,\u0447\u0435\u0442\u044B\u0440\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:14,\u043F\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:15,\u043F\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:15,\u0448\u0435\u0441\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:16,\u0448\u0435\u0441\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:16,\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:17,\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:17,\u0432\u043E\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:18,\u0432\u043E\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:18,\u0434\u0435\u0432\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:19,\u0434\u0435\u0432\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:19,\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u043E\u0435:20,\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:20,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0435":21,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0433\u043E":21,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u0442\u043E\u0440\u043E\u0435":22,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u0442\u043E\u0440\u043E\u0433\u043E":22,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0442\u0440\u0435\u0442\u044C\u0435":23,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0442\u0440\u0435\u0442\u044C\u0435\u0433\u043E":23,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0435":24,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0433\u043E":24,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u044F\u0442\u043E\u0435":25,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u044F\u0442\u043E\u0433\u043E":25,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0448\u0435\u0441\u0442\u043E\u0435":26,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0448\u0435\u0441\u0442\u043E\u0433\u043E":26,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0441\u0435\u0434\u044C\u043C\u043E\u0435":27,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0441\u0435\u0434\u044C\u043C\u043E\u0433\u043E":27,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u043E\u0441\u044C\u043C\u043E\u0435":28,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u043E\u0441\u044C\u043C\u043E\u0433\u043E":28,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0434\u0435\u0432\u044F\u0442\u043E\u0435":29,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0434\u0435\u0432\u044F\u0442\u043E\u0433\u043E":29,\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u043E\u0435:30,\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u043E\u0433\u043E:30,"\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0435":31,"\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0433\u043E":31};se.TIME_UNIT_DICTIONARY={\u0441\u0435\u043A:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u0430:"second",\u0441\u0435\u043A\u0443\u043D\u0434:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u044B:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u0443:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0430:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0438:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u0435\u043A:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0443:"second",\u043C\u0438\u043D:"minute",\u043C\u0438\u043D\u0443\u0442\u0430:"minute",\u043C\u0438\u043D\u0443\u0442:"minute",\u043C\u0438\u043D\u0443\u0442\u044B:"minute",\u043C\u0438\u043D\u0443\u0442\u0443:"minute",\u043C\u0438\u043D\u0443\u0442\u043E\u043A:"minute",\u043C\u0438\u043D\u0443\u0442\u043A\u0438:"minute",\u043C\u0438\u043D\u0443\u0442\u043A\u0443:"minute",\u0447\u0430\u0441:"hour",\u0447\u0430\u0441\u043E\u0432:"hour",\u0447\u0430\u0441\u0430:"hour",\u0447\u0430\u0441\u0443:"hour",\u0447\u0430\u0441\u0438\u043A\u043E\u0432:"hour",\u0447\u0430\u0441\u0438\u043A\u0430:"hour",\u0447\u0430\u0441\u0438\u043A\u0435:"hour",\u0447\u0430\u0441\u0438\u043A:"hour",\u0434\u0435\u043D\u044C:"d",\u0434\u043D\u044F:"d",\u0434\u043D\u0435\u0439:"d",\u0441\u0443\u0442\u043E\u043A:"d",\u0441\u0443\u0442\u043A\u0438:"d",\u043D\u0435\u0434\u0435\u043B\u044F:"week",\u043D\u0435\u0434\u0435\u043B\u0435:"week",\u043D\u0435\u0434\u0435\u043B\u0438:"week",\u043D\u0435\u0434\u0435\u043B\u044E:"week",\u043D\u0435\u0434\u0435\u043B\u044C:"week",\u043D\u0435\u0434\u0435\u043B\u044C\u043A\u0435:"week",\u043D\u0435\u0434\u0435\u043B\u044C\u043A\u0438:"week",\u043D\u0435\u0434\u0435\u043B\u0435\u043A:"week",\u043C\u0435\u0441\u044F\u0446:"month",\u043C\u0435\u0441\u044F\u0446\u0435:"month",\u043C\u0435\u0441\u044F\u0446\u0435\u0432:"month",\u043C\u0435\u0441\u044F\u0446\u0430:"month",\u043A\u0432\u0430\u0440\u0442\u0430\u043B:"quarter",\u043A\u0432\u0430\u0440\u0442\u0430\u043B\u0435:"quarter",\u043A\u0432\u0430\u0440\u0442\u0430\u043B\u043E\u0432:"quarter",\u0433\u043E\u0434:"year",\u0433\u043E\u0434\u0430:"year",\u0433\u043E\u0434\u0443:"year",\u0433\u043E\u0434\u043E\u0432:"year",\u043B\u0435\u0442:"year",\u0433\u043E\u0434\u0438\u043A:"year",\u0433\u043E\u0434\u0438\u043A\u0430:"year",\u0433\u043E\u0434\u0438\u043A\u043E\u0432:"year"};se.NUMBER_PATTERN=`(?:${Yu.matchAnyPattern(se.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|\u043F\u043E\u043B|\u043D\u0435\u0441\u043A\u043E\u043B\u044C\u043A\u043E|\u043F\u0430\u0440(?:\u044B|\u0443)|\\s{0,3})`;function JT(r){let e=r.toLowerCase();return se.INTEGER_WORD_DICTIONARY[e]!==void 0?se.INTEGER_WORD_DICTIONARY[e]:e.match(/несколько/)?3:e.match(/пол/)?.5:e.match(/пар/)?2:e===""?1:parseFloat(e)}se.parseNumberPattern=JT;se.ORDINAL_NUMBER_PATTERN=`(?:${Yu.matchAnyPattern(se.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:\u0433\u043E|\u043E\u0433\u043E|\u0435|\u043E\u0435)?)`;function WC(r){let e=r.toLowerCase();return se.ORDINAL_WORD_DICTIONARY[e]!==void 0?se.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:st|nd|rd|th)$/i,""),parseInt(e))}se.parseOrdinalNumberPattern=WC;var Qp="(?:\\s+(?:\u0433\u043E\u0434\u0443|\u0433\u043E\u0434\u0430|\u0433\u043E\u0434|\u0433|\u0433.))?";se.YEAR_PATTERN=`(?:[1-9][0-9]{0,3}${Qp}\\s*(?:\u043D.\u044D.|\u0434\u043E \u043D.\u044D.|\u043D. \u044D.|\u0434\u043E \u043D. \u044D.)|[1-2][0-9]{3}${Qp}|[5-9][0-9]${Qp})`;function qC(r){if(/(год|года|г|г.)/i.test(r)&&(r=r.replace(/(год|года|г|г.)/i,"")),/(до н.э.|до н. э.)/i.test(r))return r=r.replace(/(до н.э.|до н. э.)/i,""),-parseInt(r);if(/(н. э.|н.э.)/i.test(r))return r=r.replace(/(н. э.|н.э.)/i,""),parseInt(r);let e=parseInt(r);return UC.findMostLikelyADYear(e)}se.parseYear=qC;var e_=`(${se.NUMBER_PATTERN})\\s{0,3}(${Yu.matchAnyPattern(se.TIME_UNIT_DICTIONARY)})`,ZT=new RegExp(e_,"i");se.TIME_UNITS_PATTERN=Yu.repeatedTimeunitPattern("(?:(?:\u043E\u043A\u043E\u043B\u043E|\u043F\u0440\u0438\u043C\u0435\u0440\u043D\u043E)\\s{0,3})?",e_);function $C(r){let e={},t=r,n=ZT.exec(t);for(;n;)jC(e,n),t=t.substring(n[0].length).trim(),n=ZT.exec(t);return e}se.parseTimeUnits=$C;function jC(r,e){let t=JT(e[1]),n=se.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var r_=k(Zp=>{"use strict";Object.defineProperty(Zp,"__esModule",{value:!0});var oo=Ut(),GC=Ue(),YC=H(),t_=`(?:(?:\u043E\u043A\u043E\u043B\u043E|\u043F\u0440\u0438\u043C\u0435\u0440\u043D\u043E)\\s*(?:~\\s*)?)?(${oo.TIME_UNITS_PATTERN})${oo.REGEX_PARTS.rightBoundary}`,BC=new RegExp(`(?:\u0432 \u0442\u0435\u0447\u0435\u043D\u0438\u0435|\u0432 \u0442\u0435\u0447\u0435\u043D\u0438\u0438)\\s*${t_}`,oo.REGEX_PARTS.flags),HC=new RegExp(t_,"i"),Xp=class extends YC.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return oo.REGEX_PARTS.leftBoundary}innerPattern(e){return e.option.forwardDate?HC:BC}innerExtract(e,t){let n=oo.parseTimeUnits(t[1]);return GC.ParsingComponents.createRelativeFromReference(e.reference,n)}};Zp.default=Xp});var o_=k(em=>{"use strict";Object.defineProperty(em,"__esModule",{value:!0});var VC=pt(),uo=Ut(),a_=Ut(),Bu=Ut(),zC=Re(),KC=H(),QC=new RegExp(`(?:\u0441)?\\s*(${Bu.ORDINAL_NUMBER_PATTERN})(?:\\s{0,3}(?:\u043F\u043E|-|\u2013|\u0434\u043E)?\\s{0,3}(${Bu.ORDINAL_NUMBER_PATTERN}))?(?:-|\\/|\\s{0,3}(?:of)?\\s{0,3})(${zC.matchAnyPattern(uo.MONTH_DICTIONARY)})(?:(?:-|\\/|,?\\s{0,3})(${a_.YEAR_PATTERN}(?![^\\s]\\d)))?${uo.REGEX_PARTS.rightBoundary}`,uo.REGEX_PARTS.flags),n_=1,i_=2,XC=3,s_=4,Jp=class extends KC.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return uo.REGEX_PARTS.leftBoundary}innerPattern(){return QC}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=uo.MONTH_DICTIONARY[t[XC].toLowerCase()],s=Bu.parseOrdinalNumberPattern(t[n_]);if(s>31)return t.index=t.index+t[n_].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[s_]){let a=a_.parseYear(t[s_]);n.start.assign("year",a)}else{let a=VC.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[i_]){let a=Bu.parseOrdinalNumberPattern(t[i_]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};em.default=Jp});var c_=k(rm=>{"use strict";Object.defineProperty(rm,"__esModule",{value:!0});var lo=Ut(),ZC=pt(),JC=Re(),l_=Ut(),eA=H(),tA=new RegExp(`((?:\u0432)\\s*)?(${JC.matchAnyPattern(lo.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${l_.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,lo.REGEX_PARTS.flags),rA=2,u_=3,tm=class extends eA.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return lo.REGEX_PARTS.leftBoundary}innerPattern(){return tA}innerExtract(e,t){let n=t[rA].toLowerCase();if(t[0].length<=3&&!lo.FULL_MONTH_NAME_DICTIONARY[n])return null;let i=e.createParsingResult(t.index,t.index+t[0].length);i.start.imply("day",1);let s=lo.MONTH_DICTIONARY[n];if(i.start.assign("month",s),t[u_]){let a=l_.parseYear(t[u_]);i.start.assign("year",a)}else{let a=ZC.findYearClosestToRef(e.refDate,1,s);i.start.imply("year",a)}return i}};rm.default=tm});var f_=k(im=>{"use strict";Object.defineProperty(im,"__esModule",{value:!0});var Hu=Je(),nA=Ti(),d_=Ut(),nm=class extends nA.AbstractTimeExpressionParser{constructor(e){super(e)}patternFlags(){return d_.REGEX_PARTS.flags}primaryPatternLeftBoundary(){return"(^|\\s|T|(?:[^\\p{L}\\p{N}_]))"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|\u0434\u043E|\u0438|\u043F\u043E|\\?)\\s*"}primaryPrefix(){return"(?:(?:\u0432|\u0441)\\s*)??"}primarySuffix(){return`(?:\\s*(?:\u0443\u0442\u0440\u0430|\u0432\u0435\u0447\u0435\u0440\u0430|\u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u043B\u0443\u0434\u043D\u044F))?(?!\\/)${d_.REGEX_PARTS.rightBoundary}`}extractPrimaryTimeComponents(e,t){let n=super.extractPrimaryTimeComponents(e,t);if(n){if(t[0].endsWith("\u0432\u0435\u0447\u0435\u0440\u0430")){let i=n.get("hour");i>=6&&i<12?(n.assign("hour",n.get("hour")+12),n.assign("meridiem",Hu.Meridiem.PM)):i<6&&n.assign("meridiem",Hu.Meridiem.AM)}if(t[0].endsWith("\u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u043B\u0443\u0434\u043D\u044F")){n.assign("meridiem",Hu.Meridiem.PM);let i=n.get("hour");i>=0&&i<=6&&n.assign("hour",n.get("hour")+12)}t[0].endsWith("\u0443\u0442\u0440\u0430")&&(n.assign("meridiem",Hu.Meridiem.AM),n.get("hour")<12&&n.assign("hour",n.get("hour")))}return n}};im.default=nm});var p_=k(am=>{"use strict";Object.defineProperty(am,"__esModule",{value:!0});var Vu=Ut(),iA=Ue(),sA=H(),aA=dr(),oA=new RegExp(`(${Vu.TIME_UNITS_PATTERN})\\s{0,5}\u043D\u0430\u0437\u0430\u0434(?=(?:\\W|$))`,Vu.REGEX_PARTS.flags),sm=class extends sA.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Vu.REGEX_PARTS.leftBoundary}innerPattern(){return oA}innerExtract(e,t){let n=Vu.parseTimeUnits(t[1]),i=aA.reverseTimeUnits(n);return iA.ParsingComponents.createRelativeFromReference(e.reference,i)}};am.default=sm});var m_=k(co=>{"use strict";var uA=co&&co.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(co,"__esModule",{value:!0});var lA=uA(Kr()),om=class extends lA.default{patternBetween(){return/^\s*(и до|и по|до|по|-)\s*$/i}};co.default=om});var h_=k(fo=>{"use strict";var cA=fo&&fo.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(fo,"__esModule",{value:!0});var dA=cA(hn()),um=class extends dA.default{patternBetween(){return new RegExp("^\\s*(T|\u0432|,|-)?\\s*$")}};fo.default=um});var g_=k(kn=>{"use strict";var fA=kn&&kn.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),pA=kn&&kn.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),mA=kn&&kn.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&fA(e,r,t);return pA(e,r),e};Object.defineProperty(kn,"__esModule",{value:!0});var hA=H(),po=mA(bn()),lm=Ut(),gA=new RegExp(`(?:\u0441|\u0441\u043E)?\\s*(\u0441\u0435\u0433\u043E\u0434\u043D\u044F|\u0432\u0447\u0435\u0440\u0430|\u0437\u0430\u0432\u0442\u0440\u0430|\u043F\u043E\u0441\u043B\u0435\u0437\u0430\u0432\u0442\u0440\u0430|\u043F\u043E\u0437\u0430\u0432\u0447\u0435\u0440\u0430)${lm.REGEX_PARTS.rightBoundary}`,lm.REGEX_PARTS.flags),cm=class extends hA.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return lm.REGEX_PARTS.leftBoundary}innerPattern(e){return gA}innerExtract(e,t){let n=t[1].toLowerCase(),i=e.createParsingComponents();switch(n){case"\u0441\u0435\u0433\u043E\u0434\u043D\u044F":return po.today(e.reference);case"\u0432\u0447\u0435\u0440\u0430":return po.yesterday(e.reference);case"\u0437\u0430\u0432\u0442\u0440\u0430":return po.tomorrow(e.reference);case"\u043F\u043E\u0441\u043B\u0435\u0437\u0430\u0432\u0442\u0440\u0430":return po.theDayAfter(e.reference,2);case"\u043F\u043E\u0437\u0430\u0432\u0447\u0435\u0440\u0430":return po.theDayBefore(e.reference,2)}return i}};kn.default=cm});var y_=k(Pr=>{"use strict";var yA=Pr&&Pr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),bA=Pr&&Pr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),TA=Pr&&Pr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&yA(e,r,t);return bA(e,r),e},_A=Pr&&Pr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Pr,"__esModule",{value:!0});var vA=H(),Di=TA(bn()),wA=cr(),kA=_A(_e()),dm=Ut(),EA=new RegExp(`(\u0441\u0435\u0439\u0447\u0430\u0441|\u043F\u0440\u043E\u0448\u043B\u044B\u043C\\s*\u0432\u0435\u0447\u0435\u0440\u043E\u043C|\u043F\u0440\u043E\u0448\u043B\u043E\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u0441\u0435\u0433\u043E\u0434\u043D\u044F\\s*\u043D\u043E\u0447\u044C\u044E|\u044D\u0442\u043E\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u043D\u043E\u0447\u044C\u044E|\u044D\u0442\u0438\u043C \u0443\u0442\u0440\u043E\u043C|\u0443\u0442\u0440\u043E\u043C|\u0443\u0442\u0440\u0430|\u0432\\s*\u043F\u043E\u043B\u0434\u0435\u043D\u044C|\u0432\u0435\u0447\u0435\u0440\u043E\u043C|\u0432\u0435\u0447\u0435\u0440\u0430|\u0432\\s*\u043F\u043E\u043B\u043D\u043E\u0447\u044C)${dm.REGEX_PARTS.rightBoundary}`,dm.REGEX_PARTS.flags),fm=class extends vA.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return dm.REGEX_PARTS.leftBoundary}innerPattern(){return EA}innerExtract(e,t){let n=kA.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();if(i==="\u0441\u0435\u0439\u0447\u0430\u0441")return Di.now(e.reference);if(i==="\u0432\u0435\u0447\u0435\u0440\u043E\u043C"||i==="\u0432\u0435\u0447\u0435\u0440\u0430")return Di.evening(e.reference);if(i.endsWith("\u0443\u0442\u0440\u043E\u043C")||i.endsWith("\u0443\u0442\u0440\u0430"))return Di.morning(e.reference);if(i.match(/в\s*полдень/))return Di.noon(e.reference);if(i.match(/прошлой\s*ночью/))return Di.lastNight(e.reference);if(i.match(/прошлым\s*вечером/))return Di.yesterdayEvening(e.reference);if(i.match(/следующей\s*ночью/)){let a=n.hour()<22?1:2;n=n.add(a,"day"),wA.assignSimilarDate(s,n),s.imply("hour",0)}return i.match(/в\s*полночь/)||i.endsWith("\u043D\u043E\u0447\u044C\u044E")?Di.midnight(e.reference):s}};Pr.default=fm});var b_=k(mm=>{"use strict";Object.defineProperty(mm,"__esModule",{value:!0});var mo=Ut(),SA=Re(),OA=H(),DA=vi(),xA=new RegExp(`(?:(?:,|\\(|\uFF08)\\s*)?(?:\u0432\\s*?)?(?:(\u044D\u0442\u0443|\u044D\u0442\u043E\u0442|\u043F\u0440\u043E\u0448\u043B\u044B\u0439|\u043F\u0440\u043E\u0448\u043B\u0443\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0443\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0433\u043E)\\s*)?(${SA.matchAnyPattern(mo.WEEKDAY_DICTIONARY)})(?:\\s*(?:,|\\)|\uFF09))?(?:\\s*\u043D\u0430\\s*(\u044D\u0442\u043E\u0439|\u043F\u0440\u043E\u0448\u043B\u043E\u0439|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439)\\s*\u043D\u0435\u0434\u0435\u043B\u0435)?${mo.REGEX_PARTS.rightBoundary}`,mo.REGEX_PARTS.flags),RA=1,MA=2,CA=3,pm=class extends OA.AbstractParserWithWordBoundaryChecking{innerPattern(){return xA}patternLeftBoundary(){return mo.REGEX_PARTS.leftBoundary}innerExtract(e,t){let n=t[MA].toLowerCase(),i=mo.WEEKDAY_DICTIONARY[n],s=t[RA],a=t[CA],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="\u043F\u0440\u043E\u0448\u043B\u044B\u0439"||o=="\u043F\u0440\u043E\u0448\u043B\u0443\u044E"||o=="\u043F\u0440\u043E\u0448\u043B\u043E\u0439"?u="last":o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0443\u044E"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0433\u043E"?u="next":(o=="\u044D\u0442\u043E\u0442"||o=="\u044D\u0442\u0443"||o=="\u044D\u0442\u043E\u0439")&&(u="this");let l=DA.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};mm.default=pm});var __=k(go=>{"use strict";var AA=go&&go.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(go,"__esModule",{value:!0});var ho=Ut(),T_=Ue(),PA=AA(_e()),NA=H(),IA=Re(),FA=new RegExp(`(\u0432 \u043F\u0440\u043E\u0448\u043B\u043E\u043C|\u043D\u0430 \u043F\u0440\u043E\u0448\u043B\u043E\u0439|\u043D\u0430 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439|\u0432 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C|\u043D\u0430 \u044D\u0442\u043E\u0439|\u0432 \u044D\u0442\u043E\u043C)\\s*(${IA.matchAnyPattern(ho.TIME_UNIT_DICTIONARY)})(?=\\s*)${ho.REGEX_PARTS.rightBoundary}`,ho.REGEX_PARTS.flags),LA=1,UA=2,hm=class extends NA.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return ho.REGEX_PARTS.leftBoundary}innerPattern(){return FA}innerExtract(e,t){let n=t[LA].toLowerCase(),i=t[UA].toLowerCase(),s=ho.TIME_UNIT_DICTIONARY[i];if(n=="\u043D\u0430 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439"||n=="\u0432 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C"){let u={};return u[s]=1,T_.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="\u0432 \u043F\u0440\u043E\u0448\u043B\u043E\u043C"||n=="\u043D\u0430 \u043F\u0440\u043E\u0448\u043B\u043E\u0439"){let u={};return u[s]=-1,T_.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=PA.default(e.reference.instant);return s.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):s.match(/month/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):s.match(/year/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};go.default=hm});var v_=k(ym=>{"use strict";Object.defineProperty(ym,"__esModule",{value:!0});var yo=Ut(),WA=Ue(),qA=H(),$A=dr(),jA=new RegExp(`(\u044D\u0442\u0438|\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435|\u043F\u0440\u043E\u0448\u043B\u044B\u0435|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0435|\u043F\u043E\u0441\u043B\u0435|\u0447\u0435\u0440\u0435\u0437|\\+|-)\\s*(${yo.TIME_UNITS_PATTERN})${yo.REGEX_PARTS.rightBoundary}`,yo.REGEX_PARTS.flags),gm=class extends qA.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return yo.REGEX_PARTS.leftBoundary}innerPattern(){return jA}innerExtract(e,t){let n=t[1].toLowerCase(),i=yo.parseTimeUnits(t[2]);switch(n){case"\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435":case"\u043F\u0440\u043E\u0448\u043B\u044B\u0435":case"-":i=$A.reverseTimeUnits(i);break}return WA.ParsingComponents.createRelativeFromReference(e.reference,i)}};ym.default=gm});var E_=k(lt=>{"use strict";var Kt=lt&&lt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(lt,"__esModule",{value:!0});lt.createConfiguration=lt.createCasualConfiguration=lt.parseDate=lt.parse=lt.strict=lt.casual=void 0;var GA=Kt(r_()),YA=Kt(o_()),BA=Kt(c_()),HA=Kt(f_()),VA=Kt(p_()),zA=Kt(m_()),KA=Kt(h_()),QA=gn(),XA=Kt(g_()),ZA=Kt(y_()),JA=Kt(b_()),eP=Kt(__()),w_=xr(),tP=Kt(wi()),rP=Kt(v_());lt.casual=new w_.Chrono(k_());lt.strict=new w_.Chrono(bm(!0));function nP(r,e,t){return lt.casual.parse(r,e,t)}lt.parse=nP;function iP(r,e,t){return lt.casual.parseDate(r,e,t)}lt.parseDate=iP;function k_(){let r=bm(!1);return r.parsers.unshift(new XA.default),r.parsers.unshift(new ZA.default),r.parsers.unshift(new BA.default),r.parsers.unshift(new eP.default),r.parsers.unshift(new rP.default),r}lt.createCasualConfiguration=k_;function bm(r=!0){return QA.includeCommonConfiguration({parsers:[new tP.default(!0),new GA.default,new YA.default,new JA.default,new HA.default(r),new VA.default],refiners:[new KA.default,new zA.default]},r)}lt.createConfiguration=bm});var Je=k(ce=>{"use strict";var sP=ce&&ce.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),aP=ce&&ce.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Jn=ce&&ce.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&sP(e,r,t);return aP(e,r),e};Object.defineProperty(ce,"__esModule",{value:!0});ce.parseDate=ce.parse=ce.casual=ce.strict=ce.ru=ce.zh=ce.nl=ce.pt=ce.ja=ce.fr=ce.de=ce.Meridiem=ce.Chrono=ce.en=void 0;var Tm=Jn(Id());ce.en=Tm;var oP=xr();Object.defineProperty(ce,"Chrono",{enumerable:!0,get:function(){return oP.Chrono}});var uP;(function(r){r[r.AM=0]="AM",r[r.PM=1]="PM"})(uP=ce.Meridiem||(ce.Meridiem={}));var lP=Jn(Py());ce.de=lP;var cP=Jn(ub());ce.fr=cP;var dP=Jn(yb());ce.ja=dP;var fP=Jn(Pb());ce.pt=fP;var pP=Jn(yT());ce.nl=pP;var mP=Jn(XT());ce.zh=mP;var hP=Jn(E_());ce.ru=hP;ce.strict=Tm.strict;ce.casual=Tm.casual;function gP(r,e,t){return ce.casual.parse(r,e,t)}ce.parse=gP;function yP(r,e,t){return ce.casual.parseDate(r,e,t)}ce.parseDate=yP});var kv=k((vv,wv)=>{(function(r){var e=Object.hasOwnProperty,t=Array.isArray?Array.isArray:function(h){return Object.prototype.toString.call(h)==="[object Array]"},n=10,i=typeof process=="object"&&typeof process.nextTick=="function",s=typeof Symbol=="function",a=typeof Reflect=="object",o=typeof setImmediate=="function",u=o?setImmediate:setTimeout,l=s?a&&typeof Reflect.ownKeys=="function"?Reflect.ownKeys:function(f){var h=Object.getOwnPropertyNames(f);return h.push.apply(h,Object.getOwnPropertySymbols(f)),h}:Object.keys;function c(){this._events={},this._conf&&d.call(this,this._conf)}function d(f){f&&(this._conf=f,f.delimiter&&(this.delimiter=f.delimiter),f.maxListeners!==r&&(this._maxListeners=f.maxListeners),f.wildcard&&(this.wildcard=f.wildcard),f.newListener&&(this._newListener=f.newListener),f.removeListener&&(this._removeListener=f.removeListener),f.verboseMemoryLeak&&(this.verboseMemoryLeak=f.verboseMemoryLeak),f.ignoreErrors&&(this.ignoreErrors=f.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function p(f,h){var y="(node) warning: possible EventEmitter memory leak detected. "+f+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(y+=" Event name: "+h+"."),typeof process!="undefined"&&process.emitWarning){var T=new Error(y);T.name="MaxListenersExceededWarning",T.emitter=this,T.count=f,process.emitWarning(T)}else console.error(y),console.trace&&console.trace()}var m=function(f,h,y){var T=arguments.length;switch(T){case 0:return[];case 1:return[f];case 2:return[f,h];case 3:return[f,h,y];default:for(var w=new Array(T);T--;)w[T]=arguments[T];return w}};function g(f,h){for(var y={},T,w=f.length,D=h?h.length:0,M=0;M<w;M++)T=f[M],y[T]=M<D?h[M]:r;return y}function b(f,h,y){this._emitter=f,this._target=h,this._listeners={},this._listenersCount=0;var T,w;if((y.on||y.off)&&(T=y.on,w=y.off),h.addEventListener?(T=h.addEventListener,w=h.removeEventListener):h.addListener?(T=h.addListener,w=h.removeListener):h.on&&(T=h.on,w=h.off),!T&&!w)throw Error("target does not implement any known event API");if(typeof T!="function")throw TypeError("on method must be a function");if(typeof w!="function")throw TypeError("off method must be a function");this._on=T,this._off=w;var D=f._observers;D?D.push(this):f._observers=[this]}Object.assign(b.prototype,{subscribe:function(f,h,y){var T=this,w=this._target,D=this._emitter,M=this._listeners,A=function(){var v=m.apply(null,arguments),x={data:v,name:h,original:f};if(y){var N=y.call(w,x);N!==!1&&D.emit.apply(D,[x.name].concat(v));return}D.emit.apply(D,[h].concat(v))};if(M[f])throw Error("Event '"+f+"' is already listening");this._listenersCount++,D._newListener&&D._removeListener&&!T._onNewListener?(this._onNewListener=function(v){v===h&&M[f]===null&&(M[f]=A,T._on.call(w,f,A))},D.on("newListener",this._onNewListener),this._onRemoveListener=function(v){v===h&&!D.hasListeners(v)&&M[f]&&(M[f]=null,T._off.call(w,f,A))},M[f]=null,D.on("removeListener",this._onRemoveListener)):(M[f]=A,T._on.call(w,f,A))},unsubscribe:function(f){var h=this,y=this._listeners,T=this._emitter,w,D,M=this._off,A=this._target,v;if(f&&typeof f!="string")throw TypeError("event must be a string");function x(){h._onNewListener&&(T.off("newListener",h._onNewListener),T.off("removeListener",h._onRemoveListener),h._onNewListener=null,h._onRemoveListener=null);var N=ne.call(T,h);T._observers.splice(N,1)}if(f){if(w=y[f],!w)return;M.call(A,f,w),delete y[f],--this._listenersCount||x()}else{for(D=l(y),v=D.length;v-- >0;)f=D[v],M.call(A,f,y[f]);this._listeners={},this._listenersCount=0,x()}}});function S(f,h,y,T){var w=Object.assign({},h);if(!f)return w;if(typeof f!="object")throw TypeError("options must be an object");var D=Object.keys(f),M=D.length,A,v,x;function N(te){throw Error('Invalid "'+A+'" option value'+(te?". Reason: "+te:""))}for(var he=0;he<M;he++){if(A=D[he],!T&&!e.call(h,A))throw Error('Unknown "'+A+'" option');v=f[A],v!==r&&(x=y[A],w[A]=x?x(v,N):v)}return w}function E(f,h){return(typeof f!="function"||!f.hasOwnProperty("prototype"))&&h("value must be a constructor"),f}function _(f){var h="value must be type of "+f.join("|"),y=f.length,T=f[0],w=f[1];return y===1?function(D,M){if(typeof D===T)return D;M(h)}:y===2?function(D,M){var A=typeof D;if(A===T||A===w)return D;M(h)}:function(D,M){for(var A=typeof D,v=y;v-- >0;)if(A===f[v])return D;M(h)}}var R=_(["function"]),j=_(["object","function"]);function U(f,h,y){var T,w,D=0,M,A=new f(function(v,x,N){y=S(y,{timeout:0,overload:!1},{timeout:function(Pe,Ge){return Pe*=1,(typeof Pe!="number"||Pe<0||!Number.isFinite(Pe))&&Ge("timeout must be a positive number"),Pe}}),T=!y.overload&&typeof f.prototype.cancel=="function"&&typeof N=="function";function he(){w&&(w=null),D&&(clearTimeout(D),D=0)}var te=function(Pe){he(),v(Pe)},ae=function(Pe){he(),x(Pe)};T?h(te,ae,N):(w=[function(Pe){ae(Pe||Error("canceled"))}],h(te,ae,function(Pe){if(M)throw Error("Unable to subscribe on cancel event asynchronously");if(typeof Pe!="function")throw TypeError("onCancel callback must be a function");w.push(Pe)}),M=!0),y.timeout>0&&(D=setTimeout(function(){var Pe=Error("timeout");Pe.code="ETIMEDOUT",D=0,A.cancel(Pe),x(Pe)},y.timeout))});return T||(A.cancel=function(v){if(!!w){for(var x=w.length,N=1;N<x;N++)w[N](v);w[0](v),w=null}}),A}function ne(f){var h=this._observers;if(!h)return-1;for(var y=h.length,T=0;T<y;T++)if(h[T]._target===f)return T;return-1}function V(f,h,y,T,w){if(!y)return null;if(T===0){var D=typeof h;if(D==="string"){var M,A,v=0,x=0,N=this.delimiter,he=N.length;if((A=h.indexOf(N))!==-1){M=new Array(5);do M[v++]=h.slice(x,A),x=A+he;while((A=h.indexOf(N,x))!==-1);M[v++]=h.slice(x),h=M,w=v}else h=[h],w=1}else D==="object"?w=h.length:(h=[h],w=1)}var te=null,ae,Pe,Ge,Gn,Or,Ye=h[T],ft=h[T+1],Pt,Xe;if(T===w)y._listeners&&(typeof y._listeners=="function"?(f&&f.push(y._listeners),te=[y]):(f&&f.push.apply(f,y._listeners),te=[y]));else if(Ye==="*"){for(Pt=l(y),A=Pt.length;A-- >0;)ae=Pt[A],ae!=="_listeners"&&(Xe=V(f,h,y[ae],T+1,w),Xe&&(te?te.push.apply(te,Xe):te=Xe));return te}else if(Ye==="**"){for(Or=T+1===w||T+2===w&&ft==="*",Or&&y._listeners&&(te=V(f,h,y,w,w)),Pt=l(y),A=Pt.length;A-- >0;)ae=Pt[A],ae!=="_listeners"&&(ae==="*"||ae==="**"?(y[ae]._listeners&&!Or&&(Xe=V(f,h,y[ae],w,w),Xe&&(te?te.push.apply(te,Xe):te=Xe)),Xe=V(f,h,y[ae],T,w)):ae===ft?Xe=V(f,h,y[ae],T+2,w):Xe=V(f,h,y[ae],T,w),Xe&&(te?te.push.apply(te,Xe):te=Xe));return te}else y[Ye]&&(te=V(f,h,y[Ye],T+1,w));if(Pe=y["*"],Pe&&V(f,h,Pe,T+1,w),Ge=y["**"],Ge)if(T<w)for(Ge._listeners&&V(f,h,Ge,w,w),Pt=l(Ge),A=Pt.length;A-- >0;)ae=Pt[A],ae!=="_listeners"&&(ae===ft?V(f,h,Ge[ae],T+2,w):ae===Ye?V(f,h,Ge[ae],T+1,w):(Gn={},Gn[ae]=Ge[ae],V(f,h,{"**":Gn},T+1,w)));else Ge._listeners?V(f,h,Ge,w,w):Ge["*"]&&Ge["*"]._listeners&&V(f,h,Ge["*"],w,w);return te}function G(f,h,y){var T=0,w=0,D,M=this.delimiter,A=M.length,v;if(typeof f=="string")if((D=f.indexOf(M))!==-1){v=new Array(5);do v[T++]=f.slice(w,D),w=D+A;while((D=f.indexOf(M,w))!==-1);v[T++]=f.slice(w)}else v=[f],T=1;else v=f,T=f.length;if(T>1){for(D=0;D+1<T;D++)if(v[D]==="**"&&v[D+1]==="**")return}var x=this.listenerTree,N;for(D=0;D<T;D++)if(N=v[D],x=x[N]||(x[N]={}),D===T-1)return x._listeners?(typeof x._listeners=="function"&&(x._listeners=[x._listeners]),y?x._listeners.unshift(h):x._listeners.push(h),!x._listeners.warned&&this._maxListeners>0&&x._listeners.length>this._maxListeners&&(x._listeners.warned=!0,p.call(this,x._listeners.length,N))):x._listeners=h,!0;return!0}function xe(f,h,y,T){for(var w=l(f),D=w.length,M,A,v,x=f._listeners,N;D-- >0;)A=w[D],M=f[A],A==="_listeners"?v=y:v=y?y.concat(A):[A],N=T||typeof A=="symbol",x&&h.push(N?v:v.join(this.delimiter)),typeof M=="object"&&xe.call(this,M,h,v,N);return h}function Me(f){for(var h=l(f),y=h.length,T,w,D;y-- >0;)w=h[y],T=f[w],T&&(D=!0,w!=="_listeners"&&!Me(T)&&delete f[w]);return D}function q(f,h,y){this.emitter=f,this.event=h,this.listener=y}q.prototype.off=function(){return this.emitter.off(this.event,this.listener),this};function $(f,h,y){if(y===!0)w=!0;else if(y===!1)T=!0;else{if(!y||typeof y!="object")throw TypeError("options should be an object or true");var T=y.async,w=y.promisify,D=y.nextTick,M=y.objectify}if(T||D||w){var A=h,v=h._origin||h;if(D&&!i)throw Error("process.nextTick is not supported");w===r&&(w=h.constructor.name==="AsyncFunction"),h=function(){var x=arguments,N=this,he=this.event;return w?D?Promise.resolve():new Promise(function(te){u(te)}).then(function(){return N.event=he,A.apply(N,x)}):(D?process.nextTick:u)(function(){N.event=he,A.apply(N,x)})},h._async=!0,h._origin=v}return[h,M?new q(this,f,h):this]}function O(f){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,d.call(this,f)}O.EventEmitter2=O,O.prototype.listenTo=function(f,h,y){if(typeof f!="object")throw TypeError("target musts be an object");var T=this;y=S(y,{on:r,off:r,reducers:r},{on:R,off:R,reducers:j});function w(D){if(typeof D!="object")throw TypeError("events must be an object");var M=y.reducers,A=ne.call(T,f),v;A===-1?v=new b(T,f,y):v=T._observers[A];for(var x=l(D),N=x.length,he,te=typeof M=="function",ae=0;ae<N;ae++)he=x[ae],v.subscribe(he,D[he]||he,te?M:M&&M[he])}return t(h)?w(g(h)):w(typeof h=="string"?g(h.split(/\s+/)):h),this},O.prototype.stopListeningTo=function(f,h){var y=this._observers;if(!y)return!1;var T=y.length,w,D=!1;if(f&&typeof f!="object")throw TypeError("target should be an object");for(;T-- >0;)w=y[T],(!f||w._target===f)&&(w.unsubscribe(h),D=!0);return D},O.prototype.delimiter=".",O.prototype.setMaxListeners=function(f){f!==r&&(this._maxListeners=f,this._conf||(this._conf={}),this._conf.maxListeners=f)},O.prototype.getMaxListeners=function(){return this._maxListeners},O.prototype.event="",O.prototype.once=function(f,h,y){return this._once(f,h,!1,y)},O.prototype.prependOnceListener=function(f,h,y){return this._once(f,h,!0,y)},O.prototype._once=function(f,h,y,T){return this._many(f,1,h,y,T)},O.prototype.many=function(f,h,y,T){return this._many(f,h,y,!1,T)},O.prototype.prependMany=function(f,h,y,T){return this._many(f,h,y,!0,T)},O.prototype._many=function(f,h,y,T,w){var D=this;if(typeof y!="function")throw new Error("many only accepts instances of Function");function M(){return--h===0&&D.off(f,M),y.apply(this,arguments)}return M._origin=y,this._on(f,M,T,w)},O.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||c.call(this);var f=arguments[0],h,y=this.wildcard,T,w,D,M,A;if(f==="newListener"&&!this._newListener&&!this._events.newListener)return!1;if(y&&(h=f,f!=="newListener"&&f!=="removeListener"&&typeof f=="object")){if(w=f.length,s){for(D=0;D<w;D++)if(typeof f[D]=="symbol"){A=!0;break}}A||(f=f.join(this.delimiter))}var v=arguments.length,x;if(this._all&&this._all.length)for(x=this._all.slice(),D=0,w=x.length;D<w;D++)switch(this.event=f,v){case 1:x[D].call(this,f);break;case 2:x[D].call(this,f,arguments[1]);break;case 3:x[D].call(this,f,arguments[1],arguments[2]);break;default:x[D].apply(this,arguments)}if(y)x=[],V.call(this,x,h,this.listenerTree,0,w);else if(x=this._events[f],typeof x=="function"){switch(this.event=f,v){case 1:x.call(this);break;case 2:x.call(this,arguments[1]);break;case 3:x.call(this,arguments[1],arguments[2]);break;default:for(T=new Array(v-1),M=1;M<v;M++)T[M-1]=arguments[M];x.apply(this,T)}return!0}else x&&(x=x.slice());if(x&&x.length){if(v>3)for(T=new Array(v-1),M=1;M<v;M++)T[M-1]=arguments[M];for(D=0,w=x.length;D<w;D++)switch(this.event=f,v){case 1:x[D].call(this);break;case 2:x[D].call(this,arguments[1]);break;case 3:x[D].call(this,arguments[1],arguments[2]);break;default:x[D].apply(this,T)}return!0}else if(!this.ignoreErrors&&!this._all&&f==="error")throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},O.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||c.call(this);var f=arguments[0],h=this.wildcard,y,T,w,D,M,A;if(f==="newListener"&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(h&&(y=f,f!=="newListener"&&f!=="removeListener"&&typeof f=="object")){if(D=f.length,s){for(M=0;M<D;M++)if(typeof f[M]=="symbol"){T=!0;break}}T||(f=f.join(this.delimiter))}var v=[],x=arguments.length,N;if(this._all)for(M=0,D=this._all.length;M<D;M++)switch(this.event=f,x){case 1:v.push(this._all[M].call(this,f));break;case 2:v.push(this._all[M].call(this,f,arguments[1]));break;case 3:v.push(this._all[M].call(this,f,arguments[1],arguments[2]));break;default:v.push(this._all[M].apply(this,arguments))}if(h?(N=[],V.call(this,N,y,this.listenerTree,0)):N=this._events[f],typeof N=="function")switch(this.event=f,x){case 1:v.push(N.call(this));break;case 2:v.push(N.call(this,arguments[1]));break;case 3:v.push(N.call(this,arguments[1],arguments[2]));break;default:for(w=new Array(x-1),A=1;A<x;A++)w[A-1]=arguments[A];v.push(N.apply(this,w))}else if(N&&N.length){if(N=N.slice(),x>3)for(w=new Array(x-1),A=1;A<x;A++)w[A-1]=arguments[A];for(M=0,D=N.length;M<D;M++)switch(this.event=f,x){case 1:v.push(N[M].call(this));break;case 2:v.push(N[M].call(this,arguments[1]));break;case 3:v.push(N[M].call(this,arguments[1],arguments[2]));break;default:v.push(N[M].apply(this,w))}}else if(!this.ignoreErrors&&!this._all&&f==="error")return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(v)},O.prototype.on=function(f,h,y){return this._on(f,h,!1,y)},O.prototype.prependListener=function(f,h,y){return this._on(f,h,!0,y)},O.prototype.onAny=function(f){return this._onAny(f,!1)},O.prototype.prependAny=function(f){return this._onAny(f,!0)},O.prototype.addListener=O.prototype.on,O.prototype._onAny=function(f,h){if(typeof f!="function")throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),h?this._all.unshift(f):this._all.push(f),this},O.prototype._on=function(f,h,y,T){if(typeof f=="function")return this._onAny(f,h),this;if(typeof h!="function")throw new Error("on only accepts instances of Function");this._events||c.call(this);var w=this,D;return T!==r&&(D=$.call(this,f,h,T),h=D[0],w=D[1]),this._newListener&&this.emit("newListener",f,h),this.wildcard?(G.call(this,f,h,y),w):(this._events[f]?(typeof this._events[f]=="function"&&(this._events[f]=[this._events[f]]),y?this._events[f].unshift(h):this._events[f].push(h),!this._events[f].warned&&this._maxListeners>0&&this._events[f].length>this._maxListeners&&(this._events[f].warned=!0,p.call(this,this._events[f].length,f))):this._events[f]=h,w)},O.prototype.off=function(f,h){if(typeof h!="function")throw new Error("removeListener only takes instances of Function");var y,T=[];if(this.wildcard){var w=typeof f=="string"?f.split(this.delimiter):f.slice();if(T=V.call(this,null,w,this.listenerTree,0),!T)return this}else{if(!this._events[f])return this;y=this._events[f],T.push({_listeners:y})}for(var D=0;D<T.length;D++){var M=T[D];if(y=M._listeners,t(y)){for(var A=-1,v=0,x=y.length;v<x;v++)if(y[v]===h||y[v].listener&&y[v].listener===h||y[v]._origin&&y[v]._origin===h){A=v;break}if(A<0)continue;return this.wildcard?M._listeners.splice(A,1):this._events[f].splice(A,1),y.length===0&&(this.wildcard?delete M._listeners:delete this._events[f]),this._removeListener&&this.emit("removeListener",f,h),this}else(y===h||y.listener&&y.listener===h||y._origin&&y._origin===h)&&(this.wildcard?delete M._listeners:delete this._events[f],this._removeListener&&this.emit("removeListener",f,h))}return this.listenerTree&&Me(this.listenerTree),this},O.prototype.offAny=function(f){var h=0,y=0,T;if(f&&this._all&&this._all.length>0){for(T=this._all,h=0,y=T.length;h<y;h++)if(f===T[h])return T.splice(h,1),this._removeListener&&this.emit("removeListenerAny",f),this}else{if(T=this._all,this._removeListener)for(h=0,y=T.length;h<y;h++)this.emit("removeListenerAny",T[h]);this._all=[]}return this},O.prototype.removeListener=O.prototype.off,O.prototype.removeAllListeners=function(f){if(f===r)return!this._events||c.call(this),this;if(this.wildcard){var h=V.call(this,null,f,this.listenerTree,0),y,T;if(!h)return this;for(T=0;T<h.length;T++)y=h[T],y._listeners=null;this.listenerTree&&Me(this.listenerTree)}else this._events&&(this._events[f]=null);return this},O.prototype.listeners=function(f){var h=this._events,y,T,w,D,M;if(f===r){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!h)return[];for(y=l(h),D=y.length,w=[];D-- >0;)T=h[y[D]],typeof T=="function"?w.push(T):w.push.apply(w,T);return w}else{if(this.wildcard){if(M=this.listenerTree,!M)return[];var A=[],v=typeof f=="string"?f.split(this.delimiter):f.slice();return V.call(this,A,v,M,0),A}return h?(T=h[f],T?typeof T=="function"?[T]:T:[]):[]}},O.prototype.eventNames=function(f){var h=this._events;return this.wildcard?xe.call(this,this.listenerTree,[],null,f):h?l(h):[]},O.prototype.listenerCount=function(f){return this.listeners(f).length},O.prototype.hasListeners=function(f){if(this.wildcard){var h=[],y=typeof f=="string"?f.split(this.delimiter):f.slice();return V.call(this,h,y,this.listenerTree,0),h.length>0}var T=this._events,w=this._all;return!!(w&&w.length||T&&(f===r?l(T).length:T[f]))},O.prototype.listenersAny=function(){return this._all?this._all:[]},O.prototype.waitFor=function(f,h){var y=this,T=typeof h;return T==="number"?h={timeout:h}:T==="function"&&(h={filter:h}),h=S(h,{timeout:0,filter:r,handleError:!1,Promise,overload:!1},{filter:R,Promise:E}),U(h.Promise,function(w,D,M){function A(){var v=h.filter;if(!(v&&!v.apply(y,arguments)))if(y.off(f,A),h.handleError){var x=arguments[0];x?D(x):w(m.apply(null,arguments).slice(1))}else w(m.apply(null,arguments))}M(function(){y.off(f,A)}),y._on(f,A,!1)},{timeout:h.timeout,overload:h.overload})};function B(f,h,y){y=S(y,{Promise,timeout:0,overload:!1},{Promise:E});var T=y.Promise;return U(T,function(w,D,M){var A;if(typeof f.addEventListener=="function"){A=function(){w(m.apply(null,arguments))},M(function(){f.removeEventListener(h,A)}),f.addEventListener(h,A,{once:!0});return}var v=function(){x&&f.removeListener("error",x),w(m.apply(null,arguments))},x;h!=="error"&&(x=function(N){f.removeListener(h,v),D(N)},f.once("error",x)),M(function(){x&&f.removeListener("error",x),f.removeListener(h,v)}),f.once(h,v)},{timeout:y.timeout,overload:y.overload})}var F=O.prototype;if(Object.defineProperties(O,{defaultMaxListeners:{get:function(){return F._maxListeners},set:function(f){if(typeof f!="number"||f<0||Number.isNaN(f))throw TypeError("n must be a non-negative number");F._maxListeners=f},enumerable:!0},once:{value:B,writable:!0,configurable:!0}}),Object.defineProperties(F,{_maxListeners:{value:n,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),typeof define=="function"&&define.amd)define(function(){return O});else if(typeof vv=="object")wv.exports=O;else{var X=new Function("","return this")();X.EventEmitter2=O}})()});var xw=k(yh=>{"use strict";Object.defineProperty(yh,"__esModule",{value:!0});var Ow=Symbol("MustacheDataPath");function Sw({target:r,propertyName:e}){return[...r[Ow]||[],e]}function Dw(r,e){return typeof r!="object"?r:new Proxy(r,{get(t,n){let i=t[n];if(i===void 0&&!(n in t)){let s=Sw({target:t,propertyName:n});if(e!=null&&e.handleError)return e.handleError(s),i;throw Error(`Missing Mustache data property: ${s.join(" > ")}`)}return i&&typeof i=="object"?(i[Ow]=Sw({target:t,propertyName:n}),Dw(i,e)):i}})}yh.default=Dw});var ln=k(qr=>{"use strict";qr.__esModule=!0;qr.Tokens=qr.StructuralCharacters=qr.Operators=void 0;var NI;(function(r){r.AND="AND",r.OR="OR",r.XOR="XOR",r.NOT="NOT"})(NI=qr.Operators||(qr.Operators={}));var II;(function(r){r.OPEN_PARENTHESIS="(",r.CLOSE_PARENTHESIS=")"})(II=qr.StructuralCharacters||(qr.StructuralCharacters={}));var FI;(function(r){r.IDENTIFIER="IDENTIFIER",r.OPERATOR="OPERATOR",r.STRUCTURAL_CHARACTER="STRUCTURAL_CHARACTER",r.EOF="EOF",r.COMMENT="COMMENT"})(FI=qr.Tokens||(qr.Tokens={}))});var Eh=k(Hs=>{"use strict";Hs.__esModule=!0;Hs.VALID_TOKENS=Hs.OPERATOR_PRECEDENCE=void 0;var We=ln();Hs.OPERATOR_PRECEDENCE={NOT:0,XOR:1,AND:2,OR:3};Hs.VALID_TOKENS={identifierOnly:[{name:We.Tokens.IDENTIFIER},{name:We.Tokens.STRUCTURAL_CHARACTER,value:We.StructuralCharacters.OPEN_PARENTHESIS}],identifierOrNot:[{name:We.Tokens.IDENTIFIER},{name:We.Tokens.STRUCTURAL_CHARACTER,value:We.StructuralCharacters.OPEN_PARENTHESIS},{name:We.Tokens.OPERATOR,value:We.Operators.NOT}],binaryOperator:[{name:We.Tokens.OPERATOR,value:We.Operators.AND},{name:We.Tokens.OPERATOR,value:We.Operators.OR},{name:We.Tokens.OPERATOR,value:We.Operators.XOR}],binaryOperatorOrClose:[{name:We.Tokens.OPERATOR,value:We.Operators.AND},{name:We.Tokens.OPERATOR,value:We.Operators.OR},{name:We.Tokens.OPERATOR,value:We.Operators.XOR},{name:We.Tokens.STRUCTURAL_CHARACTER,value:We.StructuralCharacters.CLOSE_PARENTHESIS}]}});var Sh=k(St=>{"use strict";St.__esModule=!0;St.ESCAPE_CHARACTER=St.EOL=St.COMMENT_DELIMITER=St.QUOTED_IDENTIFIER_DELIMITER=St.SEPARATORS=St.OPERATORS=St.STRUCTURAL_CHARACTERS=void 0;var Vs=ln();St.STRUCTURAL_CHARACTERS={"(":Vs.StructuralCharacters.OPEN_PARENTHESIS,")":Vs.StructuralCharacters.CLOSE_PARENTHESIS};St.OPERATORS={AND:Vs.Operators.AND,OR:Vs.Operators.OR,XOR:Vs.Operators.XOR,NOT:Vs.Operators.NOT};St.SEPARATORS=new Set([32,9,10,13].map(function(r){return String.fromCodePoint(r)}));St.QUOTED_IDENTIFIER_DELIMITER=String.fromCodePoint(34);St.COMMENT_DELIMITER=String.fromCodePoint(35);St.EOL=String.fromCodePoint(10);St.ESCAPE_CHARACTER=String.fromCodePoint(92)});var Nw=k(Er=>{"use strict";var Oh=Er&&Er.__assign||function(){return Oh=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Oh.apply(this,arguments)};Er.__esModule=!0;Er.getQuotedIdentifier=Er.getComment=Er.createResult=void 0;var Pw=ln(),Ki=Sh(),LI=function(r,e,t){return{token:Oh({name:r},e!==null?{value:e}:{}),remainingString:t}};Er.createResult=LI;var UI=function(r){for(var e=r.length,t=0;t<r.length;t+=1){var n=r[t];if(n===Ki.EOL){e=t;break}}return(0,Er.createResult)(Pw.Tokens.COMMENT,r.slice(0,e),r.slice(e+1))};Er.getComment=UI;var WI=function(r){for(var e=!1,t="",n=null,i=0;i<r.length;i+=1){var s=r[i];if(n===null)s===Ki.QUOTED_IDENTIFIER_DELIMITER?e?t=t.slice(-1)+Ki.QUOTED_IDENTIFIER_DELIMITER:n=i:(s===Ki.ESCAPE_CHARACTER?e=!0:e=!1,t=t+=s);else{if(!Ki.SEPARATORS.has(s)&&!Ki.STRUCTURAL_CHARACTERS[s])throw new Error("Unexpected character: ".concat(s," Expected ) character or separator"));break}}if(n===null)throw new Error("Unexpected end of expression: expected ".concat(Ki.QUOTED_IDENTIFIER_DELIMITER," character"));return(0,Er.createResult)(Pw.Tokens.IDENTIFIER,t,r.slice(n+1))};Er.getQuotedIdentifier=WI});var Iw=k($l=>{"use strict";$l.__esModule=!0;$l.lex=void 0;var zs=ln(),nr=Sh(),Ks=Nw(),qI=function(r){for(var e=null,t=null,n=null,i=0;i<r.length;i+=1){var s=r[i];if(e===null){if(!nr.SEPARATORS.has(s)){var a=nr.STRUCTURAL_CHARACTERS[s];if(a){var o=r[i+1];if(a===zs.StructuralCharacters.CLOSE_PARENTHESIS&&o&&!nr.SEPARATORS.has(o)&&o!==zs.StructuralCharacters.CLOSE_PARENTHESIS)throw new Error("Unexpected character: ".concat(o,". A closing parenthesis should be followed by another closing parenthesis or whitespace"));return(0,Ks.createResult)(zs.Tokens.STRUCTURAL_CHARACTER,nr.STRUCTURAL_CHARACTERS[s],r.slice(i+1))}if(s===nr.QUOTED_IDENTIFIER_DELIMITER)return(0,Ks.getQuotedIdentifier)(r.slice(i+1));if(s===nr.COMMENT_DELIMITER)return(0,Ks.getComment)(r.slice(i+1));e=i}}else if(nr.SEPARATORS.has(s)||nr.STRUCTURAL_CHARACTERS[s]){t=i,n=s;break}else if(s===nr.QUOTED_IDENTIFIER_DELIMITER||s===nr.COMMENT_DELIMITER)throw new Error("Unexpected character: ".concat(s))}if(e!==null){t=t!=null?t:r.length;var u=r.slice(e,t),l=r.slice(t);if(nr.OPERATORS[u]){if(n&&!nr.SEPARATORS.has(n))throw new Error("Unexpected character: ".concat(n,". Operators should be separated using whitespace"));return(0,Ks.createResult)(zs.Tokens.OPERATOR,nr.OPERATORS[u],l)}else return(0,Ks.createResult)(zs.Tokens.IDENTIFIER,u,l)}return(0,Ks.createResult)(zs.Tokens.EOF,null,"")};$l.lex=qI});var Lw=k(ir=>{"use strict";var Fw=ir&&ir.__spreadArray||function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))};ir.__esModule=!0;ir.validateToken=ir.previousOperatorTakesPrecedent=ir.getValue=ir.newTokenGenerator=void 0;var $I=Iw(),Qs=ln(),jl=Eh(),jI=function(r){var e=r;return function(t,n){for(n===void 0&&(n=!1);;){var i=(0,$I.lex)(e),s=i.token,a=i.remainingString;if(e=a,s.name!==Qs.Tokens.COMMENT)return(0,ir.validateToken)(s,t,n),s}}};ir.newTokenGenerator=jI;var GI=function(r,e){var t=r(jl.VALID_TOKENS.identifierOrNot),n=t.value===Qs.Operators.NOT;n&&(t=r(jl.VALID_TOKENS.identifierOnly));var i=t.name===Qs.Tokens.STRUCTURAL_CHARACTER?e(r,!0):[t];return n?Fw(Fw([],i,!0),[{name:Qs.Tokens.OPERATOR,value:Qs.Operators.NOT}],!1):i};ir.getValue=GI;var YI=function(r,e){return jl.OPERATOR_PRECEDENCE[r]<=jl.OPERATOR_PRECEDENCE[e]};ir.previousOperatorTakesPrecedent=YI;var BI=function(r,e,t){if(t===void 0&&(t=!1),r.name===Qs.Tokens.EOF){if(t)return;throw new Error("Unexpected end of expression")}for(var n=0,i=e;n<i.length;n++){var s=i[n];if(s.name===r.name&&(!s.value||s.value===r.value))return}throw new TypeError("Invalid token")};ir.validateToken=BI});var xh=k(Xs=>{"use strict";var cn=Xs&&Xs.__spreadArray||function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))};Xs.__esModule=!0;Xs.parse=void 0;var Uw=ln(),Ww=Eh(),Gl=Lw(),HI=function(r){if(typeof r!="string")throw new Error("Expected string but received ".concat(typeof r));var e=(0,Gl.newTokenGenerator)(r);return Dh(e)};Xs.parse=HI;var Dh=function(r,e){e===void 0&&(e=!1);for(var t=cn([],(0,Gl.getValue)(r,Dh),!0),n=[];;){var i=e?Ww.VALID_TOKENS.binaryOperatorOrClose:Ww.VALID_TOKENS.binaryOperator,s=r(i,!e);if(s.name===Uw.Tokens.EOF||s.name===Uw.Tokens.STRUCTURAL_CHARACTER)return cn(cn([],t,!0),cn([],n,!0).reverse(),!0);for(;n.length;){var a=n[n.length-1]||null;if(a&&(0,Gl.previousOperatorTakesPrecedent)(a.value,s.value))t=cn(cn([],t,!0),[a],!1),n=n.slice(0,-1);else break}n=cn(cn([],n,!0),[s],!1),t=cn(cn([],t,!0),(0,Gl.getValue)(r,Dh),!0)}}});var Rh=k(Ot=>{"use strict";Ot.__esModule=!0;Ot.throwInvalidExpression=Ot.isOperator=Ot.isIdentifier=Ot.notUtil=Ot.xorUtil=Ot.orUtil=Ot.andUtil=void 0;var qw=ln(),VI=function(r,e){return r&&e};Ot.andUtil=VI;var zI=function(r,e){return r||e};Ot.orUtil=zI;var KI=function(r,e){return r!==e};Ot.xorUtil=KI;var QI=function(r){return!r};Ot.notUtil=QI;var XI=function(r){var e=r.name,t=r.value;return e===qw.Tokens.IDENTIFIER&&typeof t=="string"};Ot.isIdentifier=XI;var ZI=function(r){var e=r.name,t=r.value;return e===qw.Tokens.OPERATOR&&typeof t=="string"};Ot.isOperator=ZI;var JI=function(r){throw new TypeError("Invalid postfix expression: ".concat(r))};Ot.throwInvalidExpression=JI});var $w=k(Yl=>{"use strict";var Bo;Yl.__esModule=!0;Yl.OPERATOR_MAP=void 0;var Mh=ln(),Ch=Rh();Yl.OPERATOR_MAP=(Bo={},Bo[Mh.Operators.AND]=Ch.andUtil,Bo[Mh.Operators.OR]=Ch.orUtil,Bo[Mh.Operators.XOR]=Ch.xorUtil,Bo)});var Gw=k(Wn=>{"use strict";var Zs=Wn&&Wn.__spreadArray||function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))};Wn.__esModule=!0;Wn.evaluate=Wn.getEvaluator=void 0;var eF=xh(),jw=ln(),tF=$w(),Qi=Rh(),rF=function(r){var e=(0,eF.parse)(r);return function(t){return(0,Wn.evaluate)(e,t)}};Wn.getEvaluator=rF;var nF=function(r,e){if(!Array.isArray(r))throw new Error("".concat(r," should be an array. evaluate takes in a parsed expression. Use in combination with parse or use getEvaluator"));var t=r.reduce(function(n,i,s){if(!(i&&((0,Qi.isIdentifier)(i)||(0,Qi.isOperator)(i))))throw new Error("Invalid token: ".concat(i,". Found in parsed expression at index ").concat(s));if(i.name===jw.Tokens.IDENTIFIER)return Zs(Zs([],n,!0),[Boolean(e[i.value])],!1);var a=n[n.length-2],o=n[n.length-1];if(i.value===jw.Operators.NOT)return o===void 0&&(0,Qi.throwInvalidExpression)("missing identifier"),Zs(Zs([],n.slice(0,-1),!0),[(0,Qi.notUtil)(o)],!1);(o===void 0||a===void 0)&&(0,Qi.throwInvalidExpression)("missing identifier");var u=tF.OPERATOR_MAP[i.value];return u||(0,Qi.throwInvalidExpression)("unknown operator"),Zs(Zs([],n.slice(0,-2),!0),[u(a,o)],!1)},[]);return t.length!==1&&(0,Qi.throwInvalidExpression)("too many identifiers after evaluation"),t[0]};Wn.evaluate=nF});var Bw=k(dn=>{"use strict";var Ah=dn&&dn.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]});dn.__esModule=!0;dn.parse=dn.evaluate=dn.getEvaluator=void 0;var Yw=Gw();Ah(dn,Yw,"getEvaluator");Ah(dn,Yw,"evaluate");var iF=xh();Ah(dn,iF,"parse")});var bF={};Qk(bF,{default:()=>Tc});module.exports=Xk(bF);var Mk=require("obsidian");var xs=require("obsidian");var _F=new Error("timeout while waiting for mutex to become available"),vF=new Error("mutex already locked"),Zk=new Error("request for lock canceled"),Jk=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?s(c.value):i(c.value).then(o,u)}l((n=n.apply(r,e||[])).next())})},Rc=class{constructor(e,t=Zk){this._value=e,this._cancelError=t,this._weightedQueues=[],this._weightedWaiters=[]}acquire(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return new Promise((t,n)=>{this._weightedQueues[e-1]||(this._weightedQueues[e-1]=[]),this._weightedQueues[e-1].push({resolve:t,reject:n}),this._dispatch()})}runExclusive(e,t=1){return Jk(this,void 0,void 0,function*(){let[n,i]=yield this.acquire(t);try{return yield e(n)}finally{i()}})}waitForUnlock(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return new Promise(t=>{this._weightedWaiters[e-1]||(this._weightedWaiters[e-1]=[]),this._weightedWaiters[e-1].push(t),this._dispatch()})}isLocked(){return this._value<=0}getValue(){return this._value}setValue(e){this._value=e,this._dispatch()}release(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);this._value+=e,this._dispatch()}cancel(){this._weightedQueues.forEach(e=>e.forEach(t=>t.reject(this._cancelError))),this._weightedQueues=[]}_dispatch(){var e;for(let t=this._value;t>0;t--){let n=(e=this._weightedQueues[t-1])===null||e===void 0?void 0:e.shift();if(!n)continue;let i=this._value,s=t;this._value-=t,t=this._value+1,n.resolve([i,this._newReleaser(s)])}this._drainUnlockWaiters()}_newReleaser(e){let t=!1;return()=>{t||(t=!0,this.release(e))}}_drainUnlockWaiters(){for(let e=this._value;e>0;e--)!this._weightedWaiters[e-1]||(this._weightedWaiters[e-1].forEach(t=>t()),this._weightedWaiters[e-1]=[])}},eE=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?s(c.value):i(c.value).then(o,u)}l((n=n.apply(r,e||[])).next())})},ru=class{constructor(e){this._semaphore=new Rc(1,e)}acquire(){return eE(this,void 0,void 0,function*(){let[,e]=yield this._semaphore.acquire();return e})}runExclusive(e){return this._semaphore.runExclusive(()=>e())}isLocked(){return this._semaphore.isLocked()}waitForUnlock(){return this._semaphore.waitForUnlock()}release(){this._semaphore.isLocked()&&this._semaphore.release()}cancel(){return this._semaphore.cancel()}};var Ze=class{constructor(e){this._path=e}get path(){return this._path}get pathWithoutExtension(){return this.withoutExtension(this.path)}withoutExtension(e){return e.replace(/\.md$/,"")}get root(){let e=this.path.replace(/\\/g,"/");e.charAt(0)==="/"&&(e=e.substring(1));let t=e.indexOf("/");return t==-1?"/":e.substring(0,t+1)}get folder(){let e=this.path,t=this.filename,n=e.substring(0,e.lastIndexOf(t));return n===""?"/":n}get filename(){let e=this.path.match(/([^/]+)$/);return e!==null?e[1]:""}get filenameWithoutExtension(){return this.withoutExtension(this.filename)}};var zu=ga(Je());var Rt=class{constructor(e,t){this.start=e,this.end=t,t.isBefore(e)&&(this.start=t,this.end=e),this.start=this.start.startOf("day"),this.end=this.end.startOf("day")}static buildRelative(e){let t=e==="week"?"isoWeek":e;return new Rt(window.moment().startOf(t).startOf("day"),window.moment().endOf(t).startOf("day"))}static buildInvalid(){return new Rt(window.moment.invalid(),window.moment.invalid())}isValid(){return this.start.isValid()&&this.end.isValid()}moveToPrevious(e){let t=window.moment.duration(1,e);this.start.subtract(t),this.end.subtract(t),(e==="month"||e==="quarter")&&(this.end=this.end.endOf(e).startOf("day"))}moveToNext(e){let t=window.moment.duration(1,e);this.start.add(t),this.end.add(t),(e==="month"||e==="quarter")&&(this.end=this.end.endOf(e).startOf("day"))}};var Qt=class{static parseDate(e,t=!1){return window.moment(zu.parseDate(e,void 0,{forwardDate:t})).startOf("day")}static parseDateRange(e,t=!1){let n=[Qt.parseRelativeDateRange,Qt.parseNumberedDateRange,Qt.parseAbsoluteDateRange];for(let i of n){let s=i(e,t);if(s.isValid())return s}return Rt.buildInvalid()}static parseAbsoluteDateRange(e,t){let n=zu.parse(e,void 0,{forwardDate:t});if(n.length===0)return Rt.buildInvalid();let i=n[0].start,s=n[1]&&n[1].start?n[1].start:i,a=window.moment(i.date()),o=window.moment(s.date());return new Rt(a,o)}static parseRelativeDateRange(e,t){let n=/(last|this|next) (week|month|quarter|year)/,i=e.match(n);if(i&&i.length===3){let s=i[1],a=i[2],o=Rt.buildRelative(a);switch(s){case"last":o.moveToPrevious(a);break;case"next":o.moveToNext(a);break}return o}return Rt.buildInvalid()}static parseNumberedDateRange(e,t){let n=[[/^\s*[0-9]{4}\s*$/,"YYYY","year"],[/^\s*[0-9]{4}-Q[1-4]\s*$/,"YYYY-Q","quarter"],[/^\s*[0-9]{4}-[0-9]{2}\s*$/,"YYYY-MM","month"],[/^\s*[0-9]{4}-W[0-9]{2}\s*$/,"YYYY-WW","isoWeek"]];for(let[i,s,a]of n){let o=e.match(i);if(o){let u=o[0].trim();return new Rt(window.moment(u,s).startOf(a),window.moment(u,s).endOf(a))}}return Rt.buildInvalid()}};var bP={td:"today",tm:"tomorrow",yd:"yesterday",tw:"this week",nw:"next week",weekend:"sat",we:"sat"};function Ku(r){for(let[e,t]of Object.entries(bP))r=r.replace(RegExp(`\\b${e}\\s`,"i"),t);return r}var Qu=["MO","TU","WE","TH","FR","SA","SU"],Ke=function(){function r(e,t){if(t===0)throw new Error("Can't create weekday with n == 0");this.weekday=e,this.n=t}return r.fromStr=function(e){return new r(Qu.indexOf(e))},r.prototype.nth=function(e){return this.n===e?this:new r(this.weekday,e)},r.prototype.equals=function(e){return this.weekday===e.weekday&&this.n===e.n},r.prototype.toString=function(){var e=Qu[this.weekday];return this.n&&(e=(this.n>0?"+":"")+String(this.n)+e),e},r.prototype.getJsWeekday=function(){return this.weekday===6?0:this.weekday+1},r}();var Ie=function(r){return r!=null},Xt=function(r){return typeof r=="number"},_m=function(r){return typeof r=="string"&&Qu.includes(r)},gt=Array.isArray,yr=function(r,e){e===void 0&&(e=r),arguments.length===1&&(e=r,r=0);for(var t=[],n=r;n<e;n++)t.push(n);return t};var pe=function(r,e){var t=0,n=[];if(gt(r))for(;t<e;t++)n[t]=[].concat(r);else for(;t<e;t++)n[t]=r;return n},S_=function(r){return gt(r)?r:[r]};function xi(r,e,t){t===void 0&&(t=" ");var n=String(r);return e=e>>0,n.length>e?String(n):(e=e-n.length,e>t.length&&(t+=pe(t,e/t.length)),t.slice(0,e)+String(n))}var O_=function(r,e,t){var n=r.split(e);return t?n.slice(0,t).concat([n.slice(t).join(e)]):n},Tt=function(r,e){var t=r%e;return t*e<0?t+e:t},Xu=function(r,e){return{div:Math.floor(r/e),mod:Tt(r,e)}},Zt=function(r){return!Ie(r)||r.length===0},qe=function(r){return!Zt(r)},ge=function(r,e){return qe(r)&&r.indexOf(e)!==-1};var Zr=function(r,e,t,n,i,s){return n===void 0&&(n=0),i===void 0&&(i=0),s===void 0&&(s=0),new Date(Date.UTC(r,e-1,t,n,i,s))},TP=[31,28,31,30,31,30,31,31,30,31,30,31],R_=1e3*60*60*24,Zu=9999,M_=Zr(1970,1,1),_P=[6,0,1,2,3,4,5];var _s=function(r){return r%4===0&&r%100!==0||r%400===0},vm=function(r){return r instanceof Date},Ri=function(r){return vm(r)&&!isNaN(r.getTime())},D_=function(r){return r.getTimezoneOffset()*60*1e3},vP=function(r,e){var t=r.getTime()-D_(r),n=e.getTime()-D_(e),i=t-n;return Math.round(i/R_)},bo=function(r){return vP(r,M_)},Ju=function(r){return new Date(M_.getTime()+r*R_)},wP=function(r){var e=r.getUTCMonth();return e===1&&_s(r.getUTCFullYear())?29:TP[e]},En=function(r){return _P[r.getUTCDay()]},wm=function(r,e){var t=Zr(r,e+1,1);return[En(t),wP(t)]},el=function(r,e){return e=e||r,new Date(Date.UTC(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()))},tl=function(r){var e=new Date(r.getTime());return e},km=function(r){for(var e=[],t=0;t<r.length;t++)e.push(tl(r[t]));return e},Sn=function(r){r.sort(function(e,t){return e.getTime()-t.getTime()})},vs=function(r,e){e===void 0&&(e=!0);var t=new Date(r);return[xi(t.getUTCFullYear().toString(),4,"0"),xi(t.getUTCMonth()+1,2,"0"),xi(t.getUTCDate(),2,"0"),"T",xi(t.getUTCHours(),2,"0"),xi(t.getUTCMinutes(),2,"0"),xi(t.getUTCSeconds(),2,"0"),e?"Z":""].join("")},To=function(r){var e=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/,t=e.exec(r);if(!t)throw new Error("Invalid UNTIL value: ".concat(r));return new Date(Date.UTC(parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10),parseInt(t[5],10)||0,parseInt(t[6],10)||0,parseInt(t[7],10)||0))},x_=function(r,e){var t=r.toLocaleString("sv-SE",{timeZone:e});return t.replace(" ","T")+"Z"},C_=function(r,e){var t=Intl.DateTimeFormat().resolvedOptions().timeZone,n=new Date(x_(r,t)),i=new Date(x_(r,e!=null?e:"UTC")),s=i.getTime()-n.getTime();return new Date(r.getTime()-s)};var kP=function(){function r(e,t){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=e,this.args=t,e==="between"?(this.maxDate=t.inc?t.before:new Date(t.before.getTime()-1),this.minDate=t.inc?t.after:new Date(t.after.getTime()+1)):e==="before"?this.maxDate=t.inc?t.dt:new Date(t.dt.getTime()-1):e==="after"&&(this.minDate=t.inc?t.dt:new Date(t.dt.getTime()+1))}return r.prototype.accept=function(e){++this.total;var t=this.minDate&&e<this.minDate,n=this.maxDate&&e>this.maxDate;if(this.method==="between"){if(t)return!0;if(n)return!1}else if(this.method==="before"){if(n)return!1}else if(this.method==="after")return t?!0:(this.add(e),!1);return this.add(e)},r.prototype.add=function(e){return this._result.push(e),!0},r.prototype.getValue=function(){var e=this._result;switch(this.method){case"all":case"between":return e;case"before":case"after":default:return e.length?e[e.length-1]:null}},r.prototype.clone=function(){return new r(this.method,this.args)},r}(),On=kP;var Em=function(r,e){return Em=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},Em(r,e)};function ws(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Em(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var yt=function(){return yt=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},yt.apply(this,arguments)};function L(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))}var EP=function(r){ws(e,r);function e(t,n,i){var s=r.call(this,t,n)||this;return s.iterator=i,s}return e.prototype.add=function(t){return this.iterator(t,this._result.length)?(this._result.push(t),!0):!1},e}(On),Sm=EP;var SP={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},Mi=SP;var A_=function(r,e){return r.indexOf(e)!==-1},OP=function(r){return r.toString()},DP=function(r,e,t){return"".concat(e," ").concat(t,", ").concat(r)},xP=function(){function r(e,t,n,i){if(t===void 0&&(t=OP),n===void 0&&(n=Mi),i===void 0&&(i=DP),this.text=[],this.language=n||Mi,this.gettext=t,this.dateFormatter=i,this.rrule=e,this.options=e.options,this.origOptions=e.origOptions,this.origOptions.bymonthday){var s=[].concat(this.options.bymonthday),a=[].concat(this.options.bynmonthday);s.sort(function(c,d){return c-d}),a.sort(function(c,d){return d-c}),this.bymonthday=s.concat(a),this.bymonthday.length||(this.bymonthday=null)}if(Ie(this.origOptions.byweekday)){var o=gt(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],u=String(o);this.byweekday={allWeeks:o.filter(function(c){return!c.n}),someWeeks:o.filter(function(c){return Boolean(c.n)}),isWeekdays:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")===-1&&u.indexOf("SU")===-1,isEveryDay:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")!==-1&&u.indexOf("SU")!==-1};var l=function(c,d){return c.weekday-d.weekday};this.byweekday.allWeeks.sort(l),this.byweekday.someWeeks.sort(l),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return r.isFullyConvertible=function(e){var t=!0;if(!(e.options.freq in r.IMPLEMENTED)||e.origOptions.until&&e.origOptions.count)return!1;for(var n in e.origOptions){if(A_(["dtstart","wkst","freq"],n))return!0;if(!A_(r.IMPLEMENTED[e.options.freq],n))return!1}return t},r.prototype.isFullyConvertible=function(){return r.isFullyConvertible(this.rrule)},r.prototype.toString=function(){var e=this.gettext;if(!(this.options.freq in r.IMPLEMENTED))return e("RRule error: Unable to fully convert this rrule to text");if(this.text=[e("every")],this[z.FREQUENCIES[this.options.freq]](),this.options.until){this.add(e("until"));var t=this.options.until;this.add(this.dateFormatter(t.getUTCFullYear(),this.language.monthNames[t.getUTCMonth()],t.getUTCDate()))}else this.options.count&&this.add(e("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?e("times"):e("time"));return this.isFullyConvertible()||this.add(e("(~ approximate)")),this.text.join("")},r.prototype.HOURLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("hours"):e("hour"))},r.prototype.MINUTELY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("minutes"):e("minute"))},r.prototype.DAILY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(this.plural(this.options.interval)?e("days"):e("day")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},r.prototype.WEEKLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?e("weeks"):e("week")),this.byweekday&&this.byweekday.isWeekdays?this.options.interval===1?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(e("on")).add(e("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?e("days"):e("day")):(this.options.interval===1&&this.add(e("week")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday())},r.prototype.MONTHLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()).add(e("months")),this.plural(this.options.interval)&&this.add(e("in"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("months"):e("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(e("on")).add(e("weekdays")):this.byweekday&&this._byweekday()},r.prototype.YEARLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()),this.add(e("years"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("years"):e("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(e("on the")).add(this.list(this.options.byyearday,this.nth,e("and"))).add(e("day")),this.options.byweekno&&this.add(e("in")).add(this.plural(this.options.byweekno.length)?e("weeks"):e("week")).add(this.list(this.options.byweekno,void 0,e("and")))},r.prototype._bymonthday=function(){var e=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,e("or"))).add(e("the")).add(this.list(this.bymonthday,this.nth,e("or"))):this.add(e("on the")).add(this.list(this.bymonthday,this.nth,e("and")))},r.prototype._byweekday=function(){var e=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(e("and")),this.add(e("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,e("and"))))},r.prototype._byhour=function(){var e=this.gettext;this.add(e("at")).add(this.list(this.origOptions.byhour,void 0,e("and")))},r.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},r.prototype.nth=function(e){e=parseInt(e.toString(),10);var t,n=this.gettext;if(e===-1)return n("last");var i=Math.abs(e);switch(i){case 1:case 21:case 31:t=i+n("st");break;case 2:case 22:t=i+n("nd");break;case 3:case 23:t=i+n("rd");break;default:t=i+n("th")}return e<0?t+" "+n("last"):t},r.prototype.monthtext=function(e){return this.language.monthNames[e-1]},r.prototype.weekdaytext=function(e){var t=Xt(e)?(e+1)%7:e.getJsWeekday();return(e.n?this.nth(e.n)+" ":"")+this.language.dayNames[t]},r.prototype.plural=function(e){return e%100!==1},r.prototype.add=function(e){return this.text.push(" "),this.text.push(e),this},r.prototype.list=function(e,t,n,i){var s=this;i===void 0&&(i=","),gt(e)||(e=[e]);var a=function(u,l,c){for(var d="",p=0;p<u.length;p++)p!==0&&(p===u.length-1?d+=" "+c+" ":d+=l+" "),d+=u[p];return d};t=t||function(u){return u.toString()};var o=function(u){return t&&t.call(s,u)};return n?a(e.map(o),i,n):e.map(o).join(i+" ")},r}(),Jr=xP;var RP=function(){function r(e){this.done=!0,this.rules=e}return r.prototype.start=function(e){return this.text=e,this.done=!1,this.nextSymbol()},r.prototype.isDone=function(){return this.done&&this.symbol===null},r.prototype.nextSymbol=function(){var e,t;this.symbol=null,this.value=null;do{if(this.done)return!1;var n=void 0;e=null;for(var i in this.rules){n=this.rules[i];var s=n.exec(this.text);s&&(e===null||s[0].length>e[0].length)&&(e=s,t=i)}if(e!=null&&(this.text=this.text.substr(e[0].length),this.text===""&&(this.done=!0)),e==null){this.done=!0,this.symbol=null,this.value=null;return}}while(t==="SKIP");return this.symbol=t,this.value=e,!0},r.prototype.accept=function(e){if(this.symbol===e){if(this.value){var t=this.value;return this.nextSymbol(),t}return this.nextSymbol(),!0}return!1},r.prototype.acceptNumber=function(){return this.accept("number")},r.prototype.expect=function(e){if(this.accept(e))return!0;throw new Error("expected "+e+" but found "+this.symbol)},r}();function _o(r,e){e===void 0&&(e=Mi);var t={},n=new RP(e.tokens);if(!n.start(r))return null;return i(),t;function i(){n.expect("every");var p=n.acceptNumber();if(p&&(t.interval=parseInt(p[0],10)),n.isDone())throw new Error("Unexpected end");switch(n.symbol){case"day(s)":t.freq=z.DAILY,n.nextSymbol()&&(a(),d());break;case"weekday(s)":t.freq=z.WEEKLY,t.byweekday=[z.MO,z.TU,z.WE,z.TH,z.FR],n.nextSymbol(),d();break;case"week(s)":t.freq=z.WEEKLY,n.nextSymbol()&&(s(),d());break;case"hour(s)":t.freq=z.HOURLY,n.nextSymbol()&&(s(),d());break;case"minute(s)":t.freq=z.MINUTELY,n.nextSymbol()&&(s(),d());break;case"month(s)":t.freq=z.MONTHLY,n.nextSymbol()&&(s(),d());break;case"year(s)":t.freq=z.YEARLY,n.nextSymbol()&&(s(),d());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":t.freq=z.WEEKLY;var m=n.symbol.substr(0,2).toUpperCase();if(t.byweekday=[z[m]],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var g=u();if(!g)throw new Error("Unexpected symbol "+n.symbol+", expected weekday");t.byweekday.push(z[g]),n.nextSymbol()}c(),d();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(t.freq=z.YEARLY,t.bymonth=[o()],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var b=o();if(!b)throw new Error("Unexpected symbol "+n.symbol+", expected month");t.bymonth.push(b),n.nextSymbol()}s(),d();break;default:throw new Error("Unknown symbol")}}function s(){var p=n.accept("on"),m=n.accept("the");if(!!(p||m))do{var g=l(),b=u(),S=o();if(g)b?(n.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push(z[b].nth(g))):(t.bymonthday||(t.bymonthday=[]),t.bymonthday.push(g),n.accept("day(s)"));else if(b)n.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push(z[b]);else if(n.symbol==="weekday(s)")n.nextSymbol(),t.byweekday||(t.byweekday=[z.MO,z.TU,z.WE,z.TH,z.FR]);else if(n.symbol==="week(s)"){n.nextSymbol();var E=n.acceptNumber();if(!E)throw new Error("Unexpected symbol "+n.symbol+", expected week number");for(t.byweekno=[parseInt(E[0],10)];n.accept("comma");){if(E=n.acceptNumber(),!E)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");t.byweekno.push(parseInt(E[0],10))}}else if(S)n.nextSymbol(),t.bymonth||(t.bymonth=[]),t.bymonth.push(S);else return}while(n.accept("comma")||n.accept("the")||n.accept("on"))}function a(){var p=n.accept("at");if(!!p)do{var m=n.acceptNumber();if(!m)throw new Error("Unexpected symbol "+n.symbol+", expected hour");for(t.byhour=[parseInt(m[0],10)];n.accept("comma");){if(m=n.acceptNumber(),!m)throw new Error("Unexpected symbol "+n.symbol+"; expected hour");t.byhour.push(parseInt(m[0],10))}}while(n.accept("comma")||n.accept("at"))}function o(){switch(n.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function u(){switch(n.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return n.symbol.substr(0,2).toUpperCase();default:return!1}}function l(){switch(n.symbol){case"last":return n.nextSymbol(),-1;case"first":return n.nextSymbol(),1;case"second":return n.nextSymbol(),n.accept("last")?-2:2;case"third":return n.nextSymbol(),n.accept("last")?-3:3;case"nth":var p=parseInt(n.value[1],10);if(p<-366||p>366)throw new Error("Nth out of range: "+p);return n.nextSymbol(),n.accept("last")?-p:p;default:return!1}}function c(){n.accept("on"),n.accept("the");var p=l();if(!!p)for(t.bymonthday=[p],n.nextSymbol();n.accept("comma");){if(p=l(),!p)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");t.bymonthday.push(p),n.nextSymbol()}}function d(){if(n.symbol==="until"){var p=Date.parse(n.text);if(!p)throw new Error("Cannot parse until date:"+n.text);t.until=new Date(p)}else n.accept("for")&&(t.count=parseInt(n.value[0],10),n.expect("number"))}}var de;(function(r){r[r.YEARLY=0]="YEARLY",r[r.MONTHLY=1]="MONTHLY",r[r.WEEKLY=2]="WEEKLY",r[r.DAILY=3]="DAILY",r[r.HOURLY=4]="HOURLY",r[r.MINUTELY=5]="MINUTELY",r[r.SECONDLY=6]="SECONDLY"})(de||(de={}));function vo(r){return r<de.HOURLY}var P_=function(r,e){return e===void 0&&(e=Mi),new z(_o(r,e)||void 0)},ks=["count","until","interval","byweekday","bymonthday","bymonth"];Jr.IMPLEMENTED=[];Jr.IMPLEMENTED[de.HOURLY]=ks;Jr.IMPLEMENTED[de.MINUTELY]=ks;Jr.IMPLEMENTED[de.DAILY]=["byhour"].concat(ks);Jr.IMPLEMENTED[de.WEEKLY]=ks;Jr.IMPLEMENTED[de.MONTHLY]=ks;Jr.IMPLEMENTED[de.YEARLY]=["byweekno","byyearday"].concat(ks);var N_=function(r,e,t,n){return new Jr(r,e,t,n).toString()},I_=Jr.isFullyConvertible;var Es=function(){function r(e,t,n,i){this.hour=e,this.minute=t,this.second=n,this.millisecond=i||0}return r.prototype.getHours=function(){return this.hour},r.prototype.getMinutes=function(){return this.minute},r.prototype.getSeconds=function(){return this.second},r.prototype.getMilliseconds=function(){return this.millisecond},r.prototype.getTime=function(){return(this.hour*60*60+this.minute*60+this.second)*1e3+this.millisecond},r}();var F_=function(r){ws(e,r);function e(t,n,i,s,a,o,u){var l=r.call(this,s,a,o,u)||this;return l.year=t,l.month=n,l.day=i,l}return e.fromDate=function(t){return new this(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.valueOf()%1e3)},e.prototype.getWeekday=function(){return En(new Date(this.getTime()))},e.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},e.prototype.getDay=function(){return this.day},e.prototype.getMonth=function(){return this.month},e.prototype.getYear=function(){return this.year},e.prototype.addYears=function(t){this.year+=t},e.prototype.addMonths=function(t){if(this.month+=t,this.month>12){var n=Math.floor(this.month/12),i=Tt(this.month,12);this.month=i,this.year+=n,this.month===0&&(this.month=12,--this.year)}},e.prototype.addWeekly=function(t,n){n>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-n))+t*7:this.day+=-(this.getWeekday()-n)+t*7,this.fixDay()},e.prototype.addDaily=function(t){this.day+=t,this.fixDay()},e.prototype.addHours=function(t,n,i){for(n&&(this.hour+=Math.floor((23-this.hour)/t)*t);;){this.hour+=t;var s=Xu(this.hour,24),a=s.div,o=s.mod;if(a&&(this.hour=o,this.addDaily(a)),Zt(i)||ge(i,this.hour))break}},e.prototype.addMinutes=function(t,n,i,s){for(n&&(this.minute+=Math.floor((1439-(this.hour*60+this.minute))/t)*t);;){this.minute+=t;var a=Xu(this.minute,60),o=a.div,u=a.mod;if(o&&(this.minute=u,this.addHours(o,!1,i)),(Zt(i)||ge(i,this.hour))&&(Zt(s)||ge(s,this.minute)))break}},e.prototype.addSeconds=function(t,n,i,s,a){for(n&&(this.second+=Math.floor((86399-(this.hour*3600+this.minute*60+this.second))/t)*t);;){this.second+=t;var o=Xu(this.second,60),u=o.div,l=o.mod;if(u&&(this.second=l,this.addMinutes(u,!1,i,s)),(Zt(i)||ge(i,this.hour))&&(Zt(s)||ge(s,this.minute))&&(Zt(a)||ge(a,this.second)))break}},e.prototype.fixDay=function(){if(!(this.day<=28)){var t=wm(this.year,this.month-1)[1];if(!(this.day<=t))for(;this.day>t;){if(this.day-=t,++this.month,this.month===13&&(this.month=1,++this.year,this.year>Zu))return;t=wm(this.year,this.month-1)[1]}}},e.prototype.add=function(t,n){var i=t.freq,s=t.interval,a=t.wkst,o=t.byhour,u=t.byminute,l=t.bysecond;switch(i){case de.YEARLY:return this.addYears(s);case de.MONTHLY:return this.addMonths(s);case de.WEEKLY:return this.addWeekly(s,a);case de.DAILY:return this.addDaily(s);case de.HOURLY:return this.addHours(s,n,o);case de.MINUTELY:return this.addMinutes(s,n,o,u);case de.SECONDLY:return this.addSeconds(s,n,o,u,l)}},e}(Es);function Om(r){for(var e=[],t=Object.keys(r),n=0,i=t;n<i.length;n++){var s=i[n];ge(W_,s)||e.push(s),vm(r[s])&&!Ri(r[s])&&e.push(s)}if(e.length)throw new Error("Invalid options: "+e.join(", "));return yt({},r)}function L_(r){var e=yt(yt({},wo),Om(r));if(Ie(e.byeaster)&&(e.freq=z.YEARLY),!(Ie(e.freq)&&z.FREQUENCIES[e.freq]))throw new Error("Invalid frequency: ".concat(e.freq," ").concat(r.freq));if(e.dtstart||(e.dtstart=new Date(new Date().setMilliseconds(0))),Ie(e.wkst)?Xt(e.wkst)||(e.wkst=e.wkst.weekday):e.wkst=z.MO.weekday,Ie(e.bysetpos)){Xt(e.bysetpos)&&(e.bysetpos=[e.bysetpos]);for(var t=0;t<e.bysetpos.length;t++){var n=e.bysetpos[t];if(n===0||!(n>=-366&&n<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(Boolean(e.byweekno)||qe(e.byweekno)||qe(e.byyearday)||Boolean(e.bymonthday)||qe(e.bymonthday)||Ie(e.byweekday)||Ie(e.byeaster)))switch(e.freq){case z.YEARLY:e.bymonth||(e.bymonth=e.dtstart.getUTCMonth()+1),e.bymonthday=e.dtstart.getUTCDate();break;case z.MONTHLY:e.bymonthday=e.dtstart.getUTCDate();break;case z.WEEKLY:e.byweekday=[En(e.dtstart)];break}if(Ie(e.bymonth)&&!gt(e.bymonth)&&(e.bymonth=[e.bymonth]),Ie(e.byyearday)&&!gt(e.byyearday)&&Xt(e.byyearday)&&(e.byyearday=[e.byyearday]),!Ie(e.bymonthday))e.bymonthday=[],e.bynmonthday=[];else if(gt(e.bymonthday)){for(var i=[],s=[],t=0;t<e.bymonthday.length;t++){var n=e.bymonthday[t];n>0?i.push(n):n<0&&s.push(n)}e.bymonthday=i,e.bynmonthday=s}else e.bymonthday<0?(e.bynmonthday=[e.bymonthday],e.bymonthday=[]):(e.bynmonthday=[],e.bymonthday=[e.bymonthday]);if(Ie(e.byweekno)&&!gt(e.byweekno)&&(e.byweekno=[e.byweekno]),!Ie(e.byweekday))e.bynweekday=null;else if(Xt(e.byweekday))e.byweekday=[e.byweekday],e.bynweekday=null;else if(_m(e.byweekday))e.byweekday=[Ke.fromStr(e.byweekday).weekday],e.bynweekday=null;else if(e.byweekday instanceof Ke)!e.byweekday.n||e.freq>z.MONTHLY?(e.byweekday=[e.byweekday.weekday],e.bynweekday=null):(e.bynweekday=[[e.byweekday.weekday,e.byweekday.n]],e.byweekday=null);else{for(var a=[],o=[],t=0;t<e.byweekday.length;t++){var u=e.byweekday[t];if(Xt(u)){a.push(u);continue}else if(_m(u)){a.push(Ke.fromStr(u).weekday);continue}!u.n||e.freq>z.MONTHLY?a.push(u.weekday):o.push([u.weekday,u.n])}e.byweekday=qe(a)?a:null,e.bynweekday=qe(o)?o:null}return Ie(e.byhour)?Xt(e.byhour)&&(e.byhour=[e.byhour]):e.byhour=e.freq<z.HOURLY?[e.dtstart.getUTCHours()]:null,Ie(e.byminute)?Xt(e.byminute)&&(e.byminute=[e.byminute]):e.byminute=e.freq<z.MINUTELY?[e.dtstart.getUTCMinutes()]:null,Ie(e.bysecond)?Xt(e.bysecond)&&(e.bysecond=[e.bysecond]):e.bysecond=e.freq<z.SECONDLY?[e.dtstart.getUTCSeconds()]:null,{parsedOptions:e}}function U_(r){var e=r.dtstart.getTime()%1e3;if(!vo(r.freq))return[];var t=[];return r.byhour.forEach(function(n){r.byminute.forEach(function(i){r.bysecond.forEach(function(s){t.push(new Es(n,i,s,e))})})}),t}function Eo(r){var e=r.split(`
`).map(MP).filter(function(t){return t!==null});return yt(yt({},e[0]),e[1])}function ko(r){var e={},t=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(r);if(!t)return e;var n=t[1],i=t[2];return n&&(e.tzid=n),e.dtstart=To(i),e}function MP(r){if(r=r.replace(/^\s+|\s+$/,""),!r.length)return null;var e=/^([A-Z]+?)[:;]/.exec(r.toUpperCase());if(!e)return q_(r);var t=e[1];switch(t.toUpperCase()){case"RRULE":case"EXRULE":return q_(r);case"DTSTART":return ko(r);default:throw new Error("Unsupported RFC prop ".concat(t," in ").concat(r))}}function q_(r){var e=r.replace(/^RRULE:/i,""),t=ko(e),n=r.replace(/^(?:RRULE|EXRULE):/i,"").split(";");return n.forEach(function(i){var s=i.split("="),a=s[0],o=s[1];switch(a.toUpperCase()){case"FREQ":t.freq=de[o.toUpperCase()];break;case"WKST":t.wkst=br[o.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var u=CP(o),l=a.toLowerCase();t[l]=u;break;case"BYWEEKDAY":case"BYDAY":t.byweekday=AP(o);break;case"DTSTART":case"TZID":var c=ko(r);t.tzid=c.tzid,t.dtstart=c.dtstart;break;case"UNTIL":t.until=To(o);break;case"BYEASTER":t.byeaster=Number(o);break;default:throw new Error("Unknown RRULE property '"+a+"'")}}),t}function CP(r){if(r.indexOf(",")!==-1){var e=r.split(",");return e.map($_)}return $_(r)}function $_(r){return/^[+-]?\d+$/.test(r)?Number(r):r}function AP(r){var e=r.split(",");return e.map(function(t){if(t.length===2)return br[t];var n=t.match(/^([+-]?\d{1,2})([A-Z]{2})$/);if(!n||n.length<3)throw new SyntaxError("Invalid weekday string: ".concat(t));var i=Number(n[1]),s=n[2],a=br[s].weekday;return new Ke(a,i)})}var Ci=function(){function r(e,t){if(isNaN(e.getTime()))throw new RangeError("Invalid date passed to DateWithZone");this.date=e,this.tzid=t}return Object.defineProperty(r.prototype,"isUTC",{get:function(){return!this.tzid||this.tzid.toUpperCase()==="UTC"},enumerable:!1,configurable:!0}),r.prototype.toString=function(){var e=vs(this.date.getTime(),this.isUTC);return this.isUTC?":".concat(e):";TZID=".concat(this.tzid,":").concat(e)},r.prototype.getTime=function(){return this.date.getTime()},r.prototype.rezonedDate=function(){return this.isUTC?this.date:C_(this.date,this.tzid)},r}();function So(r){for(var e=[],t="",n=Object.keys(r),i=Object.keys(wo),s=0;s<n.length;s++)if(n[s]!=="tzid"&&!!ge(i,n[s])){var a=n[s].toUpperCase(),o=r[n[s]],u="";if(!(!Ie(o)||gt(o)&&!o.length)){switch(a){case"FREQ":u=z.FREQUENCIES[r.freq];break;case"WKST":Xt(o)?u=new Ke(o).toString():u=o.toString();break;case"BYWEEKDAY":a="BYDAY",u=S_(o).map(function(m){return m instanceof Ke?m:gt(m)?new Ke(m[0],m[1]):new Ke(m)}).toString();break;case"DTSTART":t=PP(o,r.tzid);break;case"UNTIL":u=vs(o,!r.tzid);break;default:if(gt(o)){for(var l=[],c=0;c<o.length;c++)l[c]=String(o[c]);u=l.toString()}else u=String(o)}u&&e.push([a,u])}}var d=e.map(function(m){var g=m[0],b=m[1];return"".concat(g,"=").concat(b.toString())}).join(";"),p="";return d!==""&&(p="RRULE:".concat(d)),[t,p].filter(function(m){return!!m}).join(`
`)}function PP(r,e){return r?"DTSTART"+new Ci(new Date(r),e).toString():""}function NP(r,e){return Array.isArray(r)?!Array.isArray(e)||r.length!==e.length?!1:r.every(function(t,n){return t.getTime()===e[n].getTime()}):r instanceof Date?e instanceof Date&&r.getTime()===e.getTime():r===e}var j_=function(){function r(){this.all=!1,this.before=[],this.after=[],this.between=[]}return r.prototype._cacheAdd=function(e,t,n){t&&(t=t instanceof Date?tl(t):km(t)),e==="all"?this.all=t:(n._value=t,this[e].push(n))},r.prototype._cacheGet=function(e,t){var n=!1,i=t?Object.keys(t):[],s=function(c){for(var d=0;d<i.length;d++){var p=i[d];if(!NP(t[p],c[p]))return!0}return!1},a=this[e];if(e==="all")n=this.all;else if(gt(a))for(var o=0;o<a.length;o++){var u=a[o];if(!(i.length&&s(u))){n=u._value;break}}if(!n&&this.all){for(var l=new On(e,t),o=0;o<this.all.length&&l.accept(this.all[o]);o++);n=l.getValue(),this._cacheAdd(e,n,t)}return gt(n)?km(n):n instanceof Date?tl(n):n},r}();var G_=L(L(L(L(L(L(L(L(L(L(L(L(L([],pe(1,31),!0),pe(2,28),!0),pe(3,31),!0),pe(4,30),!0),pe(5,31),!0),pe(6,30),!0),pe(7,31),!0),pe(8,31),!0),pe(9,30),!0),pe(10,31),!0),pe(11,30),!0),pe(12,31),!0),pe(1,7),!0),Y_=L(L(L(L(L(L(L(L(L(L(L(L(L([],pe(1,31),!0),pe(2,29),!0),pe(3,31),!0),pe(4,30),!0),pe(5,31),!0),pe(6,30),!0),pe(7,31),!0),pe(8,31),!0),pe(9,30),!0),pe(10,31),!0),pe(11,30),!0),pe(12,31),!0),pe(1,7),!0),IP=yr(1,29),FP=yr(1,30),ei=yr(1,31),_t=yr(1,32),B_=L(L(L(L(L(L(L(L(L(L(L(L(L([],_t,!0),FP,!0),_t,!0),ei,!0),_t,!0),ei,!0),_t,!0),_t,!0),ei,!0),_t,!0),ei,!0),_t,!0),_t.slice(0,7),!0),H_=L(L(L(L(L(L(L(L(L(L(L(L(L([],_t,!0),IP,!0),_t,!0),ei,!0),_t,!0),ei,!0),_t,!0),_t,!0),ei,!0),_t,!0),ei,!0),_t,!0),_t.slice(0,7),!0),LP=yr(-28,0),UP=yr(-29,0),ti=yr(-30,0),vt=yr(-31,0),V_=L(L(L(L(L(L(L(L(L(L(L(L(L([],vt,!0),UP,!0),vt,!0),ti,!0),vt,!0),ti,!0),vt,!0),vt,!0),ti,!0),vt,!0),ti,!0),vt,!0),vt.slice(0,7),!0),z_=L(L(L(L(L(L(L(L(L(L(L(L(L([],vt,!0),LP,!0),vt,!0),ti,!0),vt,!0),ti,!0),vt,!0),vt,!0),ti,!0),vt,!0),ti,!0),vt,!0),vt.slice(0,7),!0),K_=[0,31,60,91,121,152,182,213,244,274,305,335,366],Q_=[0,31,59,90,120,151,181,212,243,273,304,334,365],Dm=function(){for(var r=[],e=0;e<55;e++)r=r.concat(yr(7));return r}();function X_(r,e){var t=Zr(r,1,1),n=_s(r)?366:365,i=_s(r+1)?366:365,s=bo(t),a=En(t),o=yt(yt({yearlen:n,nextyearlen:i,yearordinal:s,yearweekday:a},WP(r)),{wnomask:null});if(Zt(e.byweekno))return o;o.wnomask=pe(0,n+7);var u,l,c=u=Tt(7-a+e.wkst,7);c>=4?(c=0,l=o.yearlen+Tt(a-e.wkst,7)):l=n-c;for(var d=Math.floor(l/7),p=Tt(l,7),m=Math.floor(d+p/4),g=0;g<e.byweekno.length;g++){var b=e.byweekno[g];if(b<0&&(b+=m+1),b>0&&b<=m){var S=void 0;b>1?(S=c+(b-1)*7,c!==u&&(S-=7-u)):S=c;for(var E=0;E<7&&(o.wnomask[S]=1,S++,o.wdaymask[S]!==e.wkst);E++);}}if(ge(e.byweekno,1)){var S=c+m*7;if(c!==u&&(S-=7-u),S<n)for(var g=0;g<7&&(o.wnomask[S]=1,S+=1,o.wdaymask[S]!==e.wkst);g++);}if(c){var _=void 0;if(ge(e.byweekno,-1))_=-1;else{var R=En(Zr(r-1,1,1)),j=Tt(7-R.valueOf()+e.wkst,7),U=_s(r-1)?366:365,ne=void 0;j>=4?(j=0,ne=U+Tt(R-e.wkst,7)):ne=n-c,_=Math.floor(52+Tt(ne,7)/4)}if(ge(e.byweekno,_))for(var S=0;S<c;S++)o.wnomask[S]=1}return o}function WP(r){var e=_s(r)?366:365,t=Zr(r,1,1),n=En(t);return e===365?{mmask:G_,mdaymask:H_,nmdaymask:z_,wdaymask:Dm.slice(n),mrange:Q_}:{mmask:Y_,mdaymask:B_,nmdaymask:V_,wdaymask:Dm.slice(n),mrange:K_}}function Z_(r,e,t,n,i,s){var a={lastyear:r,lastmonth:e,nwdaymask:[]},o=[];if(s.freq===z.YEARLY)if(Zt(s.bymonth))o=[[0,t]];else for(var u=0;u<s.bymonth.length;u++)e=s.bymonth[u],o.push(n.slice(e-1,e+1));else s.freq===z.MONTHLY&&(o=[n.slice(e-1,e+1)]);if(Zt(o))return a;a.nwdaymask=pe(0,t);for(var u=0;u<o.length;u++)for(var l=o[u],c=l[0],d=l[1]-1,p=0;p<s.bynweekday.length;p++){var m=void 0,g=s.bynweekday[p],b=g[0],S=g[1];S<0?(m=d+(S+1)*7,m-=Tt(i[m]-b,7)):(m=c+(S-1)*7,m+=Tt(7-i[m]+b,7)),c<=m&&m<=d&&(a.nwdaymask[m]=1)}return a}function J_(r,e){e===void 0&&(e=0);var t=r%19,n=Math.floor(r/100),i=r%100,s=Math.floor(n/4),a=n%4,o=Math.floor((n+8)/25),u=Math.floor((n-o+1)/3),l=Math.floor(19*t+n-s-u+15)%30,c=Math.floor(i/4),d=i%4,p=Math.floor(32+2*a+2*c-l-d)%7,m=Math.floor((t+11*l+22*p)/451),g=Math.floor((l+p-7*m+114)/31),b=(l+p-7*m+114)%31+1,S=Date.UTC(r,g-1,b+e),E=Date.UTC(r,0,1);return[Math.ceil((S-E)/(1e3*60*60*24))]}var qP=function(){function r(e){this.options=e}return r.prototype.rebuild=function(e,t){var n=this.options;if(e!==this.lastyear&&(this.yearinfo=X_(e,n)),qe(n.bynweekday)&&(t!==this.lastmonth||e!==this.lastyear)){var i=this.yearinfo,s=i.yearlen,a=i.mrange,o=i.wdaymask;this.monthinfo=Z_(e,t,s,a,o,n)}Ie(n.byeaster)&&(this.eastermask=J_(e,n.byeaster))},Object.defineProperty(r.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!1,configurable:!0}),r.prototype.ydayset=function(){return[yr(this.yearlen),0,this.yearlen]},r.prototype.mdayset=function(e,t){for(var n=this.mrange[t-1],i=this.mrange[t],s=pe(null,this.yearlen),a=n;a<i;a++)s[a]=a;return[s,n,i]},r.prototype.wdayset=function(e,t,n){for(var i=pe(null,this.yearlen+7),s=bo(Zr(e,t,n))-this.yearordinal,a=s,o=0;o<7&&(i[s]=s,++s,this.wdaymask[s]!==this.options.wkst);o++);return[i,a,s]},r.prototype.ddayset=function(e,t,n){var i=pe(null,this.yearlen),s=bo(Zr(e,t,n))-this.yearordinal;return i[s]=s,[i,s,s+1]},r.prototype.htimeset=function(e,t,n,i){var s=this,a=[];return this.options.byminute.forEach(function(o){a=a.concat(s.mtimeset(e,o,n,i))}),Sn(a),a},r.prototype.mtimeset=function(e,t,n,i){var s=this.options.bysecond.map(function(a){return new Es(e,t,a,i)});return Sn(s),s},r.prototype.stimeset=function(e,t,n,i){return[new Es(e,t,n,i)]},r.prototype.getdayset=function(e){switch(e){case de.YEARLY:return this.ydayset.bind(this);case de.MONTHLY:return this.mdayset.bind(this);case de.WEEKLY:return this.wdayset.bind(this);case de.DAILY:return this.ddayset.bind(this);default:return this.ddayset.bind(this)}},r.prototype.gettimeset=function(e){switch(e){case de.HOURLY:return this.htimeset.bind(this);case de.MINUTELY:return this.mtimeset.bind(this);case de.SECONDLY:return this.stimeset.bind(this)}},r}(),ev=qP;function tv(r,e,t,n,i,s){for(var a=[],o=0;o<r.length;o++){var u=void 0,l=void 0,c=r[o];c<0?(u=Math.floor(c/e.length),l=Tt(c,e.length)):(u=Math.floor((c-1)/e.length),l=Tt(c-1,e.length));for(var d=[],p=t;p<n;p++){var m=s[p];!Ie(m)||d.push(m)}var g=void 0;u<0?g=d.slice(u)[0]:g=d[u];var b=e[l],S=Ju(i.yearordinal+g),E=el(S,b);ge(a,E)||a.push(E)}return Sn(a),a}function rl(r,e){var t=e.dtstart,n=e.freq,i=e.interval,s=e.until,a=e.bysetpos,o=e.count;if(o===0||i===0)return Dn(r);var u=F_.fromDate(t),l=new ev(e);l.rebuild(u.year,u.month);for(var c=GP(l,u,e);;){var d=l.getdayset(n)(u.year,u.month,u.day),p=d[0],m=d[1],g=d[2],b=jP(p,m,g,l,e);if(qe(a))for(var S=tv(a,c,m,g,l,p),E=0;E<S.length;E++){var _=S[E];if(s&&_>s)return Dn(r);if(_>=t){var R=rv(_,e);if(!r.accept(R)||o&&(--o,!o))return Dn(r)}}else for(var E=m;E<g;E++){var j=p[E];if(!!Ie(j))for(var U=Ju(l.yearordinal+j),ne=0;ne<c.length;ne++){var V=c[ne],_=el(U,V);if(s&&_>s)return Dn(r);if(_>=t){var R=rv(_,e);if(!r.accept(R)||o&&(--o,!o))return Dn(r)}}}if(e.interval===0||(u.add(e,b),u.year>Zu))return Dn(r);vo(n)||(c=l.gettimeset(n)(u.hour,u.minute,u.second,0)),l.rebuild(u.year,u.month)}}function $P(r,e,t){var n=t.bymonth,i=t.byweekno,s=t.byweekday,a=t.byeaster,o=t.bymonthday,u=t.bynmonthday,l=t.byyearday;return qe(n)&&!ge(n,r.mmask[e])||qe(i)&&!r.wnomask[e]||qe(s)&&!ge(s,r.wdaymask[e])||qe(r.nwdaymask)&&!r.nwdaymask[e]||a!==null&&!ge(r.eastermask,e)||(qe(o)||qe(u))&&!ge(o,r.mdaymask[e])&&!ge(u,r.nmdaymask[e])||qe(l)&&(e<r.yearlen&&!ge(l,e+1)&&!ge(l,-r.yearlen+e)||e>=r.yearlen&&!ge(l,e+1-r.yearlen)&&!ge(l,-r.nextyearlen+e-r.yearlen))}function rv(r,e){return new Ci(r,e.tzid).rezonedDate()}function Dn(r){return r.getValue()}function jP(r,e,t,n,i){for(var s=!1,a=e;a<t;a++){var o=r[a];s=$P(n,o,i),s&&(r[o]=null)}return s}function GP(r,e,t){var n=t.freq,i=t.byhour,s=t.byminute,a=t.bysecond;return vo(n)?U_(t):n>=z.HOURLY&&qe(i)&&!ge(i,e.hour)||n>=z.MINUTELY&&qe(s)&&!ge(s,e.minute)||n>=z.SECONDLY&&qe(a)&&!ge(a,e.second)?[]:r.gettimeset(n)(e.hour,e.minute,e.second,e.millisecond)}var br={MO:new Ke(0),TU:new Ke(1),WE:new Ke(2),TH:new Ke(3),FR:new Ke(4),SA:new Ke(5),SU:new Ke(6)},wo={freq:de.YEARLY,dtstart:null,interval:1,wkst:br.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},W_=Object.keys(wo),z=function(){function r(e,t){e===void 0&&(e={}),t===void 0&&(t=!1),this._cache=t?null:new j_,this.origOptions=Om(e);var n=L_(e).parsedOptions;this.options=n}return r.parseText=function(e,t){return _o(e,t)},r.fromText=function(e,t){return P_(e,t)},r.fromString=function(e){return new r(r.parseString(e)||void 0)},r.prototype._iter=function(e){return rl(e,this.options)},r.prototype._cacheGet=function(e,t){return this._cache?this._cache._cacheGet(e,t):!1},r.prototype._cacheAdd=function(e,t,n){if(!!this._cache)return this._cache._cacheAdd(e,t,n)},r.prototype.all=function(e){if(e)return this._iter(new Sm("all",{},e));var t=this._cacheGet("all");return t===!1&&(t=this._iter(new On("all",{})),this._cacheAdd("all",t)),t},r.prototype.between=function(e,t,n,i){if(n===void 0&&(n=!1),!Ri(e)||!Ri(t))throw new Error("Invalid date passed in to RRule.between");var s={before:t,after:e,inc:n};if(i)return this._iter(new Sm("between",s,i));var a=this._cacheGet("between",s);return a===!1&&(a=this._iter(new On("between",s)),this._cacheAdd("between",a,s)),a},r.prototype.before=function(e,t){if(t===void 0&&(t=!1),!Ri(e))throw new Error("Invalid date passed in to RRule.before");var n={dt:e,inc:t},i=this._cacheGet("before",n);return i===!1&&(i=this._iter(new On("before",n)),this._cacheAdd("before",i,n)),i},r.prototype.after=function(e,t){if(t===void 0&&(t=!1),!Ri(e))throw new Error("Invalid date passed in to RRule.after");var n={dt:e,inc:t},i=this._cacheGet("after",n);return i===!1&&(i=this._iter(new On("after",n)),this._cacheAdd("after",i,n)),i},r.prototype.count=function(){return this.all().length},r.prototype.toString=function(){return So(this.origOptions)},r.prototype.toText=function(e,t,n){return N_(this,e,t,n)},r.prototype.isFullyConvertibleToText=function(){return I_(this)},r.prototype.clone=function(){return new r(this.origOptions)},r.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],r.YEARLY=de.YEARLY,r.MONTHLY=de.MONTHLY,r.WEEKLY=de.WEEKLY,r.DAILY=de.DAILY,r.HOURLY=de.HOURLY,r.MINUTELY=de.MINUTELY,r.SECONDLY=de.SECONDLY,r.MO=br.MO,r.TU=br.TU,r.WE=br.WE,r.TH=br.TH,r.FR=br.FR,r.SA=br.SA,r.SU=br.SU,r.parseString=Eo,r.optionsToString=So,r}();function nv(r,e,t,n,i,s){var a={},o=r.accept;function u(p,m){t.forEach(function(g){g.between(p,m,!0).forEach(function(b){a[Number(b)]=!0})})}i.forEach(function(p){var m=new Ci(p,s).rezonedDate();a[Number(m)]=!0}),r.accept=function(p){var m=Number(p);return isNaN(m)?o.call(this,p):!a[m]&&(u(new Date(m-1),new Date(m+1)),!a[m])?(a[m]=!0,o.call(this,p)):!0},r.method==="between"&&(u(r.args.after,r.args.before),r.accept=function(p){var m=Number(p);return a[m]?!0:(a[m]=!0,o.call(this,p))});for(var l=0;l<n.length;l++){var c=new Ci(n[l],s).rezonedDate();if(!r.accept(new Date(c.getTime())))break}e.forEach(function(p){rl(r,p.options)});var d=r._result;switch(Sn(d),r.method){case"all":case"between":return d;case"before":return d.length&&d[d.length-1]||null;case"after":default:return d.length&&d[0]||null}}var iv={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function YP(r,e){var t=[],n=[],i=[],s=[],a=ko(r),o=a.dtstart,u=a.tzid,l=KP(r,e.unfold);return l.forEach(function(c){var d;if(!!c){var p=zP(c),m=p.name,g=p.parms,b=p.value;switch(m.toUpperCase()){case"RRULE":if(g.length)throw new Error("unsupported RRULE parm: ".concat(g.join(",")));t.push(Eo(c));break;case"RDATE":var S=(d=/RDATE(?:;TZID=([^:=]+))?/i.exec(c))!==null&&d!==void 0?d:[],E=S[1];E&&!u&&(u=E),n=n.concat(sv(b,g));break;case"EXRULE":if(g.length)throw new Error("unsupported EXRULE parm: ".concat(g.join(",")));i.push(Eo(b));break;case"EXDATE":s=s.concat(sv(b,g));break;case"DTSTART":break;default:throw new Error("unsupported property: "+m)}}}),{dtstart:o,tzid:u,rrulevals:t,rdatevals:n,exrulevals:i,exdatevals:s}}function BP(r,e){var t=YP(r,e),n=t.rrulevals,i=t.rdatevals,s=t.exrulevals,a=t.exdatevals,o=t.dtstart,u=t.tzid,l=e.cache===!1;if(e.compatible&&(e.forceset=!0,e.unfold=!0),e.forceset||n.length>1||i.length||s.length||a.length){var c=new Rm(l);return c.dtstart(o),c.tzid(u||void 0),n.forEach(function(p){c.rrule(new z(xm(p,o,u),l))}),i.forEach(function(p){c.rdate(p)}),s.forEach(function(p){c.exrule(new z(xm(p,o,u),l))}),a.forEach(function(p){c.exdate(p)}),e.compatible&&e.dtstart&&c.rdate(o),c}var d=n[0]||{};return new z(xm(d,d.dtstart||e.dtstart||o,d.tzid||e.tzid||u),l)}function nl(r,e){return e===void 0&&(e={}),BP(r,HP(e))}function xm(r,e,t){return yt(yt({},r),{dtstart:e,tzid:t})}function HP(r){var e=[],t=Object.keys(r),n=Object.keys(iv);if(t.forEach(function(i){ge(n,i)||e.push(i)}),e.length)throw new Error("Invalid options: "+e.join(", "));return yt(yt({},iv),r)}function VP(r){if(r.indexOf(":")===-1)return{name:"RRULE",value:r};var e=O_(r,":",1),t=e[0],n=e[1];return{name:t,value:n}}function zP(r){var e=VP(r),t=e.name,n=e.value,i=t.split(";");if(!i)throw new Error("empty property name");return{name:i[0].toUpperCase(),parms:i.slice(1),value:n}}function KP(r,e){if(e===void 0&&(e=!1),r=r&&r.trim(),!r)throw new Error("Invalid empty string");if(!e)return r.split(/\s/);for(var t=r.split(`
`),n=0;n<t.length;){var i=t[n]=t[n].replace(/\s+$/g,"");i?n>0&&i[0]===" "?(t[n-1]+=i.slice(1),t.splice(n,1)):n+=1:t.splice(n,1)}return t}function QP(r){r.forEach(function(e){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(e))throw new Error("unsupported RDATE/EXDATE parm: "+e)})}function sv(r,e){return QP(e),r.split(",").map(function(t){return To(t)})}function av(r){var e=this;return function(t){if(t!==void 0&&(e["_".concat(r)]=t),e["_".concat(r)]!==void 0)return e["_".concat(r)];for(var n=0;n<e._rrule.length;n++){var i=e._rrule[n].origOptions[r];if(i)return i}}}var Rm=function(r){ws(e,r);function e(t){t===void 0&&(t=!1);var n=r.call(this,{},t)||this;return n.dtstart=av.apply(n,["dtstart"]),n.tzid=av.apply(n,["tzid"]),n._rrule=[],n._rdate=[],n._exrule=[],n._exdate=[],n}return e.prototype._iter=function(t){return nv(t,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},e.prototype.rrule=function(t){ov(t,this._rrule)},e.prototype.exrule=function(t){ov(t,this._exrule)},e.prototype.rdate=function(t){uv(t,this._rdate)},e.prototype.exdate=function(t){uv(t,this._exdate)},e.prototype.rrules=function(){return this._rrule.map(function(t){return nl(t.toString())})},e.prototype.exrules=function(){return this._exrule.map(function(t){return nl(t.toString())})},e.prototype.rdates=function(){return this._rdate.map(function(t){return new Date(t.getTime())})},e.prototype.exdates=function(){return this._exdate.map(function(t){return new Date(t.getTime())})},e.prototype.valueOf=function(){var t=[];return!this._rrule.length&&this._dtstart&&(t=t.concat(So({dtstart:this._dtstart}))),this._rrule.forEach(function(n){t=t.concat(n.toString().split(`
`))}),this._exrule.forEach(function(n){t=t.concat(n.toString().split(`
`).map(function(i){return i.replace(/^RRULE:/,"EXRULE:")}).filter(function(i){return!/^DTSTART/.test(i)}))}),this._rdate.length&&t.push(lv("RDATE",this._rdate,this.tzid())),this._exdate.length&&t.push(lv("EXDATE",this._exdate,this.tzid())),t},e.prototype.toString=function(){return this.valueOf().join(`
`)},e.prototype.clone=function(){var t=new e(!!this._cache);return this._rrule.forEach(function(n){return t.rrule(n.clone())}),this._exrule.forEach(function(n){return t.exrule(n.clone())}),this._rdate.forEach(function(n){return t.rdate(new Date(n.getTime()))}),this._exdate.forEach(function(n){return t.exdate(new Date(n.getTime()))}),t},e}(z);function ov(r,e){if(!(r instanceof z))throw new TypeError(String(r)+" is not RRule instance");ge(e.map(String),String(r))||e.push(r)}function uv(r,e){if(!(r instanceof Date))throw new TypeError(String(r)+" is not Date instance");ge(e.map(Number),Number(r))||(e.push(r),Sn(e))}function lv(r,e,t){var n=!t||t.toUpperCase()==="UTC",i=n?"".concat(r,":"):"".concat(r,";TZID=").concat(t,":"),s=e.map(function(a){return vs(a.valueOf(),n)}).join(",");return"".concat(i).concat(s)}var Mm=ga(Je());function Tr(r,e){return r!==null&&e===null?-1:r===null&&e!==null?1:r!==null&&e!==null?r.isValid()&&!e.isValid()?1:!r.isValid()&&e.isValid()?-1:r.isAfter(e)?1:r.isBefore(e)?-1:0:0}function XP(r,e,t=void 0){if(!e)return`<i>no ${r} date</i>`;let n=Mm.parseDate(e,t,{forwardDate:t!=null});return n!==null?window.moment(n).format("YYYY-MM-DD"):`<i>invalid ${r} date</i>`}function cv(r,e,t){return XP(r,e,t?new Date:void 0)}function Ai(r,e){let t=null,n=Mm.parseDate(r,new Date,{forwardDate:e});return n!==null&&(t=window.moment(n)),t}var ct=class{constructor({rrule:e,baseOnToday:t,referenceDate:n,startDate:i,scheduledDate:s,dueDate:a}){this.rrule=e,this.baseOnToday=t,this.referenceDate=n,this.startDate=i,this.scheduledDate=s,this.dueDate=a}static fromText({recurrenceRuleText:e,startDate:t,scheduledDate:n,dueDate:i}){try{let s=e.match(/^([a-zA-Z0-9, !]+?)( when done)?$/i);if(s==null)return null;let a=s[1].trim(),o=s[2]!==void 0,u=z.parseText(a);if(u!==null){let l=null;i?l=window.moment(i):n?l=window.moment(n):t&&(l=window.moment(t)),!o&&l!==null?u.dtstart=window.moment(l).startOf("day").utc(!0).toDate():u.dtstart=window.moment().startOf("day").utc(!0).toDate();let c=new z(u);return new ct({rrule:c,baseOnToday:o,referenceDate:l,startDate:t,scheduledDate:n,dueDate:i})}}catch(s){s instanceof Error&&console.log(s.message)}return null}toText(){let e=this.rrule.toText();return this.baseOnToday&&(e+=" when done"),e}next(e=window.moment()){let t=this.nextReferenceDate(e);if(t!==null){let n=null,i=null,s=null;if(this.referenceDate){if(this.startDate){let a=window.moment.duration(this.startDate.diff(this.referenceDate));n=window.moment(t),n.add(Math.round(a.asDays()),"days")}if(this.scheduledDate){let a=window.moment.duration(this.scheduledDate.diff(this.referenceDate));i=window.moment(t),i.add(Math.round(a.asDays()),"days")}if(this.dueDate){let a=window.moment.duration(this.dueDate.diff(this.referenceDate));s=window.moment(t),s.add(Math.round(a.asDays()),"days")}}return{startDate:n,scheduledDate:i,dueDate:s}}return null}identicalTo(e){return this.baseOnToday!==e.baseOnToday||Tr(this.startDate,e.startDate)!==0||Tr(this.scheduledDate,e.scheduledDate)!==0||Tr(this.dueDate,e.dueDate)!==0?!1:this.toText()===e.toText()}nextReferenceDate(e){return this.baseOnToday?this.nextReferenceDateFromToday(e).toDate():this.nextReferenceDateFromOriginalReferenceDate().toDate()}nextReferenceDateFromToday(e){let t=new z(be(Q({},this.rrule.origOptions),{dtstart:e.startOf("day").utc(!0).toDate()}));return this.nextAfter(e.endOf("day"),t)}nextReferenceDateFromOriginalReferenceDate(){var t;let e=window.moment((t=this.referenceDate)!=null?t:void 0).endOf("day");return this.nextAfter(e,this.rrule)}nextAfter(e,t){e.utc(!0);let n=window.moment(t.after(e.toDate())),i=this.toText(),s=i.match(/every( \d+)? month(s)?(.*)?/);s!==null&&(i.includes(" on ")||(n=ct.nextAfterMonths(e,n,t,s[1])));let a=i.match(/every( \d+)? year(s)?(.*)?/);return a!==null&&(n=ct.nextAfterYears(e,n,t,a[1])),ct.addTimezone(n)}static nextAfterMonths(e,t,n,i){let s=1;for(i!==void 0&&(s=Number.parseInt(i.trim(),10));ct.isSkippingTooManyMonths(e,t,s);)t=ct.fromOneDayEarlier(e,n);return t}static isSkippingTooManyMonths(e,t,n){let i=t.month()-e.month();return i+=(t.year()-e.year())*12,i>n}static nextAfterYears(e,t,n,i){let s=1;for(i!==void 0&&(s=Number.parseInt(i.trim(),10));ct.isSkippingTooManyYears(e,t,s);)t=ct.fromOneDayEarlier(e,n);return t}static isSkippingTooManyYears(e,t,n){return t.year()-e.year()>n}static fromOneDayEarlier(e,t){e.subtract(1,"days").endOf("day");let n=t.origOptions;return n.dtstart=e.startOf("day").toDate(),t=new z(n),window.moment(t.after(e.toDate()))}static addTimezone(e){return window.moment.utc(e).local(!0).startOf("day")}};var Ss=(p=>(p.Description="description",p.Id="id",p.DependsOn="dependsOn",p.Priority="priority",p.RecurrenceRule="recurrenceRule",p.CreatedDate="createdDate",p.StartDate="startDate",p.ScheduledDate="scheduledDate",p.DueDate="dueDate",p.CancelledDate="cancelledDate",p.DoneDate="doneDate",p.BlockLink="blockLink",p))(Ss||{}),il=Object.values(Ss),en=class{constructor(){this.visible={};this.tagsVisible=!0;il.forEach(e=>{this.visible[e]=!0})}isShown(e){return this.visible[e]}areTagsShown(){return this.tagsVisible}hide(e){this.visible[e]=!1}setVisibility(e,t){this.visible[e]=t}setTagsVisibility(e){this.tagsVisible=e}get shownComponents(){return il.filter(e=>this.visible[e])}get hiddenComponents(){return il.filter(e=>!this.visible[e])}get toggleableComponents(){return il.filter(e=>e!=="description"&&e!=="blockLink")}toggleVisibilityExceptDescriptionAndBlockLink(){this.toggleableComponents.forEach(e=>{this.visible[e]=!this.visible[e]}),this.setTagsVisibility(!this.areTagsShown())}};var Jt=class{},J=Jt;J.dateFormat="YYYY-MM-DD",J.dateTimeFormat="YYYY-MM-DD HH:mm",J.indentationRegex=/^([\s\t>]*)/,J.listMarkerRegex=/([-*+]|[0-9]+\.)/,J.checkboxRegex=/\[(.)\]/u,J.afterCheckboxRegex=/ *(.*)/u,J.taskRegex=new RegExp(Jt.indentationRegex.source+Jt.listMarkerRegex.source+" +"+Jt.checkboxRegex.source+Jt.afterCheckboxRegex.source,"u"),J.nonTaskRegex=new RegExp(Jt.indentationRegex.source+Jt.listMarkerRegex.source+"? *("+Jt.checkboxRegex.source+")?"+Jt.afterCheckboxRegex.source,"u"),J.listItemRegex=new RegExp(Jt.indentationRegex.source+Jt.listMarkerRegex.source),J.blockLinkRegex=/ \^[a-zA-Z0-9-]+$/u,J.hashTags=/(^|\s)#[^ !@#$%^&*(),.?":{}|<>]+/g,J.hashTagsFromEnd=new RegExp(Jt.hashTags.source+"$");var Pi=/[a-zA-Z0-9-_]+/,Am=new RegExp(Pi.source+"( *, *"+Pi.source+" *)*"),Pm={prioritySymbols:{Highest:"\u{1F53A}",High:"\u23EB",Medium:"\u{1F53C}",Low:"\u{1F53D}",Lowest:"\u23EC",None:""},startDateSymbol:"\u{1F6EB}",createdDateSymbol:"\u2795",scheduledDateSymbol:"\u23F3",dueDateSymbol:"\u{1F4C5}",doneDateSymbol:"\u2705",cancelledDateSymbol:"\u274C",recurrenceSymbol:"\u{1F501}",dependsOnSymbol:"\u26D4",idSymbol:"\u{1F194}",TaskFormatRegularExpressions:{priorityRegex:/([🔺⏫🔼🔽⏬])\uFE0F?$/u,startDateRegex:/🛫 *(\d{4}-\d{2}-\d{2})$/u,createdDateRegex:/➕ *(\d{4}-\d{2}-\d{2})$/u,scheduledDateRegex:/[⏳⌛] *(\d{4}-\d{2}-\d{2})$/u,dueDateRegex:/[📅📆🗓] *(\d{4}-\d{2}-\d{2})$/u,doneDateRegex:/✅ *(\d{4}-\d{2}-\d{2})$/u,cancelledDateRegex:/❌ *(\d{4}-\d{2}-\d{2})$/u,recurrenceRegex:/🔁 ?([a-zA-Z0-9, !]+)$/iu,dependsOnRegex:new RegExp("\u26D4\uFE0F? *("+Am.source+")$","iu"),idRegex:new RegExp("\u{1F194} *("+Pi.source+")$","iu")}};function Cm(r,e,t){return t?r?" "+e:` ${e} ${t}`:""}function Os(r,e,t){return t?r?" "+e:` ${e} ${t.format(J.dateFormat)}`:""}var Ni=class{constructor(e){this.symbols=e}serialize(e){let t=new en,n="",i=!1;for(let s of t.shownComponents)n+=this.componentToString(e,i,s);return n}componentToString(e,t,n){var g;let{prioritySymbols:i,startDateSymbol:s,createdDateSymbol:a,scheduledDateSymbol:o,doneDateSymbol:u,cancelledDateSymbol:l,recurrenceSymbol:c,dueDateSymbol:d,dependsOnSymbol:p,idSymbol:m}=this.symbols;switch(n){case"description":return e.description;case"priority":{let b="";return e.priority==="0"?b=" "+i.Highest:e.priority==="1"?b=" "+i.High:e.priority==="2"?b=" "+i.Medium:e.priority==="4"?b=" "+i.Low:e.priority==="5"&&(b=" "+i.Lowest),b}case"startDate":return Os(t,s,e.startDate);case"createdDate":return Os(t,a,e.createdDate);case"scheduledDate":return e.scheduledDateIsInferred?"":Os(t,o,e.scheduledDate);case"doneDate":return Os(t,u,e.doneDate);case"cancelledDate":return Os(t,l,e.cancelledDate);case"dueDate":return Os(t,d,e.dueDate);case"recurrenceRule":return e.recurrence?Cm(t,c,e.recurrence.toText()):"";case"dependsOn":return e.dependsOn.length===0?"":Cm(t,p,e.dependsOn.join(","));case"id":return Cm(t,m,e.id);case"blockLink":return(g=e.blockLink)!=null?g:"";default:throw new Error(`Don't know how to render task component of type '${n}'`)}}parsePriority(e){let{prioritySymbols:t}=this.symbols;switch(e){case t.Lowest:return"5";case t.Low:return"4";case t.Medium:return"2";case t.High:return"1";case t.Highest:return"0";default:return"3"}}deserialize(e){let{TaskFormatRegularExpressions:t}=this.symbols,n,i="3",s=null,a=null,o=null,u=null,l=null,c=null,d="",p=null,m="",g=[],b="",S=20,E=0;do{n=!1;let _=e.match(t.priorityRegex);_!==null&&(i=this.parsePriority(_[1]),e=e.replace(t.priorityRegex,"").trim(),n=!0);let R=e.match(t.doneDateRegex);R!==null&&(u=window.moment(R[1],J.dateFormat),e=e.replace(t.doneDateRegex,"").trim(),n=!0);let j=e.match(t.cancelledDateRegex);j!==null&&(l=window.moment(j[1],J.dateFormat),e=e.replace(t.cancelledDateRegex,"").trim(),n=!0);let U=e.match(t.dueDateRegex);U!==null&&(o=window.moment(U[1],J.dateFormat),e=e.replace(t.dueDateRegex,"").trim(),n=!0);let ne=e.match(t.scheduledDateRegex);ne!==null&&(a=window.moment(ne[1],J.dateFormat),e=e.replace(t.scheduledDateRegex,"").trim(),n=!0);let V=e.match(t.startDateRegex);V!==null&&(s=window.moment(V[1],J.dateFormat),e=e.replace(t.startDateRegex,"").trim(),n=!0);let G=e.match(t.createdDateRegex);G!==null&&(c=window.moment(G[1],J.dateFormat),e=e.replace(t.createdDateRegex,"").trim(),n=!0);let xe=e.match(t.recurrenceRegex);xe!==null&&(d=xe[1].trim(),e=e.replace(t.recurrenceRegex,"").trim(),n=!0);let Me=e.match(J.hashTagsFromEnd);if(Me!=null){e=e.replace(J.hashTagsFromEnd,"").trim(),n=!0;let O=Me[0].trim();b=b.length>0?[O,b].join(" "):O}let q=e.match(t.idRegex);q!=null&&(e=e.replace(t.idRegex,"").trim(),m=q[1].trim(),n=!0);let $=e.match(t.dependsOnRegex);$!=null&&(e=e.replace(t.dependsOnRegex,"").trim(),g=$[1].replace(/ /g,"").split(",").filter(O=>O!==""),n=!0),E++}while(n&&E<=S);return d.length>0&&(p=ct.fromText({recurrenceRuleText:d,startDate:s,scheduledDate:a,dueDate:o})),b.length>0&&(e+=" "+b),{description:e,priority:i,startDate:s,createdDate:c,scheduledDate:a,dueDate:o,doneDate:u,cancelledDate:l,recurrence:p,id:m,dependsOn:g,tags:oe.extractHashtags(e)}}};function Do(r){let e="",t=!0;for(;t;)e=Math.random().toString(36).substring(2,6+2),r.includes(e)||(t=!1);return e}function sl(r,e){return r.id!==""?r:new oe(be(Q({},r),{id:Do(e)}))}function dv(r,e){let t=r;if(!r.dependsOn.includes(e.id)){let n=[...r.dependsOn,e.id];t=new oe(be(Q({},r),{dependsOn:n}))}return t}function fv(r,e){let t=r;if(r.dependsOn.includes(e.id)){let n=r.dependsOn.filter(i=>i!==e.id);t=new oe(be(Q({},r),{dependsOn:n}))}return t}function Ds(r){return r.replace(/([.*+?^${}()|[\]/\\])/g,"\\$1")}var ri=class{constructor(){this._globalFilter="";this._removeGlobalFilter=!1}static getInstance(){return ri.instance||(ri.instance=new ri),ri.instance}get(){return this._globalFilter}set(e){this._globalFilter=e}reset(){this.set(ri.empty)}isEmpty(){return this.get()===ri.empty}equals(e){return this.get()===e}includedIn(e){let t=this.get();return e.includes(t)}prependTo(e){return this.get()+" "+e}removeAsWordFromDependingOnSettings(e){return this.getRemoveGlobalFilter()?this.removeAsWordFrom(e):e}getRemoveGlobalFilter(){return this._removeGlobalFilter}setRemoveGlobalFilter(e){this._removeGlobalFilter=e}removeAsWordFrom(e){if(this.isEmpty())return e;let t=RegExp("(^|\\s)"+Ds(this.get())+"($|\\s)","ug");return e.search(t)>-1&&(e=e.replace(t,"$1$2").replace("  "," ").trim()),e}removeAsSubstringFrom(e){let t=this.get();return e.replace(t,"").trim()}},ye=ri;ye.empty="";var mv=require("obsidian");var ZP=20;function Ii(r){return ye.getInstance().removeAsWordFrom(r.description)}function JP(r,e){if(r==="")return e;let t=(0,mv.prepareSimpleSearch)(r),n=-4;return e.map(a=>{let o=t(Ii(a));return o&&o.score>n?{item:a,match:o}:null}).filter(Boolean).sort((a,o)=>o.match.score-a.match.score).map(a=>a.item)}function al(r,e,t,n,i){let s=JP(r,e);return s=s.filter(a=>!(a.isDone||a.description.includes("<%")&&a.description.includes("%>")||a.description===(t==null?void 0:t.description)&&a.taskLocation.path===(t==null?void 0:t.taskLocation.path)&&a.originalMarkdown===(t==null?void 0:t.originalMarkdown)||(n==null?void 0:n.includes(a))||(i==null?void 0:i.includes(a)))),t&&s.sort((a,o)=>{let u=a.taskLocation.path===t.taskLocation.path,l=o.taskLocation.path===t.taskLocation.path;return u&&l?Math.abs(a.taskLocation.lineNumber-t.taskLocation.lineNumber)-Math.abs(o.taskLocation.lineNumber-t.taskLocation.lineNumber):u?-1:l?1:0}),s.slice(0,ZP)}var Nm=5,eN=!1;globalThis.SHOW_DEPENDENCY_SUGGESTIONS=eN;function Im(r,e,t){let n=[r.startDateSymbol,r.scheduledDateSymbol,r.dueDateSymbol].join("|");return(i,s,a,o,u)=>{let l=[];return l=l.concat(rN(i,s,a,n,e,t)),l=l.concat(nN(i,s,a,r.recurrenceSymbol,t)),globalThis.SHOW_DEPENDENCY_SUGGESTIONS&&(l=l.concat(iN(i,s,r.idSymbol,o)),l=l.concat(sN(i,s,a,r.dependsOnSymbol,o,u))),l=l.concat(tN(i,s,a,r,t)),l.length>0&&!l.some(c=>c.suggestionType==="match")&&(t||l.unshift({suggestionType:"empty",displayText:"\u23CE",appendText:`
`})),l=l.slice(0,a.autoSuggestMaxItems),l}}function Fm(r,e,t){let n=oN(e.substring(0,t),[["(",")"],["[","]"]])=="("?")":"]",i=r?n+" ":" ",s=r&&e.length>t&&e.charAt(t)===n?1:0;return{postfix:i,insertSkip:s}}function tN(r,e,t,n,i){let s=d=>Object.values(n.prioritySymbols).some(p=>p.length>0&&d.includes(p)),a=[],{postfix:o,insertSkip:u}=Fm(i,r,e);if(r.includes(n.dueDateSymbol)||a.push({displayText:`${n.dueDateSymbol} due date`,appendText:`${n.dueDateSymbol} `}),r.includes(n.startDateSymbol)||a.push({displayText:`${n.startDateSymbol} start date`,appendText:`${n.startDateSymbol} `}),r.includes(n.scheduledDateSymbol)||a.push({displayText:`${n.scheduledDateSymbol} scheduled date`,appendText:`${n.scheduledDateSymbol} `}),globalThis.SHOW_DEPENDENCY_SUGGESTIONS&&(r.includes(n.idSymbol)||a.push({displayText:`${n.idSymbol} Task ID`,appendText:`${n.idSymbol}`}),r.includes(n.dependsOnSymbol)||a.push({displayText:`${n.dependsOnSymbol} Task depends on ID`,appendText:`${n.dependsOnSymbol}`})),!s(r)){let d=n.prioritySymbols,p=["High","Medium","Low","Highest","Lowest"];for(let m=0;m<p.length;m++){let g=p[m],b=d[g];a.push({displayText:i?`${b} priority`:`${b} ${g.toLowerCase()} priority`,appendText:`${b}${o}`,insertSkip:i?u:void 0})}}if(r.includes(n.recurrenceSymbol)||a.push({displayText:`${n.recurrenceSymbol} recurring (repeat)`,appendText:`${n.recurrenceSymbol} `}),!r.includes(n.createdDateSymbol)){let p=Qt.parseDate("today",!0).format(J.dateFormat);a.push({textToMatch:`${n.createdDateSymbol} created`,displayText:`${n.createdDateSymbol} created today (${p})`,appendText:`${n.createdDateSymbol} ${p}`+o,insertSkip:i?u:void 0})}let l=xo(r,/([a-zA-Z'_-]*)/g,e),c=[];if(l&&l.length>0){let d=l[0];if(d.length>=Math.max(1,t.autoSuggestMinMatch)){let p=a.filter(m=>(m.textToMatch||m.displayText).toLowerCase().includes(d.toLowerCase()));for(let m of p){let g=i&&(m.displayText.includes("priority")||m.displayText.includes("created"))?d.length+u:d.length;c.push({suggestionType:"match",displayText:m.displayText,appendText:m.appendText,insertAt:l.index,insertSkip:g})}}}return c.length===0&&t.autoSuggestMinMatch===0?a:c}function rN(r,e,t,n,i,s){let a=["today","tomorrow","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","next week","next month","next year"],{postfix:o,insertSkip:u}=Fm(s,r,e),l=[],c=new RegExp(`(${n})\\s*([0-9a-zA-Z ]*)`,"ug"),d=xo(r,c,e);if(d&&d.length>=2){let p=d[1],m=d[2];if(m.length<t.autoSuggestMinMatch)return[];let g=m&&m.length>1?Qt.parseDate(Ku(m),!0):null;g&&g.isValid()&&l.push({displayText:`${g.format(J.dateFormat)}`,appendText:`${p} ${g.format(J.dateFormat)} `,insertAt:d.index,insertSkip:d[0].length});let b=1,S=a.filter(E=>m&&m.length>=b&&E.toLowerCase().includes(m.toLowerCase())).slice(0,i);S.length===0&&(S=a.slice(0,i));for(let E of S){let R=`${Qt.parseDate(E,!0).format(J.dateFormat)}`,j=s?d[0].length+u:d[0].length;l.push({suggestionType:"match",displayText:`${E} (${R})`,appendText:`${p} ${R}`+o,insertAt:d.index,insertSkip:j})}}return l}function nN(r,e,t,n,i){var d;let s=["every","every day","every week","every month","every month on the","every year","every week on Sunday","every week on Monday","every week on Tuesday","every week on Wednesday","every week on Thursday","every week on Friday","every week on Saturday"],{postfix:a,insertSkip:o}=Fm(i,r,e),u=[],l=new RegExp(`(${n})\\s*([0-9a-zA-Z ]*)`,"ug"),c=xo(r,l,e);if(c&&c.length>=2){let p=c[1],m=c[2];if(m.length<t.autoSuggestMinMatch)return[];if(m.length>0){let E=(d=ct.fromText({recurrenceRuleText:m,startDate:null,scheduledDate:null,dueDate:null}))==null?void 0:d.toText();if(E){let _=`${p} ${E}`+a,R=i?c[0].length+o:c[0].length;if(u.push({suggestionType:"match",displayText:`\u2705 ${E}`,appendText:_,insertAt:c.index,insertSkip:R}),c[0]==_)return[]}}let g=1,b=t.autoSuggestMaxItems/2,S=s.filter(E=>m&&m.length>=g&&E.toLowerCase().includes(m.toLowerCase())).slice(0,b);S.length===0&&m.trim().length===0&&(S=s.slice(0,b));for(let E of S)u.push({suggestionType:"match",displayText:`${E}`,appendText:`${p} ${E} `,insertAt:c.index,insertSkip:c[0].length})}return u}function iN(r,e,t,n){let i=[],s=new RegExp(`(${t})\\s*(${Pi.source})?`,"ug"),a=xo(r,s,e);if(a&&a[0].trim().length<=t.length){let o=Do(n.map(u=>u.id));i.push({suggestionType:"match",displayText:"Auto Generate Unique ID",appendText:`${t} ${o}`,insertAt:a.index,insertSkip:t.length})}return i}function sN(r,e,t,n,i,s){let a=[],o=new RegExp(`(${n})([0-9a-zA-Z-_ ^,]*,)*([0-9a-zA-Z ^,]*)`,"ug"),u=xo(r,o,e);if(u&&u.length>=1){let l=u[2]||"",c=u[3],d=[];if(l){let p=l.split(",").map(m=>m.trim());d=i.filter(m=>m.id&&p.includes(m.id))}if(c.length>=t.autoSuggestMinMatch){let p=al(c.trim(),i,s,[],d);for(let m of p)a.push({suggestionType:"match",displayText:`${m.descriptionWithoutTags} - From: ${m.filename}.md`,appendText:`${n}${l}`,insertAt:u.index,insertSkip:n.length+l.length+c.length,taskItDependsOn:m})}}return a}function xo(r,e,t){let n=r.matchAll(e);for(let i of n)if((i==null?void 0:i.index)&&i.index<t&&t<=i.index+i[0].length)return i}function aN(r,e){if(e.length===0)return!1;let t=Object.fromEntries(e.map(([i,s])=>[i,0])),n=Object.fromEntries(e.map(([i,s])=>[s,i]));for(let i of r)i in t?t[i]++:i in n&&(t[n[i]]=Math.max(0,t[n[i]]-1));return Object.values(t).some(i=>i>0)}function oN(r,e){if(e.length===0)return null;let t=Object.fromEntries(e.map(([s,a])=>[s,0])),n=Object.fromEntries(e.map(([s,a])=>[a,s])),i=[];for(let s=0;s<r.length;s++){let a=r[s];if(a in t)t[a]++,i.push({bracket:a,idx:s});else if(a in n){if(t[n[a]]>=1){for(let o=i.length-1;o>=0;o--)if(i[o].bracket==n[a]){i.splice(o,1);break}}t[n[a]]=Math.max(0,t[n[a]]-1)}}return i.length>0?i[i.length-1].bracket:null}function hv(r,e){return(t,n,i,s,a)=>aN(t.slice(0,n),e)?r(t,n,i,s,a):[]}function gv(r,e,t){let n=ye.getInstance().includedIn(r),i=uN(t,e,n);return typeof i=="boolean"?i:n&&lN(r,e.ch)}function uN(r,e,t){var n,i;return(i=(n=r==null?void 0:r.editorComponent)==null?void 0:n.showTasksPluginAutoSuggest)==null?void 0:i.call(n,e,r,t)}function lN(r,e){if(r.length===0)return!1;let t=oe.extractTaskComponents(r);if(!t)return!1;let n=t.indentation+t.listMarker+" ["+t.status.symbol+"] ";return e>=n.length}function tn(r){let e=["(?:",/(?=[^\]]+\])\[/,"|",/(?=[^)]+\))\(/,")",/ */,r,/ */,/[)\]]/,/(?: *,)?/,/$/].map(t=>t instanceof RegExp?t.source:t).join("");return new RegExp(e,r.flags)}var Lm={prioritySymbols:{Highest:"priority:: highest",High:"priority:: high",Medium:"priority:: medium",Low:"priority:: low",Lowest:"priority:: lowest",None:""},startDateSymbol:"start::",createdDateSymbol:"created::",scheduledDateSymbol:"scheduled::",dueDateSymbol:"due::",doneDateSymbol:"completion::",cancelledDateSymbol:"cancelled::",recurrenceSymbol:"repeat::",idSymbol:"id::",dependsOnSymbol:"dependsOn::",TaskFormatRegularExpressions:{priorityRegex:tn(/priority:: *(highest|high|medium|low|lowest)/),startDateRegex:tn(/start:: *(\d{4}-\d{2}-\d{2})/),createdDateRegex:tn(/created:: *(\d{4}-\d{2}-\d{2})/),scheduledDateRegex:tn(/scheduled:: *(\d{4}-\d{2}-\d{2})/),dueDateRegex:tn(/due:: *(\d{4}-\d{2}-\d{2})/),doneDateRegex:tn(/completion:: *(\d{4}-\d{2}-\d{2})/),cancelledDateRegex:tn(/cancelled:: *(\d{4}-\d{2}-\d{2})/),recurrenceRegex:tn(/repeat:: *([a-zA-Z0-9, !]+)/),dependsOnRegex:tn(new RegExp("dependsOn:: *("+Am.source+")")),idRegex:tn(new RegExp("id:: *("+Pi.source+")"))}},ol=class extends Ni{constructor(){super(Lm)}parsePriority(e){switch(e){case"highest":return"0";case"high":return"1";case"medium":return"2";case"low":return"4";case"lowest":return"5";default:return"3"}}componentToString(e,t,n){let i=super.componentToString(e,t,n),s=["blockLink","description"];return i!==""&&!s.includes(n)?`  [${i.trim()}]`:i}};var er=(a=>(a.TODO="TODO",a.DONE="DONE",a.IN_PROGRESS="IN_PROGRESS",a.CANCELLED="CANCELLED",a.NON_TASK="NON_TASK",a.EMPTY="EMPTY",a))(er||{}),et=class{constructor(e,t,n,i,s="TODO"){this.symbol=e,this.name=t,this.nextStatusSymbol=n,this.availableAsCommand=i,this.type=s}};var Mt=class{get symbol(){return this.configuration.symbol}get name(){return this.configuration.name}get nextStatusSymbol(){return this.configuration.nextStatusSymbol}get nextSymbol(){return this.configuration.nextStatusSymbol}get availableAsCommand(){return this.configuration.availableAsCommand}get type(){return this.configuration.type}get typeGroupText(){let e=this.type,t;switch(e){case"IN_PROGRESS":t="1";break;case"TODO":t="2";break;case"DONE":t="3";break;case"CANCELLED":t="4";break;case"NON_TASK":t="5";break;case"EMPTY":t="6";break}return`%%${t}%%${e}`}constructor(e){this.configuration=e}static makeDone(){return new Mt(new et("x","Done"," ",!0,"DONE"))}static makeEmpty(){return new Mt(new et("","EMPTY","",!0,"EMPTY"))}static makeTodo(){return new Mt(new et(" ","Todo","x",!0,"TODO"))}static makeCancelled(){return new Mt(new et("-","Cancelled"," ",!0,"CANCELLED"))}static makeInProgress(){return new Mt(new et("/","In Progress","x",!0,"IN_PROGRESS"))}static makeNonTask(){return new Mt(new et("Q","Non-Task","A",!0,"NON_TASK"))}static getTypeForUnknownSymbol(e){switch(e){case"x":case"X":return"DONE";case"/":return"IN_PROGRESS";case"-":return"CANCELLED";case"":return"EMPTY";case" ":default:return"TODO"}}static getTypeFromStatusTypeString(e){return er[e]||"TODO"}static createUnknownStatus(e){return new Mt(new et(e,"Unknown","x",!1,"TODO"))}static createFromImportedValue(e){let t=e[0],n=Mt.getTypeFromStatusTypeString(e[3]);return new Mt(new et(t,e[1],e[2],!1,n))}isCompleted(){return this.type==="DONE"}isCancelled(){return this.type==="CANCELLED"}identicalTo(e){let t=["symbol","name","nextStatusSymbol","availableAsCommand","type"];for(let n of t)if(this[n]!==e[n])return!1;return!0}previewText(){let e="";return Mt.tasksPluginCanCreateCommandsForStatuses()&&this.availableAsCommand&&(e=" Available as a command."),`- [${this.symbol}] => [${this.nextStatusSymbol}], name: '${this.name}', type: '${this.configuration.type}'.${e}`}static tasksPluginCanCreateCommandsForStatuses(){return!1}},re=Mt;re.DONE=Mt.makeDone(),re.EMPTY=Mt.makeEmpty(),re.TODO=Mt.makeTodo();var ul=class{constructor(e=!1,t=!1,n=!1){this.ignoreSortInstructions=e,this.showTaskHiddenData=t,this.recordTimings=n}};var Fe=class{constructor(){this.coreStatuses=[re.makeTodo().configuration,re.makeDone().configuration],this.customStatuses=[re.makeInProgress().configuration,re.makeCancelled().configuration]}static addStatus(e,t){e.push(t)}static replaceStatus(e,t,n){let i=this.findStatusIndex(t,e);return i<=-1?!1:(e.splice(i,1,n),!0)}static findStatusIndex(e,t){let n=new re(e);return t.findIndex(i=>new re(i).previewText()==n.previewText())}static deleteStatus(e,t){let n=this.findStatusIndex(t,e);return n<=-1?!1:(e.splice(n,1),!0)}static deleteAllCustomStatuses(e){e.customStatuses.splice(0)}static resetAllCustomStatuses(e){Fe.deleteAllCustomStatuses(e),new Fe().customStatuses.forEach(n=>{Fe.addStatus(e.customStatuses,n)})}static bulkAddStatusCollection(e,t){let n=[];return t.forEach(i=>{e.customStatuses.find(a=>a.symbol==i[0]&&a.name==i[1]&&a.nextStatusSymbol==i[2])?n.push(`The status ${i[1]} (${i[0]}) is already added.`):Fe.addStatus(e.customStatuses,re.createFromImportedValue(i))}),n}static allStatuses(e){return e.coreStatuses.concat(e.customStatuses)}static applyToStatusRegistry(e,t){t.clearStatuses(),Fe.allStatuses(e).forEach(n=>{t.add(n)})}};var yv=[{index:9999,internalName:"INTERNAL_TESTING_ENABLED_BY_DEFAULT",displayName:"Test Item. Used to validate the Feature Framework.",description:"Description",enabledByDefault:!0,stable:!1}];var xn=class{constructor(e,t,n,i,s,a){this.internalName=e;this.index=t;this.description=n;this.displayName=i;this.enabledByDefault=s;this.stable=a}static get values(){let e=[];return yv.forEach(t=>{e=[...e,new xn(t.internalName,t.index,t.description,t.displayName,t.enabledByDefault,t.stable)]}),e}static get settingsFlags(){let e={};return xn.values.forEach(t=>{e[t.internalName]=t.enabledByDefault}),e}static fromString(e){for(let t of xn.values)if(e===t.internalName)return t;throw new RangeError(`Illegal argument passed to fromString(): ${e} does not correspond to any available Feature ${this.prototype.constructor.name}`)}};var Mn={tasksPluginEmoji:{displayName:"Tasks Emoji Format",taskSerializer:new Ni(Pm),buildSuggestions:Im(Pm,Nm,!1)},dataview:{displayName:"Dataview",taskSerializer:new ol,buildSuggestions:hv(Im(Lm,Nm,!0),[["(",")"],["[","]"]])}},Wm={globalQuery:"",globalFilter:"",removeGlobalFilter:!1,taskFormat:"tasksPluginEmoji",setCreatedDate:!1,setDoneDate:!0,setCancelledDate:!0,autoSuggestInEditor:!0,autoSuggestMinMatch:0,autoSuggestMaxItems:6,provideAccessKeys:!0,useFilenameAsScheduledDate:!1,filenameAsDateFolders:[],recurrenceOnNextLine:!1,statusSettings:new Fe,features:xn.settingsFlags,generalSettings:{},headingOpened:{},debugSettings:new ul,loggingOptions:{minLevels:{"":"info",tasks:"info","tasks.Cache":"info","tasks.Events":"info","tasks.File":"info","tasks.Query":"info","tasks.Task":"info"}}},Rn=Q({},Wm);function Um(r,e){for(let t in r)e[t]===void 0&&(e[t]=r[t])}var Z=()=>(Um(xn.settingsFlags,Rn.features),Um(Wm.loggingOptions.minLevels,Rn.loggingOptions.minLevels),Um(Wm.debugSettings,Rn.debugSettings),Rn.statusSettings.customStatuses.forEach((r,e,t)=>{var i,s;let n=re.getTypeFromStatusTypeString(r.type);t[e]=new et((i=r.symbol)!=null?i:" ",r.name,(s=r.nextStatusSymbol)!=null?s:"x",r.availableAsCommand,n)}),Q({},Rn)),tt=r=>(Rn=Q(Q({},Rn),r),Z());var Fi=(r,e)=>(Rn.generalSettings[r]=e,Z()),bv=r=>{var e;return(e=Rn.features[r])!=null?e:!1};function Ro(){return Mn[Z().taskFormat]}function ll(r){let t={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"}[r];return t!==void 0?t:r}function Tv(r){let e=[...r],t="";return e.forEach(n=>{t+=ll(n)}),t}var Oe=class{constructor(){this._registeredStatuses=[];this.addDefaultStatusTypes()}set(e){this.clearStatuses(),e.forEach(t=>{this.add(t)})}get registeredStatuses(){return this._registeredStatuses.filter(({symbol:e})=>e!==re.EMPTY.symbol)}static getInstance(){return Oe.instance||(Oe.instance=new Oe),Oe.instance}add(e){this.hasSymbol(e.symbol)||(e instanceof re?this._registeredStatuses.push(e):this._registeredStatuses.push(new re(e)))}bySymbol(e){return this.hasSymbol(e)?this.getSymbol(e):re.EMPTY}bySymbolOrCreate(e){return this.hasSymbol(e)?this.getSymbol(e):re.createUnknownStatus(e)}byName(e){return this._registeredStatuses.filter(({name:t})=>t===e).length>0?this._registeredStatuses.filter(({name:t})=>t===e)[0]:re.EMPTY}resetToDefaultStatuses(){this.clearStatuses(),this.addDefaultStatusTypes()}clearStatuses(){this._registeredStatuses=[]}getNextStatus(e){if(e.nextStatusSymbol!==""){let t=this.bySymbol(e.nextStatusSymbol);if(t!==null)return t}return re.EMPTY}getNextStatusOrCreate(e){let t=this.getNextStatus(e);return t.type!=="EMPTY"?t:re.createUnknownStatus(e.nextStatusSymbol)}getNextRecurrenceStatusOrCreate(e){let t=this.getNextStatusOrCreate(e),n=this.getNextRecurrenceStatusOfType(t,"TODO");if(n)return n;let i=this.getNextRecurrenceStatusOfType(t,"IN_PROGRESS");return i||this.bySymbolOrCreate(" ")}getNextRecurrenceStatusOfType(e,t){if(e.type===t)return e;let n=e;for(let i=0;i<this.registeredStatuses.length-1;i++)if(n=this.getNextStatusOrCreate(n),n.type===t)return n}findUnknownStatuses(e){let t=e.filter(s=>!this.hasSymbol(s.symbol)),n=new Oe,i=[];return t.forEach(s=>{if(n.hasSymbol(s.symbol))return;let a=Oe.copyStatusWithNewName(s,`Unknown (${s.symbol})`);i.push(a),n.add(a)}),i.sort((s,a)=>s.symbol.localeCompare(a.symbol,void 0,{numeric:!0}))}static copyStatusWithNewName(e,t){let n=new et(e.symbol,t,e.nextStatusSymbol,e.availableAsCommand,e.type);return new re(n)}getSymbol(e){return this._registeredStatuses.filter(({symbol:t})=>t===e)[0]}hasSymbol(e){return this._registeredStatuses.find(t=>t.symbol===e)!==void 0}addDefaultStatusTypes(){[re.makeTodo(),re.makeInProgress(),re.makeDone(),re.makeCancelled()].forEach(t=>{this.add(t)})}mermaidDiagram(e=!1){let t=this.registeredStatuses,n="mermaid",i=[],s=[];return t.forEach((a,o)=>{let u=this.getMermaidNodeLabel(a,e);i.push(`${o+1}${u}`);let l=this.getNextStatus(a);if(this.addEdgeIfNotToInternal(t,l,s,o,!1),a.type==="DONE"){let c=this.getNextRecurrenceStatusOrCreate(a);c.symbol!==l.symbol&&this.addEdgeIfNotToInternal(t,c,s,o,!0)}}),`
\`\`\`${n}
flowchart LR

classDef TODO        stroke:#f33,stroke-width:3px;
classDef DONE        stroke:#0c0,stroke-width:3px;
classDef IN_PROGRESS stroke:#fa0,stroke-width:3px;
classDef CANCELLED   stroke:#ddd,stroke-width:3px;
classDef NON_TASK    stroke:#99e,stroke-width:3px;

${i.join(`
`)}
${s.join(`
`)}

linkStyle default stroke:gray
\`\`\`
`}addEdgeIfNotToInternal(e,t,n,i,s){let a=e.findIndex(l=>l.symbol===t.symbol),o=a!==-1,u=t.type!=="EMPTY";if(o&&u){let l;s?l='-. "\u{1F501}" .-> ':l=" --> ";let c=`${i+1}${l}${a+1}`;n.push(c)}}getMermaidNodeLabel(e,t){let n=Tv(e.name),i=e.type;if(t){let s=ll(e.symbol),a=ll(e.nextStatusSymbol),o=`[${s}] -> [${a}]`,u=`'${n}'`,l=`(${i})`;return`["${u}<br>${o}<br>${l}"]:::${i}`}else return`["${n}"]:::${i}`}};var _v=require("obsidian");var rn=class{constructor(e,t){this.name=e,this.sortOrder=t}get groupText(){return this.name!==""?`%%${this.sortOrder}%% ${this.name}`:""}};var $e=class{constructor(e){this._date=null;this._date=e}get moment(){return this._date}formatAsDate(e=""){return this.format(J.dateFormat,e)}formatAsDateAndTime(e=""){return this.format(J.dateTimeFormat,e)}format(e,t=""){return this._date?this._date.format(e):t}toISOString(e){return this._date?this._date.toISOString(e):""}get category(){let e=window.moment(),t=this.moment;return t?t.isBefore(e,"day")?new rn("Overdue",1):t.isSame(e,"day")?new rn("Today",2):t.isValid()?new rn("Future",3):new rn("Invalid date",0):new rn("Undated",4)}get fromNow(){let e=this.moment;if(!e)return new rn("",0);let t=this.fromNowOrder(e);return new rn(e.fromNow(),t)}fromNowOrder(e){if(!e.isValid())return 0;let t=window.moment(),n=e.isSameOrBefore(t,"day"),i=this.fromNowStartDateOfGroup(e,n,t);return Number((n?1:3)+i.format("YYYYMMDD"))}fromNowStartDateOfGroup(e,t,n){let i=e.fromNow(!0).split(" "),s,a=Number(i[0]);isNaN(a)?s=1:s=a;let o=i[1];return t?n.subtract(s,o):n.add(s,o)}postpone(e="days",t=1){if(!this._date)throw new _v.Notice("Cannot postpone a null date");let n=window.moment().startOf("day");return this._date.isSameOrAfter(n,"day")?this._date.clone().add(t,e):n.add(t,e)}};var Cn=class{static priorityNameUsingNone(e){let t="ERROR";switch(e){case"1":t="High";break;case"0":t="Highest";break;case"2":t="Medium";break;case"3":t="None";break;case"4":t="Low";break;case"5":t="Lowest";break}return t}static priorityNameUsingNormal(e){return Cn.priorityNameUsingNone(e).replace("None","Normal")}};var dN=require("obsidian"),Ev=ga(kv());var qm=class extends Ev.EventEmitter2{constructor(){super(...arguments);this.options={minLevels:{"":"info",tasks:"info"}};this.consoleLoggerRegistered=!1;this.arrAvg=t=>t.reduce((n,i)=>n+i,0)/t.length}configure(t){return this.options=Object.assign({},this.options,t),this}getLogger(t){let n="none",i="";for(let s in this.options.minLevels)t.startsWith(s)&&s.length>=i.length&&(n=this.options.minLevels[s],i=s);return new $m(this,t,n)}onLogEntry(t){return this.on("log",t),this}registerConsoleLogger(){return this.consoleLoggerRegistered?this:(this.onLogEntry(t=>{let n=`[${window.moment().format("YYYY-MM-DD-HH:mm:ss.SSS")}][${t.level}][${t.module}]`;switch(t.traceId&&(n+=`[${t.traceId}]`),n+=` ${t.message}`,t.objects===void 0&&(t.objects=""),t.level){case"trace":console.trace(n,t.objects);break;case"debug":console.debug(n,t.objects);break;case"info":console.info(n,t.objects);break;case"warn":console.warn(n,t.objects);break;case"error":console.error(n,t.objects);break;default:console.log(`{${t.level}} ${n}`,t.objects)}}),this.consoleLoggerRegistered=!0,this)}},Ct=new qm,$m=class{constructor(e,t,n){this.levels={trace:1,debug:2,info:3,warn:4,error:5};this.logManager=e,this.module=t,this.minLevel=this.levelToInt(n)}levelToInt(e){return e.toLowerCase()in this.levels?this.levels[e.toLowerCase()]:99}log(e,t,n){if(this.levelToInt(e)<this.minLevel)return;let s={level:e,module:this.module,message:t,objects:n,traceId:void 0};this.logManager.emit("log",s)}trace(e,t){this.log("trace",e,t)}debug(e,t){this.log("debug",e,t)}info(e,t){this.log("info",e,t)}warn(e,t){this.log("warn",e,t)}error(e,t){this.log("error",e,t)}logWithId(e,t,n,i){if(this.levelToInt(e)<this.minLevel)return;let a={level:e,module:this.module,message:n,objects:i,traceId:t};this.logManager.emit("log",a)}traceWithId(e,t,n){this.logWithId("trace",e,t,n)}debugWithId(e,t,n){this.logWithId("debug",e,t,n)}infoWithId(e,t,n){this.logWithId("info",e,t,n)}warnWithId(e,t,n){this.logWithId("warn",e,t,n)}errorWithId(e,t,n){this.logWithId("error",e,t,n)}};function jm(r,e){let t=Ct.getLogger("tasks");switch(r){case"trace":t.trace(e);break;case"debug":t.debug(e);break;case"info":t.info(e);break;case"warn":t.warn(e);break;case"error":t.error(e);break;default:break}}function cl(r,e,t){r.debug(`${e}: task line number: ${t.taskLocation.lineNumber}. file path: "${t.path}"`),r.debug(`${e} original: ${t.originalMarkdown}`)}function dl(r,e,t){t.map((n,i)=>{r.debug(`${e} ==> ${i+1}   : ${n.toFileLineString()}`)})}var wt=class{static fromPath(e){let{useFilenameAsScheduledDate:t,filenameAsDateFolders:n}=Z();return!t||!this.matchesAnyFolder(n,e)?null:this.extractDateFromPath(e)}static matchesAnyFolder(e,t){return e.length===0?!0:e.some(n=>t.startsWith(n+"/"))}static extractDateFromPath(e){let t=Math.max(0,e.lastIndexOf("/")+1),n=e.lastIndexOf("."),i=e.substring(t,n),s=/(\d{4})-(\d{2})-(\d{2})/.exec(i);if(s||(s=/(\d{4})(\d{2})(\d{2})/.exec(i)),s){let a=window.moment([parseInt(s[1]),parseInt(s[2])-1,parseInt(s[3])]);if(a.isValid())return a}return null}static canApplyFallback({startDate:e,scheduledDate:t,dueDate:n}){return e===null&&n===null&&t===null}static updateTaskPath(e,t,n){let i=e.scheduledDate,s=e.scheduledDateIsInferred;return n===null?s&&(s=!1,i=null):s?i=n:this.canApplyFallback(e)&&(i=n,s=!0),new oe(be(Q({},e),{taskLocation:e.taskLocation.fromRenamedFile(new Ze(t)),scheduledDate:i,scheduledDateIsInferred:s}))}static removeInferredStatusIfNeeded(e,t){let n=e.scheduledDateIsInferred?e.scheduledDate:null;return t.map(i=>(n!==null&&!n.isSame(i.scheduledDate,"day")&&(i=new oe(be(Q({},i),{scheduledDateIsInferred:!1}))),i))}};var fl=class{constructor(e,t){this.parent=null;this.parent=e,this.children=t}};var Nr=class{static calculate(e){var n,i,s;let t=0;if((n=e.dueDate)!=null&&n.isValid()){let a=window.moment().startOf("day"),o=Math.round(a.diff(e.dueDate)/Nr.milliSecondsPerDay),u;o>=7?u=1:o>=-14?u=(o+14)*.8/21+.2:u=.2,t+=u*Nr.dueCoefficient}switch((i=e.scheduledDate)!=null&&i.isValid()&&window.moment().isSameOrAfter(e.scheduledDate)&&(t+=1*Nr.scheduledCoefficient),(s=e.startDate)!=null&&s.isValid()&&window.moment().isBefore(e.startDate)&&(t+=1*Nr.startedCoefficient),e.priority){case"0":t+=1.5*Nr.priorityCoefficient;break;case"1":t+=1*Nr.priorityCoefficient;break;case"2":t+=.65*Nr.priorityCoefficient;break;case"3":t+=.325*Nr.priorityCoefficient;break;case"5":t-=.3*Nr.priorityCoefficient;break}return t}},An=Nr;An.dueCoefficient=12,An.scheduledCoefficient=5,An.startedCoefficient=-3,An.priorityCoefficient=6,An.milliSecondsPerDay=1e3*60*60*24;var oe=class extends fl{constructor({status:t,description:n,taskLocation:i,indentation:s,listMarker:a,priority:o,createdDate:u,startDate:l,scheduledDate:c,dueDate:d,doneDate:p,cancelledDate:m,recurrence:g,dependsOn:b,id:S,blockLink:E,tags:_,originalMarkdown:R,scheduledDateIsInferred:j}){super(null,[]);this._urgency=null;this.status=t,this.description=n,this.indentation=s,this.listMarker=a,this.taskLocation=i,this.tags=_,this.priority=o,this.createdDate=u,this.startDate=l,this.scheduledDate=c,this.dueDate=d,this.doneDate=p,this.cancelledDate=m,this.recurrence=g,this.dependsOn=b,this.id=S,this.blockLink=E,this.originalMarkdown=R,this.scheduledDateIsInferred=j}static fromLine({line:t,taskLocation:n,fallbackDate:i}){let s=oe.extractTaskComponents(t);return s===null||!ye.getInstance().includedIn(s.body)?null:oe.parseTaskSignifiers(t,n,i)}static parseTaskSignifiers(t,n,i){let s=oe.extractTaskComponents(t);if(s===null)return null;let{taskSerializer:a}=Ro(),o=a.deserialize(s.body),u=!1;return wt.canApplyFallback(o)&&i!==null&&(o.scheduledDate=i,u=!0),o.tags=o.tags.map(l=>l.trim()),o.tags=o.tags.filter(l=>!ye.getInstance().equals(l)),new oe(be(Q(Q({},s),o),{taskLocation:n,originalMarkdown:t,scheduledDateIsInferred:u}))}static extractTaskComponents(t){let n=t.match(J.taskRegex);if(n===null)return null;let i=n[1],s=n[2],a=n[3],o=Oe.getInstance().bySymbolOrCreate(a),u=n[4].trim(),l=u.match(J.blockLinkRegex),c=l!==null?l[0]:"";return c!==""&&(u=u.replace(J.blockLinkRegex,"").trim()),{indentation:i,listMarker:s,status:o,body:u,blockLink:c}}toString(){return Ro().taskSerializer.serialize(this)}toFileLineString(){return`${this.indentation}${this.listMarker} [${this.status.symbol}] ${this.toString()}`}toggle(){let t=Ct.getLogger("tasks.Task"),n="toggle()";cl(t,n,this);let i=Oe.getInstance().getNextStatusOrCreate(this.status),s=this.handleNewStatus(i);return dl(t,n,s),s}handleNewStatus(t,n=window.moment()){if(t.identicalTo(this.status))return[this];let{setDoneDate:i}=Z(),s=this.newDate(t,"DONE",this.doneDate,i,n),{setCancelledDate:a}=Z(),o=this.newDate(t,"CANCELLED",this.cancelledDate,a,n),u=null;t.isCompleted()&&!this.status.isCompleted()&&this.recurrence!==null&&(u=this.recurrence.next(n));let l=new oe(be(Q({},this),{status:t,doneDate:s,cancelledDate:o})),c=[];if(u!==null){let d=this.createNextOccurrence(t,u);c.push(d)}return c.push(l),c}newDate(t,n,i,s,a){let o=null;return t.type===n&&(this.status.type!==n?s&&(o=a):o=i),o}createNextOccurrence(t,n){let{setCreatedDate:i}=Z(),s=null;i&&(s=window.moment());let a=null,o=null,l=Oe.getInstance().getNextRecurrenceStatusOrCreate(t);return new oe(be(Q(Q({},this),n),{status:l,blockLink:"",id:"",dependsOn:[],createdDate:s,cancelledDate:a,doneDate:o}))}toggleWithRecurrenceInUsersOrder(){let t=this.toggle();return this.putRecurrenceInUsersOrder(t)}handleNewStatusWithRecurrenceInUsersOrder(t,n=window.moment()){Ct.getLogger("tasks.Task").debug(`changed task ${this.taskLocation.path} ${this.taskLocation.lineNumber} ${this.originalMarkdown} status to '${t.symbol}'`);let s=this.handleNewStatus(t,n);return this.putRecurrenceInUsersOrder(s)}putRecurrenceInUsersOrder(t){let{recurrenceOnNextLine:n}=Z();return n?t.reverse():t}get isDone(){return this.status.type==="DONE"||this.status.type==="CANCELLED"||this.status.type==="NON_TASK"}isBlocked(t){if(this.dependsOn.length===0||this.isDone)return!1;for(let n of this.dependsOn)if(!!t.find(s=>s.id===n&&!s.isDone))return!0;return!1}isBlocking(t){return this.id===""||this.isDone?!1:t.some(n=>n.isDone?!1:n.dependsOn.includes(this.id))}get priorityNumber(){return Number.parseInt(this.priority)}get priorityNameGroupText(){let t=Cn.priorityNameUsingNormal(this.priority);return`%%${this.priority}%%${t} priority`}get descriptionWithoutTags(){return this.description.replace(J.hashTags,"").trim()}get priorityName(){return Cn.priorityNameUsingNormal(this.priority)}get urgency(){return this._urgency===null&&(this._urgency=An.calculate(this)),this._urgency}get path(){return this.taskLocation.path}get cancelled(){return new $e(this.cancelledDate)}get created(){return new $e(this.createdDate)}get done(){return new $e(this.doneDate)}get due(){return new $e(this.dueDate)}get scheduled(){return new $e(this.scheduledDate)}get start(){return new $e(this.startDate)}get happensDates(){return Array.of(this.startDate,this.scheduledDate,this.dueDate)}get happens(){let t=this.happensDates,n=Array.from(t).sort(Tr);for(let i of n)if(i!=null&&i.isValid())return new $e(i);return new $e(null)}get isRecurring(){return this.recurrence!==null}get recurrenceRule(){return this.recurrence?this.recurrence.toText():""}get heading(){return this.precedingHeader}get hasHeading(){return this.precedingHeader!==null}get file(){return this.taskLocation.tasksFile}get filename(){let t=this.path.match(/([^/]+)\.md$/);return t!==null?t[1]:null}get lineNumber(){return this.taskLocation.lineNumber}get sectionStart(){return this.taskLocation.sectionStart}get sectionIndex(){return this.taskLocation.sectionIndex}get precedingHeader(){return this.taskLocation.precedingHeader}getLinkText({isFilenameUnique:t}){let n;return t?n=this.filename:n="/"+this.path,n===null?null:(this.precedingHeader!==null&&this.precedingHeader!==n&&(n=n+" > "+this.precedingHeader),n)}static tasksListsIdentical(t,n){return t.length!==n.length?!1:t.every((i,s)=>i.identicalTo(n[s]))}identicalTo(t){var a,o;let n=["description","path","indentation","listMarker","lineNumber","sectionStart","sectionIndex","precedingHeader","priority","blockLink","scheduledDateIsInferred","id","dependsOn"];for(let u of n)if(((a=this[u])==null?void 0:a.toString())!==((o=t[u])==null?void 0:o.toString()))return!1;if(!this.status.identicalTo(t.status)||this.tags.length!==t.tags.length||!this.tags.every(function(u,l){return u===t.tags[l]}))return!1;n=oe.allDateFields();for(let u of n){let l=this[u],c=t[u];if(Tr(l,c)!==0)return!1}let i=this.recurrence,s=t.recurrence;return i===null&&s!==null||i!==null&&s===null?!1:!(i&&s&&!i.identicalTo(s))}static allDateFields(){return["createdDate","startDate","scheduledDate","dueDate","doneDate","cancelledDate"]}static extractHashtags(t){var n,i;return(i=(n=t.match(J.hashTags))==null?void 0:n.map(s=>s.trim()))!=null?i:[]}};var Mo=class{constructor(e){this.fetch=e;this._value=void 0}get value(){return this._value===void 0&&(this._value=this.fetch()),this._value}};var bt=class{constructor(e,t,n,i,s){this._tasksFile=e,this._lineNumber=t,this._sectionStart=n,this._sectionIndex=i,this._precedingHeader=s}static fromUnknownPosition(e){return new bt(e,0,0,0,null)}fromRenamedFile(e){return new bt(e,this.lineNumber,this.sectionStart,this.sectionIndex,this.precedingHeader)}get tasksFile(){return this._tasksFile}get path(){return this._tasksFile.path}get lineNumber(){return this._lineNumber}get sectionStart(){return this._sectionStart}get sectionIndex(){return this._sectionIndex}get precedingHeader(){return this._precedingHeader}get hasKnownPath(){return this.path!==""}};var Li=class{constructor({metadataCache:e,vault:t,events:n}){this.logger=Ct.getLogger("tasks.Cache");this.logger.debug("Creating Cache object"),this.metadataCache=e,this.metadataCacheEventReferences=[],this.vault=t,this.vaultEventReferences=[],this.events=n,this.eventsEventReferences=[],this.tasksMutex=new ru,this.state="Cold",this.logger.debug("Cache.constructor(): state = Cold"),this.tasks=[],this.loadedAfterFirstResolve=!1,this.subscribeToCache(),this.subscribeToVault(),this.subscribeToEvents(),this.loadVault()}unload(){this.logger.info("Unloading Cache");for(let e of this.metadataCacheEventReferences)this.metadataCache.offref(e);for(let e of this.vaultEventReferences)this.vault.offref(e);for(let e of this.eventsEventReferences)this.events.off(e)}getTasks(){return this.tasks}getState(){return this.state}notifySubscribers(){this.logger.debug("Cache.notifySubscribers()"),this.events.triggerCacheUpdate({tasks:this.tasks,state:this.state})}subscribeToCache(){this.logger.debug("Cache.subscribeToCache()");let e=this.metadataCache.on("resolved",()=>P(this,null,function*(){this.loadedAfterFirstResolve||(this.loadedAfterFirstResolve=!0,this.loadVault())}));this.metadataCacheEventReferences.push(e);let t=this.metadataCache.on("changed",n=>{this.tasksMutex.runExclusive(()=>{this.indexFile(n)})});this.metadataCacheEventReferences.push(t)}subscribeToVault(){this.logger.debug("Cache.subscribeToVault()");let{useFilenameAsScheduledDate:e}=Z(),t=this.vault.on("create",s=>{s instanceof xs.TFile&&(this.logger.debug(`Cache.subscribeToVault.createdEventReference() ${s.path}`),this.tasksMutex.runExclusive(()=>{this.indexFile(s)}))});this.vaultEventReferences.push(t);let n=this.vault.on("delete",s=>{s instanceof xs.TFile&&(this.logger.debug(`Cache.subscribeToVault.deletedEventReference() ${s.path}`),this.tasksMutex.runExclusive(()=>{this.tasks=this.tasks.filter(a=>a.path!==s.path),this.notifySubscribers()}))});this.vaultEventReferences.push(n);let i=this.vault.on("rename",(s,a)=>{s instanceof xs.TFile&&(this.logger.debug(`Cache.subscribeToVault.renamedEventReference() ${s.path}`),this.tasksMutex.runExclusive(()=>{let o=new Ze(s.path),u=new Mo(()=>wt.fromPath(s.path));this.tasks=this.tasks.map(l=>l.path===a?e?wt.updateTaskPath(l,s.path,u.value):new oe(be(Q({},l),{taskLocation:l.taskLocation.fromRenamedFile(o)})):l),this.notifySubscribers()}))});this.vaultEventReferences.push(i)}subscribeToEvents(){this.logger.debug("Cache.subscribeToEvents()");let e=this.events.onRequestCacheUpdate(t=>{t({tasks:this.tasks,state:this.state})});this.eventsEventReferences.push(e)}loadVault(){return this.logger.debug("Cache.loadVault()"),this.tasksMutex.runExclusive(()=>P(this,null,function*(){this.state="Initializing",this.logger.debug("Cache.loadVault(): state = Initializing"),yield Promise.all(this.vault.getMarkdownFiles().map(e=>this.indexFile(e))),this.state="Warm",this.logger.debug("Cache.loadVault(): state = Warm"),this.notifySubscribers()}))}indexFile(e){return P(this,null,function*(){let t=this.metadataCache.getFileCache(e);if(t==null)return;if(!e.path.endsWith(".md")){this.logger.debug("indexFile: skipping non-markdown file: "+e.path);return}this.logger.debug("Cache.indexFile: "+e.path);let n=this.tasks.filter(a=>a.path===e.path),i=t.listItems,s=[];if(i!==void 0){let a=yield this.vault.cachedRead(e);s=this.getTasksFromFileContent(a,i,t,e)}oe.tasksListsIdentical(n,s)||(this.tasks=this.tasks.filter(a=>a.path!==e.path),this.tasks.push(...s),this.logger.debug("Cache.indexFile: "+e.path+`: read ${s.length} task(s)`),this.notifySubscribers())})}getTasksFromFileContent(e,t,n,i){let s=new Ze(i.path),a=[],o=e.split(`
`),u=o.length,l=new Mo(()=>wt.fromPath(i.path)),c=null,d=0;for(let p of t)if(p.task!==void 0){let m=p.position.start.line;if(m>=u)return this.logger.debug(`${i.path} Obsidian gave us a line number ${m} past the end of the file. ${u}.`),a;if((c===null||c.position.end.line<m)&&(c=Li.getSection(m,n.sections),d=0),c===null)continue;let g=o[m];if(g===void 0){this.logger.debug(`${i.path}: line ${m} - ignoring 'undefined' line.`);continue}let b;try{b=oe.fromLine({line:g,taskLocation:new bt(s,m,c.position.start.line,d,Li.getPrecedingHeader(m,n.headings)),fallbackDate:l.value})}catch(S){this.reportTaskParsingErrorToUser(S,i,p,g);continue}b!==null&&(d++,a.push(b))}return a}reportTaskParsingErrorToUser(e,t,n,i){let s=`There was an error reading one of the tasks in this vault.
The following task has been ignored, to prevent Tasks queries getting stuck with 'Loading Tasks ...'
Error: ${e}
File: ${t.path}
Line number: ${n.position.start.line}
Task line: ${i}

Please create a bug report for this message at
https://github.com/obsidian-tasks-group/obsidian-tasks/issues/new/choose
to help us find and fix the underlying issue.

Include:
- either a screenshot of the error popup, or copy the text from the console, if on a desktop machine.
- the output from running the Obsidian command 'Show debug info'

The error popup will only be shown when Tasks is starting up, but if the error persists,
it will be shown in the console every time this file is edited during the Obsidian
session.
`;this.logger.error(s),e instanceof Error&&this.logger.error(e.stack?e.stack:"Cannot determine stack"),this.state==="Initializing"&&new xs.Notice(s,1e4)}static getSection(e,t){if(t===void 0)return null;for(let n of t)if(n.position.start.line<=e&&n.position.end.line>=e)return n;return null}static getPrecedingHeader(e,t){if(t===void 0)return null;let n=null;for(let i of t){if(i.position.start.line>e)return n;n=i.heading}return n}};var dh=require("obsidian");var _w=require("obsidian");function je(){}function Hm(r){return r()}function Sv(){return Object.create(null)}function Wt(r){r.forEach(Hm)}function hl(r){return typeof r=="function"}function ni(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}function Ov(r){return Object.keys(r).length===0}var Dv=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global,Ao=class{constructor(e){this.options=e,this._listeners="WeakMap"in Dv?new WeakMap:void 0}observe(e,t){return this._listeners.set(e,t),this._getObserver().observe(e,this.options),()=>{this._listeners.delete(e),this._observer.unobserve(e)}}_getObserver(){var e;return(e=this._observer)!==null&&e!==void 0?e:this._observer=new ResizeObserver(t=>{var n;for(let i of t)Ao.entries.set(i.target,i),(n=this._listeners.get(i.target))===null||n===void 0||n(i)})}};Ao.entries="WeakMap"in Dv?new WeakMap:void 0;var xv=!1;function fN(){xv=!0}function pN(){xv=!1}function I(r,e){r.appendChild(e)}function Te(r,e,t){r.insertBefore(e,t||null)}function me(r){r.parentNode&&r.parentNode.removeChild(r)}function qi(r,e){for(let t=0;t<r.length;t+=1)r[t]&&r[t].d(e)}function K(r){return document.createElement(r)}function mN(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function Ae(r){return document.createTextNode(r)}function ue(){return Ae(" ")}function Rv(){return Ae("")}function De(r,e,t,n){return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)}function Mv(r){return function(e){return e.preventDefault(),r.call(this,e)}}function W(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function Cv(r){let e;return{p(...t){e=t,e.forEach(n=>r.push(n))},r(){e.forEach(t=>r.splice(r.indexOf(t),1))}}}function hN(r){return Array.from(r.childNodes)}function Ir(r,e){e=""+e,r.data!==e&&(r.data=e)}function Fr(r,e){r.value=e==null?"":e}function Vm(r,e,t){for(let n=0;n<r.options.length;n+=1){let i=r.options[n];if(i.__value===e){i.selected=!0;return}}(!t||e!==void 0)&&(r.selectedIndex=-1)}function Av(r){let e=r.querySelector(":checked");return e&&e.__value}var pl;function gN(){if(pl===void 0){pl=!1;try{typeof window!="undefined"&&window.parent&&window.parent.document}catch(r){pl=!0}}return pl}function Pv(r,e){getComputedStyle(r).position==="static"&&(r.style.position="relative");let n=K("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;let i=gN(),s;return i?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",s=De(window,"message",a=>{a.source===n.contentWindow&&e()})):(n.src="about:blank",n.onload=()=>{s=De(n.contentWindow,"resize",e),e()}),I(r,n),()=>{(i||s&&n.contentWindow)&&s(),me(n)}}function Pn(r,e,t){r.classList[t?"add":"remove"](e)}var As=class{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=mN(t.nodeName):this.e=K(t.nodeType===11?"TEMPLATE":t.nodeName),this.t=t.tagName!=="TEMPLATE"?t:t.content,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)Te(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(me)}};var Po;function Co(r){Po=r}function yN(){if(!Po)throw new Error("Function called outside component initialization");return Po}function zm(r){yN().$$.on_mount.push(r)}var Ms=[];var Qe=[],Cs=[],Ym=[],bN=Promise.resolve(),Bm=!1;function TN(){Bm||(Bm=!0,bN.then(Nv))}function Wi(r){Cs.push(r)}function qt(r){Ym.push(r)}var Gm=new Set,Rs=0;function Nv(){if(Rs!==0)return;let r=Po;do{try{for(;Rs<Ms.length;){let e=Ms[Rs];Rs++,Co(e),_N(e.$$)}}catch(e){throw Ms.length=0,Rs=0,e}for(Co(null),Ms.length=0,Rs=0;Qe.length;)Qe.pop()();for(let e=0;e<Cs.length;e+=1){let t=Cs[e];Gm.has(t)||(Gm.add(t),t())}Cs.length=0}while(Ms.length);for(;Ym.length;)Ym.pop()();Bm=!1,Gm.clear(),Co(r)}function _N(r){if(r.fragment!==null){r.update(),Wt(r.before_update);let e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(Wi)}}function vN(r){let e=[],t=[];Cs.forEach(n=>r.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),Cs=e}var ml=new Set,Ui;function Iv(){Ui={r:0,c:[],p:Ui}}function Fv(){Ui.r||Wt(Ui.c),Ui=Ui.p}function tr(r,e){r&&r.i&&(ml.delete(r),r.i(e))}function _r(r,e,t,n){if(r&&r.o){if(ml.has(r))return;ml.add(r),Ui.c.push(()=>{ml.delete(r),n&&(t&&r.d(1),n())}),r.o(e)}else n&&n()}var wN=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],mj=new Set([...wN]);function $t(r,e,t){let n=r.$$.props[e];n!==void 0&&(r.$$.bound[n]=t,t(r.$$.ctx[n]))}function sn(r){r&&r.c()}function Lr(r,e,t,n){let{fragment:i,after_update:s}=r.$$;i&&i.m(e,t),n||Wi(()=>{let a=r.$$.on_mount.map(Hm).filter(hl);r.$$.on_destroy?r.$$.on_destroy.push(...a):Wt(a),r.$$.on_mount=[]}),s.forEach(Wi)}function vr(r,e){let t=r.$$;t.fragment!==null&&(vN(t.after_update),Wt(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function kN(r,e){r.$$.dirty[0]===-1&&(Ms.push(r),TN(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function ii(r,e,t,n,i,s,a,o=[-1]){let u=Po;Co(r);let l=r.$$={fragment:null,ctx:[],props:s,update:je,not_equal:i,bound:Sv(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Sv(),dirty:o,skip_bound:!1,root:e.target||u.$$.root};a&&a(l.root);let c=!1;if(l.ctx=t?t(r,e.props||{},(d,p,...m)=>{let g=m.length?m[0]:p;return l.ctx&&i(l.ctx[d],l.ctx[d]=g)&&(!l.skip_bound&&l.bound[d]&&l.bound[d](g),c&&kN(r,d)),p}):[],l.update(),c=!0,Wt(l.before_update),l.fragment=n?n(l.ctx):!1,e.target){if(e.hydrate){fN();let d=hN(e.target);l.fragment&&l.fragment.l(d),d.forEach(me)}else l.fragment&&l.fragment.c();e.intro&&tr(r.$$.fragment),Lr(r,e.target,e.anchor,e.customElement),pN(),Nv()}Co(u)}var EN;typeof HTMLElement=="function"&&(EN=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){let{on_mount:r}=this.$$;this.$$.on_disconnect=r.map(Hm).filter(hl);for(let e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(r,e,t){this[r]=t}disconnectedCallback(){Wt(this.$$.on_disconnect)}$destroy(){vr(this,1),this.$destroy=je}$on(r,e){if(!hl(e))return je;let t=this.$$.callbacks[r]||(this.$$.callbacks[r]=[]);return t.push(e),()=>{let n=t.indexOf(e);n!==-1&&t.splice(n,1)}}$set(r){this.$$set&&!Ov(r)&&(this.$$.skip_bound=!0,this.$$set(r),this.$$.skip_bound=!1)}});var nn=class{$destroy(){vr(this,1),this.$destroy=je}$on(e,t){if(!hl(t))return je;let n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{let i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!Ov(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};function Km(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?s(c.value):i(c.value).then(o,u)}l((n=n.apply(r,e||[])).next())})}var Io=require("obsidian");var No,Qm,Xm,SN=["md"];function bl(){return Ct.getLogger("tasks.File")}var Lv=({metadataCache:r,vault:e,workspace:t})=>{No=r,Qm=e,Xm=t},wr=t=>P(void 0,[t],function*({originalTask:r,newTasks:e}){if(Qm===void 0||No===void 0||Xm===void 0){gl("Tasks: cannot use File before initializing it.");return}Array.isArray(e)||(e=[e]);let n=bl(),i="replaceTaskWithTasks()";cl(n,i,r),dl(n,i,e),yield Wv({originalTask:r,newTasks:e,vault:Qm,metadataCache:No,workspace:Xm,previousTries:0})});function gl(r){console.error(r),new Io.Notice(r,15e3)}function Uv(r){console.warn(r),new Io.Notice(r,1e4)}function ON(r){bl().debug(r)}var si=class extends Error{},yl=class extends Error{},Wv=a=>P(void 0,[a],function*({originalTask:r,newTasks:e,vault:t,metadataCache:n,workspace:i,previousTries:s}){let o=bl();o.debug(`tryRepetitive after ${s} previous tries`);let u=()=>P(void 0,null,function*(){if(s>10){let c=`Tasks: Could not find the correct task line to update.

The task line not updated is:
${r.originalMarkdown}

In this markdown file:
"${r.taskLocation.path}"

Note: further clicks on this checkbox will usually now be ignored until the file is opened (or certain, specific edits are made - it's complicated).

Recommendations:

1. Close all panes that have the above file open, and then re-open the file.

2. Check for exactly identical copies of the task line, in this file, and see if you can make them different.
`;gl(c);return}let l=Math.min(Math.pow(10,s),100);o.debug(`timeout = ${l}`),setTimeout(()=>P(void 0,null,function*(){yield Wv({originalTask:r,newTasks:e,vault:t,metadataCache:n,workspace:i,previousTries:s+1})}),l)});try{let[l,c,d]=yield qv(r,t),p=[...d.slice(0,l),...e.map(m=>m.toFileLineString()),...d.slice(l+1)];yield t.modify(c,p.join(`
`))}catch(l){if(l instanceof si){l.message&&Uv(l.message),yield u();return}else if(l instanceof yl){yield u();return}else l instanceof Error&&gl(l.message)}});function qv(r,e){return P(this,null,function*(){if(No===void 0)throw new si;let t=e.getAbstractFileByPath(r.path);if(!(t instanceof Io.TFile))throw new si(`Tasks: No file found for task ${r.description}. Retrying ...`);if(!SN.includes(t.extension))throw new Error(`Tasks: Does not support files with the ${t.extension} file extension.`);let n=No.getFileCache(t);if(n==null||n===null)throw new si(`Tasks: No file cache found for file ${t.path}. Retrying ...`);let i=n.listItems;if(i===void 0||i.length===0)throw new si(`Tasks: No list items found in file cache of ${t.path}. Retrying ...`);let a=(yield e.read(t)).split(`
`),o=DN(r,a,i,ON);if(o===void 0)throw new yl;return[o,t,a]})}function Zm(r,e){return P(this,null,function*(){try{let[t,n,i]=yield qv(r,e);return[t,n]}catch(t){t instanceof si?t.message&&Uv(t.message):t instanceof Error&&gl(t.message)}})}function $v(r,e){return r<e.length}function DN(r,e,t,n){let i=xN(r,e);return i!==void 0||(i=RN(r,e),i!==void 0)?i:MN(r,e,t,n)}function xN(r,e){let t=r.taskLocation.lineNumber;if($v(t,e)&&e[t]===r.originalMarkdown)return bl().debug(`Found original markdown at original line number ${t}`),t}function RN(r,e){let t=[];for(let n=0;n<e.length;n++)e[n]===r.originalMarkdown&&t.push(n);if(t.length===1)return t[0]}function MN(r,e,t,n){let i,s=0;for(let a of t){let o=a.position.start.line;if(!$v(o,e))return;if(o<r.taskLocation.sectionStart||a.task===void 0)continue;let u=e[o];if(ye.getInstance().includedIn(u)){if(s===r.taskLocation.sectionIndex){if(u===r.originalMarkdown)i=o;else{n(`Tasks: Unable to find task in file ${r.taskLocation.path}.
Expected task:
${r.originalMarkdown}
Found task:
${u}`);return}break}s++}}return i}function Ps(r){return r.charAt(0).toUpperCase()+r.slice(1)}function kt(r,e){if(e===null)return Ps(r);let t=r.toLowerCase().indexOf(e.toLowerCase());if(t===-1)return`${Ps(r)} (<span class="accesskey">${e.toLowerCase()}</span>)`;let n=r.substring(0,t);return n+='<span class="accesskey">',t===0?n+=r.substring(t,t+1).toUpperCase():n+=r.substring(t,t+1),n+="</span>",n+=r.substring(t+1),n=Ps(n),n}function CN(r){let e,t=kt(r[2],r[4])+"",n,i,s,a,o,u,l,c,d;return{c(){e=K("label"),n=ue(),i=K("input"),s=ue(),a=K("code"),o=Ae(r[3]),u=ue(),l=new As(!1),W(e,"for",r[2]),W(i,"id",r[2]),W(i,"type","text"),W(i,"class","tasks-modal-date-input"),W(i,"placeholder",AN),W(i,"accesskey",r[4]),Pn(i,"tasks-modal-error",!r[1]),l.a=null,W(a,"class","tasks-modal-parsed-date")},m(p,m){Te(p,e,m),e.innerHTML=t,Te(p,n,m),Te(p,i,m),Fr(i,r[0]),Te(p,s,m),Te(p,a,m),I(a,o),I(a,u),l.m(r[5],a),c||(d=De(i,"input",r[7]),c=!0)},p(p,[m]){m&20&&t!==(t=kt(p[2],p[4])+"")&&(e.innerHTML=t),m&4&&W(e,"for",p[2]),m&4&&W(i,"id",p[2]),m&16&&W(i,"accesskey",p[4]),m&1&&i.value!==p[0]&&Fr(i,p[0]),m&2&&Pn(i,"tasks-modal-error",!p[1]),m&8&&Ir(o,p[3]),m&32&&l.p(p[5])},i:je,o:je,d(p){p&&me(e),p&&me(n),p&&me(i),p&&me(s),p&&me(a),c=!1,d()}}}var AN="Try 'Mon' or 'tm' then space";function PN(r,e,t){let{id:n}=e,{dateSymbol:i}=e,{date:s}=e,{isDateValid:a}=e,{forwardOnly:o}=e,{accesskey:u}=e,l;function c(){s=this.value,t(0,s),t(2,n),t(6,o),t(5,l)}return r.$$set=d=>{"id"in d&&t(2,n=d.id),"dateSymbol"in d&&t(3,i=d.dateSymbol),"date"in d&&t(0,s=d.date),"isDateValid"in d&&t(1,a=d.isDateValid),"forwardOnly"in d&&t(6,o=d.forwardOnly),"accesskey"in d&&t(4,u=d.accesskey)},r.$$.update=()=>{if(r.$$.dirty&101){e:t(0,s=Ku(s)),t(5,l=cv(n,s,o)),t(1,a=!l.includes("invalid"))}},[s,a,n,i,u,l,o,c]}var Jm=class extends nn{constructor(e){super(),ii(this,e,PN,CN,ni,{id:2,dateSymbol:3,date:0,isDateValid:1,forwardOnly:6,accesskey:4})}},$i=Jm;var ji=Math.min,jt=Math.max,Lo=Math.round;var Nn=r=>({x:r,y:r}),NN={left:"right",right:"left",bottom:"top",top:"bottom"},IN={start:"end",end:"start"};function eh(r,e,t){return jt(r,ji(e,t))}function Ns(r,e){return typeof r=="function"?r(e):r}function In(r){return r.split("-")[0]}function Is(r){return r.split("-")[1]}function th(r){return r==="x"?"y":"x"}function rh(r){return r==="y"?"height":"width"}function Fs(r){return["top","bottom"].includes(In(r))?"y":"x"}function nh(r){return th(Fs(r))}function jv(r,e,t){t===void 0&&(t=!1);let n=Is(r),i=nh(r),s=rh(i),a=i==="x"?n===(t?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(a=Fo(a)),[a,Fo(a)]}function Gv(r){let e=Fo(r);return[Tl(r),e,Tl(e)]}function Tl(r){return r.replace(/start|end/g,e=>IN[e])}function FN(r,e,t){let n=["left","right"],i=["right","left"],s=["top","bottom"],a=["bottom","top"];switch(r){case"top":case"bottom":return t?e?i:n:e?n:i;case"left":case"right":return e?s:a;default:return[]}}function Yv(r,e,t,n){let i=Is(r),s=FN(In(r),t==="start",n);return i&&(s=s.map(a=>a+"-"+i),e&&(s=s.concat(s.map(Tl)))),s}function Fo(r){return r.replace(/left|right|bottom|top/g,e=>NN[e])}function LN(r){return Q({top:0,right:0,bottom:0,left:0},r)}function Bv(r){return typeof r!="number"?LN(r):{top:r,right:r,bottom:r,left:r}}function Gi(r){return be(Q({},r),{top:r.y,left:r.x,right:r.x+r.width,bottom:r.y+r.height})}function Hv(r,e,t){let{reference:n,floating:i}=r,s=Fs(e),a=nh(e),o=rh(a),u=In(e),l=s==="y",c=n.x+n.width/2-i.width/2,d=n.y+n.height/2-i.height/2,p=n[o]/2-i[o]/2,m;switch(u){case"top":m={x:c,y:n.y-i.height};break;case"bottom":m={x:c,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:d};break;case"left":m={x:n.x-i.width,y:d};break;default:m={x:n.x,y:n.y}}switch(Is(e)){case"start":m[a]-=p*(t&&l?-1:1);break;case"end":m[a]+=p*(t&&l?-1:1);break}return m}var Vv=(r,e,t)=>P(void 0,null,function*(){let{placement:n="bottom",strategy:i="absolute",middleware:s=[],platform:a}=t,o=s.filter(Boolean),u=yield a.isRTL==null?void 0:a.isRTL(e),l=yield a.getElementRects({reference:r,floating:e,strategy:i}),{x:c,y:d}=Hv(l,n,u),p=n,m={},g=0;for(let b=0;b<o.length;b++){let{name:S,fn:E}=o[b],{x:_,y:R,data:j,reset:U}=yield E({x:c,y:d,initialPlacement:n,placement:p,strategy:i,middlewareData:m,rects:l,platform:a,elements:{reference:r,floating:e}});if(c=_!=null?_:c,d=R!=null?R:d,m=be(Q({},m),{[S]:Q(Q({},m[S]),j)}),U&&g<=50){g++,typeof U=="object"&&(U.placement&&(p=U.placement),U.rects&&(l=U.rects===!0?yield a.getElementRects({reference:r,floating:e,strategy:i}):U.rects),{x:c,y:d}=Hv(l,p,u)),b=-1;continue}}return{x:c,y:d,placement:p,strategy:i,middlewareData:m}});function _l(r,e){return P(this,null,function*(){var t;e===void 0&&(e={});let{x:n,y:i,platform:s,rects:a,elements:o,strategy:u}=r,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:p=!1,padding:m=0}=Ns(e,r),g=Bv(m),S=o[p?d==="floating"?"reference":"floating":d],E=Gi(yield s.getClippingRect({element:(t=yield s.isElement==null?void 0:s.isElement(S))==null||t?S:S.contextElement||(yield s.getDocumentElement==null?void 0:s.getDocumentElement(o.floating)),boundary:l,rootBoundary:c,strategy:u})),_=d==="floating"?be(Q({},a.floating),{x:n,y:i}):a.reference,R=yield s.getOffsetParent==null?void 0:s.getOffsetParent(o.floating),j=(yield s.isElement==null?void 0:s.isElement(R))?(yield s.getScale==null?void 0:s.getScale(R))||{x:1,y:1}:{x:1,y:1},U=Gi(s.convertOffsetParentRelativeRectToViewportRelativeRect?yield s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:_,offsetParent:R,strategy:u}):_);return{top:(E.top-U.top+g.top)/j.y,bottom:(U.bottom-E.bottom+g.bottom)/j.y,left:(E.left-U.left+g.left)/j.x,right:(U.right-E.right+g.right)/j.x}})}var ih=function(r){return r===void 0&&(r={}),{name:"flip",options:r,fn(t){return P(this,null,function*(){var n,i;let{placement:s,middlewareData:a,rects:o,initialPlacement:u,platform:l,elements:c}=t,O=Ns(r,t),{mainAxis:d=!0,crossAxis:p=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:S=!0}=O,E=tu(O,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"]);if((n=a.arrow)!=null&&n.alignmentOffset)return{};let _=In(s),R=In(u)===u,j=yield l.isRTL==null?void 0:l.isRTL(c.floating),U=m||(R||!S?[Fo(u)]:Gv(u));!m&&b!=="none"&&U.push(...Yv(u,S,b,j));let ne=[u,...U],V=yield _l(t,E),G=[],xe=((i=a.flip)==null?void 0:i.overflows)||[];if(d&&G.push(V[_]),p){let B=jv(s,o,j);G.push(V[B[0]],V[B[1]])}if(xe=[...xe,{placement:s,overflows:G}],!G.every(B=>B<=0)){var Me,q;let B=(((Me=a.flip)==null?void 0:Me.index)||0)+1,F=ne[B];if(F)return{data:{index:B,overflows:xe},reset:{placement:F}};let X=(q=xe.filter(f=>f.overflows[0]<=0).sort((f,h)=>f.overflows[1]-h.overflows[1])[0])==null?void 0:q.placement;if(!X)switch(g){case"bestFit":{var $;let f=($=xe.map(h=>[h.placement,h.overflows.filter(y=>y>0).reduce((y,T)=>y+T,0)]).sort((h,y)=>h[1]-y[1])[0])==null?void 0:$[0];f&&(X=f);break}case"initialPlacement":X=u;break}if(s!==X)return{reset:{placement:X}}}return{}})}}};function UN(r,e){return P(this,null,function*(){let{placement:t,platform:n,elements:i}=r,s=yield n.isRTL==null?void 0:n.isRTL(i.floating),a=In(t),o=Is(t),u=Fs(t)==="y",l=["left","top"].includes(a)?-1:1,c=s&&u?-1:1,d=Ns(e,r),{mainAxis:p,crossAxis:m,alignmentAxis:g}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:Q({mainAxis:0,crossAxis:0,alignmentAxis:null},d);return o&&typeof g=="number"&&(m=o==="end"?g*-1:g),u?{x:m*c,y:p*l}:{x:p*l,y:m*c}})}var vl=function(r){return r===void 0&&(r=0),{name:"offset",options:r,fn(t){return P(this,null,function*(){var n,i;let{x:s,y:a,placement:o,middlewareData:u}=t,l=yield UN(t,r);return o===((n=u.offset)==null?void 0:n.placement)&&(i=u.arrow)!=null&&i.alignmentOffset?{}:{x:s+l.x,y:a+l.y,data:be(Q({},l),{placement:o})}})}}},wl=function(r){return r===void 0&&(r={}),{name:"shift",options:r,fn(t){return P(this,null,function*(){let{x:n,y:i,placement:s}=t,E=Ns(r,t),{mainAxis:a=!0,crossAxis:o=!1,limiter:u={fn:_=>{let{x:R,y:j}=_;return{x:R,y:j}}}}=E,l=tu(E,["mainAxis","crossAxis","limiter"]),c={x:n,y:i},d=yield _l(t,l),p=Fs(In(s)),m=th(p),g=c[m],b=c[p];if(a){let _=m==="y"?"top":"left",R=m==="y"?"bottom":"right",j=g+d[_],U=g-d[R];g=eh(j,g,U)}if(o){let _=p==="y"?"top":"left",R=p==="y"?"bottom":"right",j=b+d[_],U=b-d[R];b=eh(j,b,U)}let S=u.fn(be(Q({},t),{[m]:g,[p]:b}));return be(Q({},S),{data:{x:S.x-n,y:S.y-i}})})}}};var sh=function(r){return r===void 0&&(r={}),{name:"size",options:r,fn(t){return P(this,null,function*(){let{placement:n,rects:i,platform:s,elements:a}=t,V=Ns(r,t),{apply:o=()=>{}}=V,u=tu(V,["apply"]),l=yield _l(t,u),c=In(n),d=Is(n),p=Fs(n)==="y",{width:m,height:g}=i.floating,b,S;c==="top"||c==="bottom"?(b=c,S=d===((yield s.isRTL==null?void 0:s.isRTL(a.floating))?"start":"end")?"left":"right"):(S=c,b=d==="end"?"top":"bottom");let E=g-l[b],_=m-l[S],R=!t.middlewareData.shift,j=E,U=_;if(p){let G=m-l.left-l.right;U=d||R?ji(_,G):G}else{let G=g-l.top-l.bottom;j=d||R?ji(E,G):G}if(R&&!d){let G=jt(l.left,0),xe=jt(l.right,0),Me=jt(l.top,0),q=jt(l.bottom,0);p?U=m-2*(G!==0||xe!==0?G+xe:jt(l.left,l.right)):j=g-2*(Me!==0||q!==0?Me+q:jt(l.top,l.bottom))}yield o(be(Q({},t),{availableWidth:U,availableHeight:j}));let ne=yield s.getDimensions(a.floating);return m!==ne.width||g!==ne.height?{reset:{rects:!0}}:{}})}}};function Fn(r){return Kv(r)?(r.nodeName||"").toLowerCase():"#document"}function Gt(r){var e;return(r==null||(e=r.ownerDocument)==null?void 0:e.defaultView)||window}function Ln(r){var e;return(e=(Kv(r)?r.ownerDocument:r.document)||window.document)==null?void 0:e.documentElement}function Kv(r){return r instanceof Node||r instanceof Gt(r).Node}function an(r){return r instanceof Element||r instanceof Gt(r).Element}function Ur(r){return r instanceof HTMLElement||r instanceof Gt(r).HTMLElement}function zv(r){return typeof ShadowRoot=="undefined"?!1:r instanceof ShadowRoot||r instanceof Gt(r).ShadowRoot}function Ls(r){let{overflow:e,overflowX:t,overflowY:n,display:i}=rr(r);return/auto|scroll|overlay|hidden|clip/.test(e+n+t)&&!["inline","contents"].includes(i)}function Qv(r){return["table","td","th"].includes(Fn(r))}function El(r){let e=Sl(),t=rr(r);return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(t.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(t.contain||"").includes(n))}function Xv(r){let e=Yi(r);for(;Ur(e)&&!Uo(e);){if(El(e))return e;e=Yi(e)}return null}function Sl(){return typeof CSS=="undefined"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Uo(r){return["html","body","#document"].includes(Fn(r))}function rr(r){return Gt(r).getComputedStyle(r)}function Wo(r){return an(r)?{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}:{scrollLeft:r.pageXOffset,scrollTop:r.pageYOffset}}function Yi(r){if(Fn(r)==="html")return r;let e=r.assignedSlot||r.parentNode||zv(r)&&r.host||Ln(r);return zv(e)?e.host:e}function Zv(r){let e=Yi(r);return Uo(e)?r.ownerDocument?r.ownerDocument.body:r.body:Ur(e)&&Ls(e)?e:Zv(e)}function kl(r,e,t){var n;e===void 0&&(e=[]),t===void 0&&(t=!0);let i=Zv(r),s=i===((n=r.ownerDocument)==null?void 0:n.body),a=Gt(i);return s?e.concat(a,a.visualViewport||[],Ls(i)?i:[],a.frameElement&&t?kl(a.frameElement):[]):e.concat(i,kl(i,[],t))}function tw(r){let e=rr(r),t=parseFloat(e.width)||0,n=parseFloat(e.height)||0,i=Ur(r),s=i?r.offsetWidth:t,a=i?r.offsetHeight:n,o=Lo(t)!==s||Lo(n)!==a;return o&&(t=s,n=a),{width:t,height:n,$:o}}function rw(r){return an(r)?r:r.contextElement}function Us(r){let e=rw(r);if(!Ur(e))return Nn(1);let t=e.getBoundingClientRect(),{width:n,height:i,$:s}=tw(e),a=(s?Lo(t.width):t.width)/n,o=(s?Lo(t.height):t.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}var WN=Nn(0);function nw(r){let e=Gt(r);return!Sl()||!e.visualViewport?WN:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function qN(r,e,t){return e===void 0&&(e=!1),!t||e&&t!==Gt(r)?!1:e}function qo(r,e,t,n){e===void 0&&(e=!1),t===void 0&&(t=!1);let i=r.getBoundingClientRect(),s=rw(r),a=Nn(1);e&&(n?an(n)&&(a=Us(n)):a=Us(r));let o=qN(s,t,n)?nw(s):Nn(0),u=(i.left+o.x)/a.x,l=(i.top+o.y)/a.y,c=i.width/a.x,d=i.height/a.y;if(s){let p=Gt(s),m=n&&an(n)?Gt(n):n,g=p.frameElement;for(;g&&n&&m!==p;){let b=Us(g),S=g.getBoundingClientRect(),E=rr(g),_=S.left+(g.clientLeft+parseFloat(E.paddingLeft))*b.x,R=S.top+(g.clientTop+parseFloat(E.paddingTop))*b.y;u*=b.x,l*=b.y,c*=b.x,d*=b.y,u+=_,l+=R,g=Gt(g).frameElement}}return Gi({width:c,height:d,x:u,y:l})}function $N(r){let{rect:e,offsetParent:t,strategy:n}=r,i=Ur(t),s=Ln(t);if(t===s)return e;let a={scrollLeft:0,scrollTop:0},o=Nn(1),u=Nn(0);if((i||!i&&n!=="fixed")&&((Fn(t)!=="body"||Ls(s))&&(a=Wo(t)),Ur(t))){let l=qo(t);o=Us(t),u.x=l.x+t.clientLeft,u.y=l.y+t.clientTop}return{width:e.width*o.x,height:e.height*o.y,x:e.x*o.x-a.scrollLeft*o.x+u.x,y:e.y*o.y-a.scrollTop*o.y+u.y}}function jN(r){return Array.from(r.getClientRects())}function iw(r){return qo(Ln(r)).left+Wo(r).scrollLeft}function GN(r){let e=Ln(r),t=Wo(r),n=r.ownerDocument.body,i=jt(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),s=jt(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight),a=-t.scrollLeft+iw(r),o=-t.scrollTop;return rr(n).direction==="rtl"&&(a+=jt(e.clientWidth,n.clientWidth)-i),{width:i,height:s,x:a,y:o}}function YN(r,e){let t=Gt(r),n=Ln(r),i=t.visualViewport,s=n.clientWidth,a=n.clientHeight,o=0,u=0;if(i){s=i.width,a=i.height;let l=Sl();(!l||l&&e==="fixed")&&(o=i.offsetLeft,u=i.offsetTop)}return{width:s,height:a,x:o,y:u}}function BN(r,e){let t=qo(r,!0,e==="fixed"),n=t.top+r.clientTop,i=t.left+r.clientLeft,s=Ur(r)?Us(r):Nn(1),a=r.clientWidth*s.x,o=r.clientHeight*s.y,u=i*s.x,l=n*s.y;return{width:a,height:o,x:u,y:l}}function Jv(r,e,t){let n;if(e==="viewport")n=YN(r,t);else if(e==="document")n=GN(Ln(r));else if(an(e))n=BN(e,t);else{let i=nw(r);n=be(Q({},e),{x:e.x-i.x,y:e.y-i.y})}return Gi(n)}function sw(r,e){let t=Yi(r);return t===e||!an(t)||Uo(t)?!1:rr(t).position==="fixed"||sw(t,e)}function HN(r,e){let t=e.get(r);if(t)return t;let n=kl(r,[],!1).filter(o=>an(o)&&Fn(o)!=="body"),i=null,s=rr(r).position==="fixed",a=s?Yi(r):r;for(;an(a)&&!Uo(a);){let o=rr(a),u=El(a);!u&&o.position==="fixed"&&(i=null),(s?!u&&!i:!u&&o.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Ls(a)&&!u&&sw(r,a))?n=n.filter(c=>c!==a):i=o,a=Yi(a)}return e.set(r,n),n}function VN(r){let{element:e,boundary:t,rootBoundary:n,strategy:i}=r,a=[...t==="clippingAncestors"?HN(e,this._c):[].concat(t),n],o=a[0],u=a.reduce((l,c)=>{let d=Jv(e,c,i);return l.top=jt(d.top,l.top),l.right=ji(d.right,l.right),l.bottom=ji(d.bottom,l.bottom),l.left=jt(d.left,l.left),l},Jv(e,o,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function zN(r){return tw(r)}function KN(r,e,t){let n=Ur(e),i=Ln(e),s=t==="fixed",a=qo(r,!0,s,e),o={scrollLeft:0,scrollTop:0},u=Nn(0);if(n||!n&&!s)if((Fn(e)!=="body"||Ls(i))&&(o=Wo(e)),n){let l=qo(e,!0,s,e);u.x=l.x+e.clientLeft,u.y=l.y+e.clientTop}else i&&(u.x=iw(i));return{x:a.left+o.scrollLeft-u.x,y:a.top+o.scrollTop-u.y,width:a.width,height:a.height}}function ew(r,e){return!Ur(r)||rr(r).position==="fixed"?null:e?e(r):r.offsetParent}function aw(r,e){let t=Gt(r);if(!Ur(r))return t;let n=ew(r,e);for(;n&&Qv(n)&&rr(n).position==="static";)n=ew(n,e);return n&&(Fn(n)==="html"||Fn(n)==="body"&&rr(n).position==="static"&&!El(n))?t:n||Xv(r)||t}var QN=function(r){return P(this,null,function*(){let{reference:e,floating:t,strategy:n}=r,i=this.getOffsetParent||aw,s=this.getDimensions;return{reference:KN(e,yield i(t),n),floating:Q({x:0,y:0},yield s(t))}})};function XN(r){return rr(r).direction==="rtl"}var ZN={convertOffsetParentRelativeRectToViewportRelativeRect:$N,getDocumentElement:Ln,getClippingRect:VN,getOffsetParent:aw,getElementRects:QN,getClientRects:jN,getDimensions:zN,getScale:Us,isElement:an,isRTL:XN};var ah=(r,e,t)=>{let n=new Map,i=Q({platform:ZN},t),s=be(Q({},i.platform),{_c:n});return Vv(r,e,be(Q({},i),{platform:s}))};function ow(r,e,t){let n=r.slice();return n[5]=e[t],n}function uw(r,e,t){let n=r.slice();n[40]=e[t],n[43]=t;let i=n[17](n[40].taskLocation.path);return n[41]=i,n}function lw(r){let e,t,n,i=r[10],s=[];for(let a=0;a<i.length;a+=1)s[a]=dw(uw(r,i,a));return{c(){e=K("ul");for(let a=0;a<s.length;a+=1)s[a].c();W(e,"class","task-dependency-dropdown")},m(a,o){Te(a,e,o);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(e,null);r[31](e),t||(n=De(e,"mouseleave",r[32]),t=!0)},p(a,o){if(o[0]&928832){i=a[10];let u;for(u=0;u<i.length;u+=1){let l=uw(a,i,u);s[u]?s[u].p(l,o):(s[u]=dw(l),s[u].c(),s[u].m(e,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=i.length}},d(a){a&&me(e),qi(s,a),r[31](null),t=!1,n()}}}function cw(r){let e,t=r[41]+"",n,i,s;function a(...o){return r[28](r[41],...o)}return{c(){e=K("div"),n=Ae(t),W(e,"class","dependency-path")},m(o,u){Te(o,e,u),I(e,n),i||(s=De(e,"mouseenter",a),i=!0)},p(o,u){r=o,u[0]&1024&&t!==(t=r[41]+"")&&Ir(n,t)},d(o){o&&me(e),i=!1,s()}}}function dw(r){let e,t,n,i=r[40].status.symbol+"",s,a,o=Ii(r[40])+"",u,l,c,d,p,m;function g(..._){return r[27](r[40],..._)}let b=r[41]&&cw(r);function S(){return r[29](r[40])}function E(){return r[30](r[43])}return{c(){e=K("li"),t=K("div"),n=Ae("["),s=Ae(i),a=Ae("] "),u=Ae(o),c=ue(),b&&b.c(),d=ue(),W(t,"class",l=r[41]?"dependency-name-shared":"dependency-name"),Pn(e,"selected",r[6]!==null&&r[43]===r[11])},m(_,R){Te(_,e,R),I(e,t),I(t,n),I(t,s),I(t,a),I(t,u),I(e,c),b&&b.m(e,null),I(e,d),p||(m=[De(t,"mouseenter",g),De(e,"mousedown",S),De(e,"mouseenter",E)],p=!0)},p(_,R){r=_,R[0]&1024&&i!==(i=r[40].status.symbol+"")&&Ir(s,i),R[0]&1024&&o!==(o=Ii(r[40])+"")&&Ir(u,o),R[0]&1024&&l!==(l=r[41]?"dependency-name-shared":"dependency-name")&&W(t,"class",l),r[41]?b?b.p(r,R):(b=cw(r),b.c(),b.m(e,d)):b&&(b.d(1),b=null),R[0]&2112&&Pn(e,"selected",r[6]!==null&&r[43]===r[11])},d(_){_&&me(e),b&&b.d(),p=!1,Wt(m)}}}function fw(r){let e,t=r[0][r[1]],n=[];for(let i=0;i<t.length;i+=1)n[i]=pw(ow(r,t,i));return{c(){e=K("div");for(let i=0;i<n.length;i+=1)n[i].c();W(e,"class","task-dependencies-container results-dependency")},m(i,s){Te(i,e,s);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null)},p(i,s){if(s[0]&802819){t=i[0][i[1]];let a;for(a=0;a<t.length;a+=1){let o=ow(i,t,a);n[a]?n[a].p(o,s):(n[a]=pw(o),n[a].c(),n[a].m(e,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(i){i&&me(e),qi(n,i)}}}function pw(r){let e,t,n,i=r[5].status.symbol+"",s,a,o=Ii(r[5])+"",u,l,c,d,p,m;function g(){return r[33](r[5])}function b(...S){return r[34](r[5],...S)}return{c(){e=K("div"),t=K("span"),n=Ae("["),s=Ae(i),a=Ae("] "),u=Ae(o),l=ue(),c=K("button"),c.innerHTML='<svg style="display: block; margin: auto;" xmlns="http://www.w3.org/2000/svg" width="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg>',d=ue(),W(t,"class","task-dependency-name"),W(c,"type","button"),W(c,"class","task-dependency-delete"),W(e,"class","task-dependency")},m(S,E){Te(S,e,E),I(e,t),I(t,n),I(t,s),I(t,a),I(t,u),I(e,l),I(e,c),I(e,d),p||(m=[De(c,"click",g),De(e,"mouseenter",b)],p=!0)},p(S,E){r=S,E[0]&3&&i!==(i=r[5].status.symbol+"")&&Ir(s,i),E[0]&3&&o!==(o=Ii(r[5])+"")&&Ir(u,o)},d(S){S&&me(e),p=!1,Wt(m)}}}function JN(r){let e,t=kt(r[2],r[3])+"",n,i,s,a,o,u,l,c,d,p=r[10]&&r[10].length!==0&&lw(r),m=r[0][r[1]].length!==0&&fw(r);return{c(){e=K("label"),n=ue(),i=K("span"),s=K("input"),o=ue(),p&&p.c(),u=ue(),m&&m.c(),l=Rv(),W(e,"for",r[1]),W(s,"accesskey",r[3]),W(s,"id",r[1]),W(s,"class","tasks-modal-dependency-input"),W(s,"type","text"),W(s,"placeholder",r[4]),Wi(()=>r[26].call(i))},m(g,b){Te(g,e,b),e.innerHTML=t,Te(g,n,b),Te(g,i,b),I(i,s),r[22](s),Fr(s,r[6]),a=Pv(i,r[26].bind(i)),Te(g,o,b),p&&p.m(g,b),Te(g,u,b),m&&m.m(g,b),Te(g,l,b),c||(d=[De(s,"input",r[23]),De(s,"keydown",r[24]),De(s,"focus",r[16]),De(s,"blur",r[25])],c=!0)},p(g,b){b[0]&12&&t!==(t=kt(g[2],g[3])+"")&&(e.innerHTML=t),b[0]&2&&W(e,"for",g[1]),b[0]&8&&W(s,"accesskey",g[3]),b[0]&2&&W(s,"id",g[1]),b[0]&16&&W(s,"placeholder",g[4]),b[0]&64&&s.value!==g[6]&&Fr(s,g[6]),g[10]&&g[10].length!==0?p?p.p(g,b):(p=lw(g),p.c(),p.m(u.parentNode,u)):p&&(p.d(1),p=null),g[0][g[1]].length!==0?m?m.p(g,b):(m=fw(g),m.c(),m.m(l.parentNode,l)):m&&(m.d(1),m=null)},i:je,o:je,d(g){g&&me(e),g&&me(n),g&&me(i),r[22](null),a(),g&&me(o),p&&p.d(g),g&&me(u),m&&m.d(g),g&&me(l),c=!1,Wt(d)}}}function eI(r,e,t){let{task:n}=e,{editableTask:i}=e,{allTasks:s}=e,{_onDescriptionKeyDown:a}=e,{type:o}=e,{labelText:u}=e,{accesskey:l}=e,{placeholder:c="Type to search..."}=e,d="",p=null,m=0,g,b=!1,S=!1,E,_;function R(v){t(0,i[o]=[...i[o],v],i),t(6,d=""),t(7,b=!1)}function j(v){t(0,i[o]=i[o].filter(x=>x!==v),i)}function U(v){var x;if(p!==null){switch(v.key){case"ArrowUp":v.preventDefault(),!!m&&m>0?t(11,m-=1):t(11,m=p.length-1);break;case"ArrowDown":v.preventDefault(),!!m&&m<p.length-1?t(11,m+=1):t(11,m=0);break;case"Enter":m!==null?(v.preventDefault(),R(p[m]),t(11,m=null),t(7,b=!1)):a(v);break;default:t(11,m=0);break}m&&((x=_==null?void 0:_.getElementsByTagName("li")[m])===null||x===void 0||x.scrollIntoView({block:"nearest"}))}}function ne(v){return!v&&!S?[]:(S=!1,al(v,s,n,i.blockedBy,i.blocking))}function V(){t(7,b=!0),S=!0}function G(v,x){!v||!x||ah(v,x,{middleware:[vl(6),wl(),ih(),sh({apply(){x&&Object.assign(x.style,{width:`${g}px`})}})]}).then(({x:N,y:he})=>{x.style.left=`${N}px`,x.style.top=`${he}px`})}function xe(v){return v===n.taskLocation.path?"":v}function Me(v){return Ii(v)}function q(v,x){let N=v.createDiv();N.addClasses(["tooltip","pop-up"]),N.innerText=x,ah(v,N,{placement:"top",middleware:[vl(-18),wl()]}).then(({x:he,y:te})=>{N.style.left=`${he}px`,N.style.top=`${te}px`}),v.addEventListener("mouseleave",()=>N.remove())}function $(v){Qe[v?"unshift":"push"](()=>{E=v,t(8,E)})}function O(){d=this.value,t(6,d)}let B=v=>U(v),F=()=>t(7,b=!1);function X(){g=this.clientWidth,t(12,g)}let f=(v,x)=>q(x.currentTarget,Me(v)),h=(v,x)=>q(x.currentTarget,v),y=v=>R(v),T=v=>t(11,m=v);function w(v){Qe[v?"unshift":"push"](()=>{_=v,t(9,_)})}let D=()=>t(11,m=null),M=v=>j(v),A=(v,x)=>q(x.currentTarget,Me(v));return r.$$set=v=>{"task"in v&&t(5,n=v.task),"editableTask"in v&&t(0,i=v.editableTask),"allTasks"in v&&t(20,s=v.allTasks),"_onDescriptionKeyDown"in v&&t(21,a=v._onDescriptionKeyDown),"type"in v&&t(1,o=v.type),"labelText"in v&&t(2,u=v.labelText),"accesskey"in v&&t(3,l=v.accesskey),"placeholder"in v&&t(4,c=v.placeholder)},r.$$.update=()=>{if(r.$$.dirty[0]&768){e:G(E,_)}if(r.$$.dirty[0]&192){e:t(10,p=b?ne(d):null)}},[i,o,u,l,c,n,d,b,E,_,p,m,g,R,j,U,V,xe,Me,q,s,a,$,O,B,F,X,f,h,y,T,w,D,M,A]}var oh=class extends nn{constructor(e){super(),ii(this,e,eI,JN,ni,{task:5,editableTask:0,allTasks:20,_onDescriptionKeyDown:21,type:1,labelText:2,accesskey:3,placeholder:4},null,[-1,-1])}},uh=oh;function mw(r,e,t){let n=r.slice();return n[7]=e[t],n}function hw(r){let e,t=r[7].name+"",n,i,s=r[7].symbol+"",a,o,u;return{c(){e=K("option"),n=Ae(t),i=Ae(" ["),a=Ae(s),o=Ae("]"),e.__value=u=r[7].symbol,e.value=e.__value},m(l,c){Te(l,e,c),I(e,n),I(e,i),I(e,a),I(e,o)},p(l,c){c&1&&t!==(t=l[7].name+"")&&Ir(n,t),c&1&&s!==(s=l[7].symbol+"")&&Ir(a,s),c&1&&u!==(u=l[7].symbol)&&(e.__value=u,e.value=e.__value)},d(l){l&&me(e)}}}function tI(r){let e,t=kt("Status",r[1])+"",n,i,s,a,o=r[0],u=[];for(let l=0;l<o.length;l+=1)u[l]=hw(mw(r,o,l));return{c(){e=K("label"),n=ue(),i=K("select");for(let l=0;l<u.length;l+=1)u[l].c();W(e,"for","status"),W(i,"id","status-type"),W(i,"class","status-editor-status-selector"),W(i,"accesskey",r[1]),r[2]===void 0&&Wi(()=>r[6].call(i))},m(l,c){Te(l,e,c),e.innerHTML=t,Te(l,n,c),Te(l,i,c);for(let d=0;d<u.length;d+=1)u[d]&&u[d].m(i,null);Vm(i,r[2],!0),s||(a=[De(i,"change",r[6]),De(i,"change",r[3])],s=!0)},p(l,[c]){if(c&2&&t!==(t=kt("Status",l[1])+"")&&(e.innerHTML=t),c&1){o=l[0];let d;for(d=0;d<o.length;d+=1){let p=mw(l,o,d);u[d]?u[d].p(p,c):(u[d]=hw(p),u[d].c(),u[d].m(i,null))}for(;d<u.length;d+=1)u[d].d(1);u.length=o.length}c&2&&W(i,"accesskey",l[1]),c&5&&Vm(i,l[2])},i:je,o:je,d(l){l&&me(e),l&&me(n),l&&me(i),qi(u,l),s=!1,Wt(a)}}}function rI(r,e,t){let{task:n}=e,{editableTask:i}=e,{statusOptions:s}=e,{accesskey:a}=e,o=n.status.symbol,u=()=>{let c=s.find(p=>p.symbol===o);if(c)t(4,i.status=c,i);else{console.log(`Error in EditTask: cannot find status with symbol ${o}`);return}let d=n.handleNewStatus(c).pop();d&&(t(4,i.doneDate=d.done.formatAsDate(),i),t(4,i.cancelledDate=d.cancelled.formatAsDate(),i))};function l(){o=Av(this),t(2,o),t(0,s)}return r.$$set=c=>{"task"in c&&t(5,n=c.task),"editableTask"in c&&t(4,i=c.editableTask),"statusOptions"in c&&t(0,s=c.statusOptions),"accesskey"in c&&t(1,a=c.accesskey)},[s,a,o,u,i,n,l]}var lh=class extends nn{constructor(e){super(),ii(this,e,rI,tI,ni,{task:5,editableTask:4,statusOptions:0,accesskey:1})}},gw=lh;function yw(r,e,t){let n=r.slice();return n[56]=e[t].value,n[57]=e[t].label,n[58]=e[t].symbol,n[59]=e[t].accessKey,n[60]=e[t].accessKeyIndex,n}function nI(r){let e,t=r[57]+"",n;return{c(){e=K("span"),n=Ae(t)},m(i,s){Te(i,e,s),I(e,n)},p:je,d(i){i&&me(e)}}}function iI(r){let e,t=r[57].substring(0,r[60])+"",n,i,s=r[57].substring(r[60],r[60]+1)+"",a,o,u=r[57].substring(r[60]+1)+"",l;return{c(){e=K("span"),n=Ae(t),i=K("span"),a=Ae(s),o=K("span"),l=Ae(u),W(i,"class","accesskey")},m(c,d){Te(c,e,d),I(e,n),Te(c,i,d),I(i,a),Te(c,o,d),I(o,l)},p:je,d(c){c&&me(e),c&&me(i),c&&me(o)}}}function sI(r){let e,t=r[58]+"",n;return{c(){e=K("span"),n=Ae(t)},m(i,s){Te(i,e,s),I(e,n)},p:je,d(i){i&&me(e)}}}function bw(r){let e,t,n,i,s,a,o,u,l=r[58]&&r[58].charCodeAt(0)>=256,c,d,p,m,g;function b(R,j){return R[11]?iI:nI}let S=b(r,[-1,-1,-1]),E=S(r),_=l&&sI(r);return p=Cv(r[36][0]),{c(){e=K("div"),t=K("input"),a=ue(),o=K("label"),E.c(),u=ue(),_&&_.c(),d=ue(),W(t,"type","radio"),W(t,"id",n="priority-"+r[56]),t.__value=i=r[56],t.value=t.__value,W(t,"accesskey",s=r[16](r[59])),W(o,"for",c="priority-"+r[56]),W(e,"class","task-modal-priority-option-container"),p.p(t)},m(R,j){Te(R,e,j),I(e,t),t.checked=t.__value===r[3].priority,I(e,a),I(e,o),E.m(o,null),I(o,u),_&&_.m(o,null),I(e,d),m||(g=De(t,"change",r[35]),m=!0)},p(R,j){j[0]&65536&&s!==(s=R[16](R[59]))&&W(t,"accesskey",s),j[0]&8&&(t.checked=t.__value===R[3].priority),S===(S=b(R,j))&&E?E.p(R,j):(E.d(1),E=S(R),E&&(E.c(),E.m(o,u))),l&&_.p(R,j)},d(R){R&&me(e),E.d(),_&&_.d(),p.r(),m=!1,g()}}}function aI(r){let e;return{c(){e=K("div"),e.innerHTML="<i>Blocking and blocked by fields are disabled when vault tasks is empty</i>"},m(t,n){Te(t,e,n)},p:je,i:je,o:je,d(t){t&&me(e)}}}function oI(r){let e,t,n,i;return e=new uh({props:{type:"blockedBy",labelText:"Before this",task:r[0],editableTask:r[3],allTasks:r[2],_onDescriptionKeyDown:r[27],accesskey:r[16]("b"),placeholder:"Search for tasks that the task being edited depends on..."}}),n=new uh({props:{type:"blocking",labelText:"After this",task:r[0],editableTask:r[3],allTasks:r[2],_onDescriptionKeyDown:r[27],accesskey:r[16]("e"),placeholder:"Search for tasks that depend on this task being done..."}}),{c(){sn(e.$$.fragment),t=ue(),sn(n.$$.fragment)},m(s,a){Lr(e,s,a),Te(s,t,a),Lr(n,s,a),i=!0},p(s,a){let o={};a[0]&1&&(o.task=s[0]),a[0]&8&&(o.editableTask=s[3]),a[0]&4&&(o.allTasks=s[2]),a[0]&65536&&(o.accesskey=s[16]("b")),e.$set(o);let u={};a[0]&1&&(u.task=s[0]),a[0]&8&&(u.editableTask=s[3]),a[0]&4&&(u.allTasks=s[2]),a[0]&65536&&(u.accesskey=s[16]("e")),n.$set(u)},i(s){i||(tr(e.$$.fragment,s),tr(n.$$.fragment,s),i=!0)},o(s){_r(e.$$.fragment,s),_r(n.$$.fragment,s),i=!1},d(s){vr(e,s),s&&me(t),vr(n,s)}}}function uI(r){let e,t,n,i=kt("Description",r[16]("t"))+"",s,a,o,u,l,c,d,p,m,g,b,S,E,_,R=kt("Recurs",r[16]("r"))+"",j,U,ne,V,G,xe,Me,q,$,O,B,F,X,f,h,y,T,w,D,M,A,v,x,N=kt("Only future dates:",r[16]("f"))+"",he,te,ae,Pe,Ge,Gn,Or,Ye,ft,Pt,Xe,Zo,or,Gr,aa,Y,Be,rt,Ht,Yn,Nt,pn,es,Yr,ur,ts,rs,oa,Br,mn,Jo,Le,Bn,ua,It,_c,jh,ns=r[24],Dt=[];for(let C=0;C<ns.length;C+=1)Dt[C]=bw(yw(r,ns,C));function Ck(C){r[38](C)}function Ak(C){r[39](C)}let vc={id:"due",dateSymbol:r[20],forwardOnly:r[3].forwardOnly,accesskey:r[16]("d")};r[3].dueDate!==void 0&&(vc.date=r[3].dueDate),r[7]!==void 0&&(vc.isDateValid=r[7]),O=new $i({props:vc}),Qe.push(()=>$t(O,"date",Ck)),Qe.push(()=>$t(O,"isDateValid",Ak));function Pk(C){r[40](C)}function Nk(C){r[41](C)}let wc={id:"scheduled",dateSymbol:r[19],forwardOnly:r[3].forwardOnly,accesskey:r[16]("s")};r[3].scheduledDate!==void 0&&(wc.date=r[3].scheduledDate),r[8]!==void 0&&(wc.isDateValid=r[8]),f=new $i({props:wc}),Qe.push(()=>$t(f,"date",Pk)),Qe.push(()=>$t(f,"isDateValid",Nk));function Ik(C){r[42](C)}function Fk(C){r[43](C)}let kc={id:"start",dateSymbol:r[18],forwardOnly:r[3].forwardOnly,accesskey:r[16]("a")};r[3].startDate!==void 0&&(kc.date=r[3].startDate),r[9]!==void 0&&(kc.isDateValid=r[9]),w=new $i({props:kc}),Qe.push(()=>$t(w,"date",Ik)),Qe.push(()=>$t(w,"isDateValid",Fk));let Gh=[oI,aI],Hn=[];function Yh(C,ee){return C[2].length>0&&C[15]?0:1}Ye=Yh(r,[-1,-1,-1]),ft=Hn[Ye]=Gh[Ye](r);function Lk(C){r[45](C)}let Bh={task:r[0],statusOptions:r[1],accesskey:r[16]("u")};r[3]!==void 0&&(Bh.editableTask=r[3]),Gr=new gw({props:Bh}),Qe.push(()=>$t(Gr,"editableTask",Lk));function Uk(C){r[46](C)}function Wk(C){r[47](C)}let Ec={id:"created",dateSymbol:r[22],forwardOnly:r[3].forwardOnly,accesskey:r[16]("c")};r[3].createdDate!==void 0&&(Ec.date=r[3].createdDate),r[5]!==void 0&&(Ec.isDateValid=r[5]),Be=new $i({props:Ec}),Qe.push(()=>$t(Be,"date",Uk)),Qe.push(()=>$t(Be,"isDateValid",Wk));function qk(C){r[48](C)}function $k(C){r[49](C)}let Sc={id:"done",dateSymbol:r[23],forwardOnly:r[3].forwardOnly,accesskey:r[16]("x")};r[3].doneDate!==void 0&&(Sc.date=r[3].doneDate),r[6]!==void 0&&(Sc.isDateValid=r[6]),Nt=new $i({props:Sc}),Qe.push(()=>$t(Nt,"date",qk)),Qe.push(()=>$t(Nt,"isDateValid",$k));function jk(C){r[50](C)}function Gk(C){r[51](C)}let Oc={id:"cancelled",dateSymbol:r[21],forwardOnly:r[3].forwardOnly,accesskey:r[16]("-")};return r[3].cancelledDate!==void 0&&(Oc.date=r[3].cancelledDate),r[4]!==void 0&&(Oc.isDateValid=r[4]),ur=new $i({props:Oc}),Qe.push(()=>$t(ur,"date",jk)),Qe.push(()=>$t(ur,"isDateValid",Gk)),{c(){e=K("form"),t=K("section"),n=K("label"),s=ue(),a=K("textarea"),u=ue(),l=K("section"),c=K("label"),d=Ae("Priority"),m=ue();for(let C=0;C<Dt.length;C+=1)Dt[C].c();g=ue(),b=K("hr"),S=ue(),E=K("section"),_=K("label"),j=ue(),U=K("input"),V=ue(),G=K("code"),xe=Ae(r[17]),Me=ue(),q=new As(!1),$=ue(),sn(O.$$.fragment),X=ue(),sn(f.$$.fragment),T=ue(),sn(w.$$.fragment),A=ue(),v=K("div"),x=K("label"),he=ue(),te=K("input"),Pe=ue(),Ge=K("hr"),Gn=ue(),Or=K("section"),ft.c(),Pt=ue(),Xe=K("hr"),Zo=ue(),or=K("section"),sn(Gr.$$.fragment),Y=ue(),sn(Be.$$.fragment),Yn=ue(),sn(Nt.$$.fragment),Yr=ue(),sn(ur.$$.fragment),oa=ue(),Br=K("section"),mn=K("button"),Jo=Ae("Apply"),Bn=ue(),ua=K("button"),ua.textContent="Cancel",W(n,"for","description"),W(a,"id","description"),W(a,"class","tasks-modal-description"),W(a,"placeholder","Take out the trash"),W(a,"accesskey",o=r[16]("t")),W(t,"class","tasks-modal-description-section"),W(c,"for",p="priority-"+r[3].priority),W(l,"class","tasks-modal-priority-section"),W(_,"for","recurrence"),W(U,"id","recurrence"),W(U,"type","text"),W(U,"class","tasks-modal-date-input"),W(U,"placeholder","Try 'every day when done'"),W(U,"accesskey",ne=r[16]("r")),Pn(U,"tasks-modal-error",!r[10]),q.a=null,W(G,"class","tasks-modal-parsed-date"),W(x,"for","forwardOnly"),W(te,"id","forwardOnly"),W(te,"type","checkbox"),W(te,"class","task-list-item-checkbox tasks-modal-checkbox"),W(te,"accesskey",ae=r[16]("f")),W(v,"class","future-dates-only"),W(E,"class","tasks-modal-dates-section"),W(Or,"class","tasks-modal-dependencies-section"),W(or,"class","tasks-modal-dates-section"),mn.disabled=Le=!r[14],W(mn,"type","submit"),W(mn,"class","mod-cta"),W(ua,"type","button"),W(Br,"class","tasks-modal-button-section"),W(e,"class","tasks-modal")},m(C,ee){Te(C,e,ee),I(e,t),I(t,n),n.innerHTML=i,I(t,s),I(t,a),Fr(a,r[3].description),r[34](a),I(e,u),I(e,l),I(l,c),I(c,d),I(l,m);for(let Hr=0;Hr<Dt.length;Hr+=1)Dt[Hr]&&Dt[Hr].m(l,null);I(e,g),I(e,b),I(e,S),I(e,E),I(E,_),_.innerHTML=R,I(E,j),I(E,U),Fr(U,r[3].recurrenceRule),I(E,V),I(E,G),I(G,xe),I(G,Me),q.m(r[13],G),I(E,$),Lr(O,E,null),I(E,X),Lr(f,E,null),I(E,T),Lr(w,E,null),I(E,A),I(E,v),I(v,x),x.innerHTML=N,I(v,he),I(v,te),te.checked=r[3].forwardOnly,I(e,Pe),I(e,Ge),I(e,Gn),I(e,Or),Hn[Ye].m(Or,null),I(e,Pt),I(e,Xe),I(e,Zo),I(e,or),Lr(Gr,or,null),I(or,Y),Lr(Be,or,null),I(or,Yn),Lr(Nt,or,null),I(or,Yr),Lr(ur,or,null),I(e,oa),I(e,Br),I(Br,mn),I(mn,Jo),I(Br,Bn),I(Br,ua),It=!0,_c||(jh=[De(a,"input",r[33]),De(a,"keydown",r[27]),De(a,"paste",r[28]),De(a,"drop",r[28]),De(l,"keyup",r[25]),De(U,"input",r[37]),De(te,"change",r[44]),De(ua,"click",r[26]),De(e,"submit",Mv(r[29]))],_c=!0)},p(C,ee){if((!It||ee[0]&65536)&&i!==(i=kt("Description",C[16]("t"))+"")&&(n.innerHTML=i),(!It||ee[0]&65536&&o!==(o=C[16]("t")))&&W(a,"accesskey",o),ee[0]&8&&Fr(a,C[3].description),(!It||ee[0]&8&&p!==(p="priority-"+C[3].priority))&&W(c,"for",p),ee[0]&16844808){ns=C[24];let lr;for(lr=0;lr<ns.length;lr+=1){let Hh=yw(C,ns,lr);Dt[lr]?Dt[lr].p(Hh,ee):(Dt[lr]=bw(Hh),Dt[lr].c(),Dt[lr].m(l,null))}for(;lr<Dt.length;lr+=1)Dt[lr].d(1);Dt.length=ns.length}(!It||ee[0]&65536)&&R!==(R=kt("Recurs",C[16]("r"))+"")&&(_.innerHTML=R),(!It||ee[0]&65536&&ne!==(ne=C[16]("r")))&&W(U,"accesskey",ne),ee[0]&8&&U.value!==C[3].recurrenceRule&&Fr(U,C[3].recurrenceRule),(!It||ee[0]&1024)&&Pn(U,"tasks-modal-error",!C[10]),(!It||ee[0]&8192)&&q.p(C[13]);let Hr={};ee[0]&8&&(Hr.forwardOnly=C[3].forwardOnly),ee[0]&65536&&(Hr.accesskey=C[16]("d")),!B&&ee[0]&8&&(B=!0,Hr.date=C[3].dueDate,qt(()=>B=!1)),!F&&ee[0]&128&&(F=!0,Hr.isDateValid=C[7],qt(()=>F=!1)),O.$set(Hr);let la={};ee[0]&8&&(la.forwardOnly=C[3].forwardOnly),ee[0]&65536&&(la.accesskey=C[16]("s")),!h&&ee[0]&8&&(h=!0,la.date=C[3].scheduledDate,qt(()=>h=!1)),!y&&ee[0]&256&&(y=!0,la.isDateValid=C[8],qt(()=>y=!1)),f.$set(la);let ca={};ee[0]&8&&(ca.forwardOnly=C[3].forwardOnly),ee[0]&65536&&(ca.accesskey=C[16]("a")),!D&&ee[0]&8&&(D=!0,ca.date=C[3].startDate,qt(()=>D=!1)),!M&&ee[0]&512&&(M=!0,ca.isDateValid=C[9],qt(()=>M=!1)),w.$set(ca),(!It||ee[0]&65536)&&N!==(N=kt("Only future dates:",C[16]("f"))+"")&&(x.innerHTML=N),(!It||ee[0]&65536&&ae!==(ae=C[16]("f")))&&W(te,"accesskey",ae),ee[0]&8&&(te.checked=C[3].forwardOnly);let Dc=Ye;Ye=Yh(C,ee),Ye===Dc?Hn[Ye].p(C,ee):(Iv(),_r(Hn[Dc],1,1,()=>{Hn[Dc]=null}),Fv(),ft=Hn[Ye],ft?ft.p(C,ee):(ft=Hn[Ye]=Gh[Ye](C),ft.c()),tr(ft,1),ft.m(Or,null));let da={};ee[0]&1&&(da.task=C[0]),ee[0]&2&&(da.statusOptions=C[1]),ee[0]&65536&&(da.accesskey=C[16]("u")),!aa&&ee[0]&8&&(aa=!0,da.editableTask=C[3],qt(()=>aa=!1)),Gr.$set(da);let fa={};ee[0]&8&&(fa.forwardOnly=C[3].forwardOnly),ee[0]&65536&&(fa.accesskey=C[16]("c")),!rt&&ee[0]&8&&(rt=!0,fa.date=C[3].createdDate,qt(()=>rt=!1)),!Ht&&ee[0]&32&&(Ht=!0,fa.isDateValid=C[5],qt(()=>Ht=!1)),Be.$set(fa);let pa={};ee[0]&8&&(pa.forwardOnly=C[3].forwardOnly),ee[0]&65536&&(pa.accesskey=C[16]("x")),!pn&&ee[0]&8&&(pn=!0,pa.date=C[3].doneDate,qt(()=>pn=!1)),!es&&ee[0]&64&&(es=!0,pa.isDateValid=C[6],qt(()=>es=!1)),Nt.$set(pa);let ma={};ee[0]&8&&(ma.forwardOnly=C[3].forwardOnly),ee[0]&65536&&(ma.accesskey=C[16]("-")),!ts&&ee[0]&8&&(ts=!0,ma.date=C[3].cancelledDate,qt(()=>ts=!1)),!rs&&ee[0]&16&&(rs=!0,ma.isDateValid=C[4],qt(()=>rs=!1)),ur.$set(ma),(!It||ee[0]&16384&&Le!==(Le=!C[14]))&&(mn.disabled=Le)},i(C){It||(tr(O.$$.fragment,C),tr(f.$$.fragment,C),tr(w.$$.fragment,C),tr(ft),tr(Gr.$$.fragment,C),tr(Be.$$.fragment,C),tr(Nt.$$.fragment,C),tr(ur.$$.fragment,C),It=!0)},o(C){_r(O.$$.fragment,C),_r(f.$$.fragment,C),_r(w.$$.fragment,C),_r(ft),_r(Gr.$$.fragment,C),_r(Be.$$.fragment,C),_r(Nt.$$.fragment,C),_r(ur.$$.fragment,C),It=!1},d(C){C&&me(e),r[34](null),qi(Dt,C),vr(O),vr(f),vr(w),Hn[Ye].d(),vr(Gr),vr(Be),vr(Nt),vr(ur),_c=!1,Wt(jh)}}}function lI(r,e,t){let n;var i;let{task:s}=e,{onSubmit:a}=e,{statusOptions:o}=e,{allTasks:u}=e,{prioritySymbols:l,recurrenceSymbol:c,startDateSymbol:d,scheduledDateSymbol:p,dueDateSymbol:m,cancelledDateSymbol:g,createdDateSymbol:b,doneDateSymbol:S}=Mn.tasksPluginEmoji.taskSerializer.symbols,E,_={description:"",status:re.TODO,priority:"none",recurrenceRule:"",createdDate:"",startDate:"",scheduledDate:"",dueDate:"",doneDate:"",cancelledDate:"",forwardOnly:!0,blockedBy:[],blocking:[]},R=!0,j=!0,U=!0,ne=!0,V=!0,G=!0,xe=!0,Me="",q=!0,$=!1,O=!0,B=!0,F=[],X=!1,f=[{value:"lowest",label:"Lowest",symbol:l.Lowest,accessKey:"o",accessKeyIndex:1},{value:"low",label:"Low",symbol:l.Low,accessKey:"l",accessKeyIndex:0},{value:"none",label:"Normal",symbol:l.None,accessKey:"n",accessKeyIndex:0},{value:"medium",label:"Medium",symbol:l.Medium,accessKey:"m",accessKeyIndex:0},{value:"high",label:"High",symbol:l.High,accessKey:"h",accessKeyIndex:0},{value:"highest",label:"Highest",symbol:l.Highest,accessKey:"i",accessKeyIndex:1}];function h(Y){return Km(this,void 0,void 0,function*(){if(Y.id!=="")return Y;let Be=u.filter(Ht=>Ht.id!==""),rt=sl(Y,Be.map(Ht=>Ht.id));return yield wr({originalTask:Y,newTasks:rt}),rt})}zm(()=>{let{provideAccessKeys:Y}=Z();t(11,O=Y);let Be=ye.getInstance().removeAsWordFrom(s.description);(Be!=s.description||!ye.getInstance().includedIn(s.description))&&($=!0);let rt="none";s.priority==="5"?rt="lowest":s.priority==="4"?rt="low":s.priority==="2"?rt="medium":s.priority==="1"?rt="high":s.priority==="0"&&(rt="highest");let Ht=[];for(let Yn of s.dependsOn){let Nt=u.find(pn=>pn.id===Yn);!Nt||Ht.push(Nt)}F=u.filter(Yn=>Yn.dependsOn.includes(s.id)),t(3,_={description:Be,status:s.status,priority:rt,recurrenceRule:s.recurrence?s.recurrence.toText():"",createdDate:new $e(s.createdDate).formatAsDate(),startDate:new $e(s.startDate).formatAsDate(),scheduledDate:new $e(s.scheduledDate).formatAsDate(),dueDate:new $e(s.dueDate).formatAsDate(),doneDate:new $e(s.doneDate).formatAsDate(),cancelledDate:new $e(s.cancelledDate).formatAsDate(),forwardOnly:!0,blockedBy:Ht,blocking:F}),t(15,X=!0),setTimeout(()=>{E.focus()},10)});let y=Y=>{if(Y.key&&!Y.altKey&&!Y.ctrlKey){let Be=f.find(rt=>rt.label.charAt(0).toLowerCase()==Y.key);Be&&t(3,_.priority=Be.value,_)}},T=()=>{a([])},w=Y=>{Y.key==="Enter"&&(Y.preventDefault(),B&&M())},D=()=>{setTimeout(()=>{t(3,_.description=_.description.replace(/[\r\n]+/g," "),_)},0)},M=()=>Km(void 0,void 0,void 0,function*(){let Y=_.description.trim();$&&(Y=ye.getInstance().prependTo(Y));let Be=Ai(_.startDate,_.forwardOnly),rt=Ai(_.scheduledDate,_.forwardOnly),Ht=Ai(_.dueDate,_.forwardOnly),Yn=Ai(_.cancelledDate,_.forwardOnly),Nt=Ai(_.createdDate,_.forwardOnly),pn=Ai(_.doneDate,_.forwardOnly),es=null;_.recurrenceRule&&(es=ct.fromText({recurrenceRuleText:_.recurrenceRule,startDate:Be,scheduledDate:rt,dueDate:Ht}));let Yr;switch(_.priority){case"lowest":Yr="5";break;case"low":Yr="4";break;case"medium":Yr="2";break;case"high":Yr="1";break;case"highest":Yr="0";break;default:Yr="3"}let ur=[];for(let Le of _.blockedBy){let Bn=yield h(Le);ur.push(Bn)}let ts=s.id,rs=[],oa=[];(_.blocking.toString()!==F.toString()||_.blocking.length!==0)&&(s.id===""&&(ts=Do(u.filter(Le=>Le.id!=="").map(Le=>Le.id))),rs=F.filter(Le=>!_.blocking.includes(Le)),oa=_.blocking.filter(Le=>!F.includes(Le)));let Br=new oe(Object.assign(Object.assign({},s),{description:Y,status:s.status,priority:Yr,recurrence:es,startDate:Be,scheduledDate:rt,dueDate:Ht,doneDate:pn,createdDate:Nt,cancelledDate:Yn,dependsOn:ur.map(Le=>Le.id),id:ts}));for(let Le of rs){let Bn=fv(Le,Br);yield wr({originalTask:Le,newTasks:Bn})}for(let Le of oa){let Bn=dv(Le,Br);yield wr({originalTask:Le,newTasks:Bn})}let mn=pn||window.moment(),Jo=Br.handleNewStatusWithRecurrenceInUsersOrder(_.status,mn);a(Jo)}),A=[[]];function v(){_.description=this.value,t(3,_)}function x(Y){Qe[Y?"unshift":"push"](()=>{E=Y,t(12,E)})}function N(){_.priority=this.__value,t(3,_)}function he(){_.recurrenceRule=this.value,t(3,_)}function te(Y){r.$$.not_equal(_.dueDate,Y)&&(_.dueDate=Y,t(3,_))}function ae(Y){V=Y,t(7,V)}function Pe(Y){r.$$.not_equal(_.scheduledDate,Y)&&(_.scheduledDate=Y,t(3,_))}function Ge(Y){G=Y,t(8,G)}function Gn(Y){r.$$.not_equal(_.startDate,Y)&&(_.startDate=Y,t(3,_))}function Or(Y){xe=Y,t(9,xe)}function Ye(){_.forwardOnly=this.checked,t(3,_)}function ft(Y){_=Y,t(3,_)}function Pt(Y){r.$$.not_equal(_.createdDate,Y)&&(_.createdDate=Y,t(3,_))}function Xe(Y){U=Y,t(5,U)}function Zo(Y){r.$$.not_equal(_.doneDate,Y)&&(_.doneDate=Y,t(3,_))}function or(Y){ne=Y,t(6,ne)}function Gr(Y){r.$$.not_equal(_.cancelledDate,Y)&&(_.cancelledDate=Y,t(3,_))}function aa(Y){j=Y,t(4,j)}return r.$$set=Y=>{"task"in Y&&t(0,s=Y.task),"onSubmit"in Y&&t(30,a=Y.onSubmit),"statusOptions"in Y&&t(1,o=Y.statusOptions),"allTasks"in Y&&t(2,u=Y.allTasks)},r.$$.update=()=>{if(r.$$.dirty[0]&2048){e:t(16,n=Y=>O?Y:null)}if(r.$$.dirty[0]&8|r.$$.dirty[1]&1){e:if(t(10,q=!0),!_.recurrenceRule)t(13,Me="<i>not recurring</>");else{let Y=t(31,i=ct.fromText({recurrenceRuleText:_.recurrenceRule,startDate:null,scheduledDate:null,dueDate:null}))===null||i===void 0?void 0:i.toText();Y?!_.startDate&&!_.scheduledDate&&!_.dueDate?(t(13,Me="<i>due, scheduled or start date required</i>"),t(10,q=!1)):t(13,Me=Y):(t(13,Me="<i>invalid recurrence rule</i>"),t(10,q=!1))}}if(r.$$.dirty[0]&8){e:t(32,R=_.description.trim()!=="")}if(r.$$.dirty[0]&2032|r.$$.dirty[1]&2){e:t(14,B=V&&q&&G&&xe&&R&&j&&U&&ne)}},[s,o,u,_,j,U,ne,V,G,xe,q,O,E,Me,B,X,n,c,d,p,m,g,b,S,f,y,T,w,D,M,a,i,R,v,x,N,A,he,te,ae,Pe,Ge,Gn,Or,Ye,ft,Pt,Xe,Zo,or,Gr,aa]}var ch=class extends nn{constructor(e){super(),ii(this,e,lI,uI,ni,{task:0,onSubmit:30,statusOptions:1,allTasks:2},null,[-1,-1,-1])}},Tw=ch;var ai=class extends _w.Modal{constructor({app:t,task:n,onSubmit:i,allTasks:s}){super(t);this.task=n,this.allTasks=s,this.onSubmit=a=>{a.length&&i(a),this.close()}}onOpen(){this.titleEl.setText("Create or edit Task"),this.modalEl.style.paddingBottom="0";let{contentEl:t}=this;this.contentEl.style.paddingBottom="0";let n=this.getKnownStatusesAndCurrentTaskStatusIfNotKnown();new Tw({target:t,props:{task:this.task,statusOptions:n,onSubmit:this.onSubmit,allTasks:this.allTasks}})}getKnownStatusesAndCurrentTaskStatusIfNotKnown(){let t=Oe.getInstance().registeredStatuses;return Oe.getInstance().bySymbol(this.task.status.symbol)===re.EMPTY&&t.push(this.task.status),t}onClose(){let{contentEl:t}=this;t.empty()}};function cI(){let{setCreatedDate:r}=Z();return r?window.moment():null}function dI(r){let{setCreatedDate:e}=Z();if(!e||r.createdDate!==null)return!1;let t=r.description==="",n=!ye.getInstance().isEmpty(),i=!ye.getInstance().includedIn(r.description);return t||n&&i}var Ol=({line:r,path:e})=>{var p,m;let t=oe.parseTaskSignifiers(r,bt.fromUnknownPosition(new Ze(e)),wt.fromPath(e)),n=cI();if(t!==null)return dI(t)?new oe(be(Q({},t),{createdDate:n})):t;let i=r.match(J.nonTaskRegex);if(i===null)return console.error("Tasks: Cannot create task on line:",r),new oe({status:re.TODO,description:"",taskLocation:bt.fromUnknownPosition(new Ze(e)),indentation:"",listMarker:"-",priority:"3",createdDate:n,startDate:null,scheduledDate:null,dueDate:null,doneDate:null,cancelledDate:null,recurrence:null,dependsOn:[],id:"",blockLink:"",tags:[],originalMarkdown:"",scheduledDateIsInferred:!1});let s=i[1],a=(p=i[2])!=null?p:"-",o=(m=i[4])!=null?m:" ",u=Oe.getInstance().bySymbolOrCreate(o),l=i[5],c=r.match(J.blockLinkRegex),d=c!==null?c[0]:"";return d!==""&&(l=l.replace(J.blockLinkRegex,"")),new oe({status:u,description:l,taskLocation:bt.fromUnknownPosition(new Ze(e)),indentation:s,listMarker:a,blockLink:d,priority:"3",createdDate:n,startDate:null,scheduledDate:null,dueDate:null,doneDate:null,cancelledDate:null,recurrence:null,tags:[],originalMarkdown:"",scheduledDateIsInferred:!1,id:"",dependsOn:[]})};var vw=(r,e,t,n,i)=>{var p;if(r)return t instanceof dh.MarkdownView;if(!(t instanceof dh.MarkdownView))return;let s=(p=t.file)==null?void 0:p.path;if(s===void 0)return;let o=e.getCursor().line,u=e.getLine(o),l=Ol({line:u,path:s}),c=m=>{let g=wt.removeInferredStatusIfNeeded(l,m).map(b=>b.toFileLineString()).join(`
`);e.setLine(o,g)};new ai({app:n,task:l,onSubmit:c,allTasks:i}).open()};var fh=require("obsidian");var ww=(r,e,t)=>{var u;if(r)return t instanceof fh.MarkdownView;if(!(t instanceof fh.MarkdownView))return;let n=(u=t.file)==null?void 0:u.path;if(n===void 0)return;let i=e.getCursor(),s=i.line,a=e.getLine(s),o=ph(a,n);e.setLine(s,o.text),e.setCursor(fI(i,o))},ph=(r,e)=>{let t=oe.fromLine({line:r,taskLocation:bt.fromUnknownPosition(new Ze(e)),fallbackDate:null});if(t!==null){let n=t.toggleWithRecurrenceInUsersOrder().map(i=>i.toFileLineString());return{text:n.join(`
`),moveTo:{line:n.length-1}}}else{let n=r.match(J.taskRegex);if(n!==null){let i=n[3],a=Oe.getInstance().bySymbol(i).nextStatusSymbol;return{text:r.replace(J.taskRegex,`$1- [${a}] $4`)}}else if(J.listItemRegex.test(r)){let i=r.replace(J.listItemRegex,"$1$2 [ ]");return{text:i,moveTo:{ch:i.length}}}else{let i=r.replace(J.indentationRegex,"$1- ");return{text:i,moveTo:{ch:i.length}}}}},fI=(r,e)=>{var s;let t={line:0,ch:r.ch},n=Q(Q({},t),(s=e.moveTo)!=null?s:{}),i=e.text.split(`
`)[n.line].length;return{line:r.line+n.line,ch:Math.min(n.ch,i)}};var Dl=class{get app(){return this.plugin.app}constructor({plugin:e}){this.plugin=e,e.addCommand({id:"edit-task",name:"Create or edit task",icon:"pencil",editorCheckCallback:(t,n,i)=>vw(t,n,i,this.app,this.plugin.getTasks())}),e.addCommand({id:"toggle-done",name:"Toggle task done",icon:"check-in-circle",editorCheckCallback:ww})}};var oi=class{constructor(){this.hidePostponeButton=!1;this.hideTaskCount=!1;this.hideBacklinks=!1;this.hideEditButton=!1;this.hideUrgency=!0;this.shortMode=!1;this.explainQuery=!1}};function Bi(r,e){let t=`Error: ${r}.
The error message was:
    `,n="";return e instanceof Error?n+=e:n+="Unknown error",`${t}"${n}"`}var pI=Object.prototype.toString,qs=Array.isArray||function(e){return pI.call(e)==="[object Array]"};function hh(r){return typeof r=="function"}function mI(r){return qs(r)?"array":typeof r}function mh(r){return r.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function kw(r,e){return r!=null&&typeof r=="object"&&e in r}function hI(r,e){return r!=null&&typeof r!="object"&&r.hasOwnProperty&&r.hasOwnProperty(e)}var gI=RegExp.prototype.test;function yI(r,e){return gI.call(r,e)}var bI=/\S/;function TI(r){return!yI(bI,r)}var _I={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function vI(r){return String(r).replace(/[&<>"'`=\/]/g,function(t){return _I[t]})}var wI=/\s*/,kI=/\s+/,Ew=/\s*=/,EI=/\s*\}/,SI=/#|\^|\/|>|\{|&|=|!/;function OI(r,e){if(!r)return[];var t=!1,n=[],i=[],s=[],a=!1,o=!1,u="",l=0;function c(){if(a&&!o)for(;s.length;)delete i[s.pop()];else s=[];a=!1,o=!1}var d,p,m;function g(G){if(typeof G=="string"&&(G=G.split(kI,2)),!qs(G)||G.length!==2)throw new Error("Invalid tags: "+G);d=new RegExp(mh(G[0])+"\\s*"),p=new RegExp("\\s*"+mh(G[1])),m=new RegExp("\\s*"+mh("}"+G[1]))}g(e||kr.tags);for(var b=new jo(r),S,E,_,R,j,U;!b.eos();){if(S=b.pos,_=b.scanUntil(d),_)for(var ne=0,V=_.length;ne<V;++ne)R=_.charAt(ne),TI(R)?(s.push(i.length),u+=R):(o=!0,t=!0,u+=" "),i.push(["text",R,S,S+1]),S+=1,R===`
`&&(c(),u="",l=0,t=!1);if(!b.scan(d))break;if(a=!0,E=b.scan(SI)||"name",b.scan(wI),E==="="?(_=b.scanUntil(Ew),b.scan(Ew),b.scanUntil(p)):E==="{"?(_=b.scanUntil(m),b.scan(EI),b.scanUntil(p),E="&"):_=b.scanUntil(p),!b.scan(p))throw new Error("Unclosed tag at "+b.pos);if(E==">"?j=[E,_,S,b.pos,u,l,t]:j=[E,_,S,b.pos],l++,i.push(j),E==="#"||E==="^")n.push(j);else if(E==="/"){if(U=n.pop(),!U)throw new Error('Unopened section "'+_+'" at '+S);if(U[1]!==_)throw new Error('Unclosed section "'+U[1]+'" at '+S)}else E==="name"||E==="{"||E==="&"?o=!0:E==="="&&g(_)}if(c(),U=n.pop(),U)throw new Error('Unclosed section "'+U[1]+'" at '+b.pos);return xI(DI(i))}function DI(r){for(var e=[],t,n,i=0,s=r.length;i<s;++i)t=r[i],t&&(t[0]==="text"&&n&&n[0]==="text"?(n[1]+=t[1],n[3]=t[3]):(e.push(t),n=t));return e}function xI(r){for(var e=[],t=e,n=[],i,s,a=0,o=r.length;a<o;++a)switch(i=r[a],i[0]){case"#":case"^":t.push(i),n.push(i),t=i[4]=[];break;case"/":s=n.pop(),s[5]=i[2],t=n.length>0?n[n.length-1][4]:e;break;default:t.push(i)}return e}function jo(r){this.string=r,this.tail=r,this.pos=0}jo.prototype.eos=function(){return this.tail===""};jo.prototype.scan=function(e){var t=this.tail.match(e);if(!t||t.index!==0)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n};jo.prototype.scanUntil=function(e){var t=this.tail.search(e),n;switch(t){case-1:n=this.tail,this.tail="";break;case 0:n="";break;default:n=this.tail.substring(0,t),this.tail=this.tail.substring(t)}return this.pos+=n.length,n};function Ws(r,e){this.view=r,this.cache={".":this.view},this.parent=e}Ws.prototype.push=function(e){return new Ws(e,this)};Ws.prototype.lookup=function(e){var t=this.cache,n;if(t.hasOwnProperty(e))n=t[e];else{for(var i=this,s,a,o,u=!1;i;){if(e.indexOf(".")>0)for(s=i.view,a=e.split("."),o=0;s!=null&&o<a.length;)o===a.length-1&&(u=kw(s,a[o])||hI(s,a[o])),s=s[a[o++]];else s=i.view[e],u=kw(i.view,e);if(u){n=s;break}i=i.parent}t[e]=n}return hh(n)&&(n=n.call(this.view)),n};function At(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}At.prototype.clearCache=function(){typeof this.templateCache!="undefined"&&this.templateCache.clear()};At.prototype.parse=function(e,t){var n=this.templateCache,i=e+":"+(t||kr.tags).join(":"),s=typeof n!="undefined",a=s?n.get(i):void 0;return a==null&&(a=OI(e,t),s&&n.set(i,a)),a};At.prototype.render=function(e,t,n,i){var s=this.getConfigTags(i),a=this.parse(e,s),o=t instanceof Ws?t:new Ws(t,void 0);return this.renderTokens(a,o,n,e,i)};At.prototype.renderTokens=function(e,t,n,i,s){for(var a="",o,u,l,c=0,d=e.length;c<d;++c)l=void 0,o=e[c],u=o[0],u==="#"?l=this.renderSection(o,t,n,i,s):u==="^"?l=this.renderInverted(o,t,n,i,s):u===">"?l=this.renderPartial(o,t,n,s):u==="&"?l=this.unescapedValue(o,t):u==="name"?l=this.escapedValue(o,t,s):u==="text"&&(l=this.rawValue(o)),l!==void 0&&(a+=l);return a};At.prototype.renderSection=function(e,t,n,i,s){var a=this,o="",u=t.lookup(e[1]);function l(p){return a.render(p,t,n,s)}if(!!u){if(qs(u))for(var c=0,d=u.length;c<d;++c)o+=this.renderTokens(e[4],t.push(u[c]),n,i,s);else if(typeof u=="object"||typeof u=="string"||typeof u=="number")o+=this.renderTokens(e[4],t.push(u),n,i,s);else if(hh(u)){if(typeof i!="string")throw new Error("Cannot use higher-order sections without the original template");u=u.call(t.view,i.slice(e[3],e[5]),l),u!=null&&(o+=u)}else o+=this.renderTokens(e[4],t,n,i,s);return o}};At.prototype.renderInverted=function(e,t,n,i,s){var a=t.lookup(e[1]);if(!a||qs(a)&&a.length===0)return this.renderTokens(e[4],t,n,i,s)};At.prototype.indentPartial=function(e,t,n){for(var i=t.replace(/[^ \t]/g,""),s=e.split(`
`),a=0;a<s.length;a++)s[a].length&&(a>0||!n)&&(s[a]=i+s[a]);return s.join(`
`)};At.prototype.renderPartial=function(e,t,n,i){if(!!n){var s=this.getConfigTags(i),a=hh(n)?n(e[1]):n[e[1]];if(a!=null){var o=e[6],u=e[5],l=e[4],c=a;u==0&&l&&(c=this.indentPartial(a,l,o));var d=this.parse(c,s);return this.renderTokens(d,t,n,c,i)}}};At.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(n!=null)return n};At.prototype.escapedValue=function(e,t,n){var i=this.getConfigEscape(n)||kr.escape,s=t.lookup(e[1]);if(s!=null)return typeof s=="number"&&i===kr.escape?String(s):i(s)};At.prototype.rawValue=function(e){return e[1]};At.prototype.getConfigTags=function(e){return qs(e)?e:e&&typeof e=="object"?e.tags:void 0};At.prototype.getConfigEscape=function(e){if(e&&typeof e=="object"&&!qs(e))return e.escape};var kr={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(r){$o.templateCache=r},get templateCache(){return $o.templateCache}},$o=new At;kr.clearCache=function(){return $o.clearCache()};kr.parse=function(e,t){return $o.parse(e,t)};kr.render=function(e,t,n,i){if(typeof e!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+mI(e)+'" was given as the first argument for mustache#render(template, view, partials)');return $o.render(e,t,n,i)};kr.escape=vI;kr.Scanner=jo;kr.Context=Ws;kr.Writer=At;var gh=kr;var Rw=ga(xw());function Mw(r,e){gh.escape=function(t){return t};try{return gh.render(r,(0,Rw.default)(e))}catch(t){let n="";throw t instanceof Error?n=`There was an error expanding one or more placeholders.

The error message was:
    ${t.message.replace(/ > /g,".").replace("Missing Mustache data property","Unknown property")}`:n="Unknown error expanding placeholders.",n+=`

The problem is in:
    ${r}`,Error(n)}}function Cw(r){return bh(r,[])}function bh(r,e){return{query:{file:new Ze(r),allTasks:e}}}var $s=class{constructor(e=""){this.indentation=e}explainQuery(e){if(e.error!==void 0)return this.explainError(e);let t=[];return t.push(this.explainFilters(e)),t.push(this.explainGroups(e)),t.push(this.explainSorters(e)),t.push(this.explainQueryLimits(e)),t.push(this.explainDebugSettings()),t.filter(n=>n!=="").join(`
`)}explainError(e){let t="";return t+=`Query has an error:
`,t+=e.error+`
`,t}explainFilters(e){return e.filters.length===0?this.indent(`No filters supplied. All tasks will match the query.
`):e.filters.map(n=>n.explainFilterIndented(this.indentation)).join(`
`)}explainGroups(e){let t=e.grouping.length;if(t===0)return this.indent(`No grouping instructions supplied.
`);let n="";for(let i=0;i<t;i++)n+=this.indentation+e.grouping[i].instruction+`
`;return n}explainSorters(e){let t=e.sorting.length;if(t===0)return this.indent(`No sorting instructions supplied.
`);let n="";for(let i=0;i<t;i++)n+=this.indentation+e.sorting[i].instruction+`
`;return n}explainQueryLimits(e){function t(i){let s=`At most ${i} task`;return i!==1&&(s+="s"),s}let n=[];if(e.limit!==void 0){let i=t(e.limit)+`.
`;n.push(this.indent(i))}if(e.taskGroupLimit!==void 0){let i=t(e.taskGroupLimit)+` per group (if any "group by" options are supplied).
`;n.push(this.indent(i))}return n.join(`
`)}explainDebugSettings(){let e="",{debugSettings:t}=Z();return t.ignoreSortInstructions&&(e+=this.indent(`NOTE: All sort instructions, including default sort order, are disabled, due to 'ignoreSortInstructions' setting.
`)),e}indent(e){return this.indentation+e}};var Ee=class{constructor(e,t=[],n=""){this.description=e,this.symbol=n,this.children=t}static booleanAnd(e){return this.combineOrCreateExplanation("All of",e,"AND")}static booleanOr(e){return this.combineOrCreateExplanation("At least one of",e,"OR")}static booleanNot(e){return new Ee("None of",e,"NOT")}static booleanXor(e){return new Ee("Exactly one of",e,"XOR")}asString(e=""){if(this.children.length==0)return e+this.description;let t=e;this.symbol===""?t+=this.description:(t+=this.symbol,this.children.length>1&&(t+=` (${this.description})`),t+=":");let n=e+"  ";for(let i=0;i<this.children.length;i++)t+=`
${this.children[i].asString(n)}`;return t}static combineOrCreateExplanation(e,t,n){if(t.length===2){let i=t[0],s=t[1];if(i.symbol===n&&s.symbol==="")return i.children.push(s),i}return new Ee(e,t,n)}};var js=class{matchesAnyOf(e){return e.some(t=>this.matches(t))}};var Gs=class extends js{constructor(t){super();this.stringToFind=t}matches(t){return Gs.stringIncludesCaseInsensitive(t,this.stringToFind)}static stringIncludesCaseInsensitive(t,n){return t.toLocaleLowerCase().includes(n.toLocaleLowerCase())}explanation(t){return new Ee(t)}};var ui=class extends js{constructor(t){super();this.regex=t}static validateAndConstruct(t){let n=/^\/(.+)\/([^/]*)$/,i=t.match(n);if(i!==null){let s=new RegExp(i[1],i[2]);return new ui(s)}else return null}matches(t){return t.match(this.regex)!==null}static helpMessage(){return String.raw`See https://publish.obsidian.md/tasks/Queries/Regular+Expressions

Regular expressions must look like this:
    /pattern/
or this:
    /pattern/flags

Where:
- pattern: The 'regular expression' pattern to search for.
- flags:   Optional characters that modify the search.
           i => make the search case-insensitive
           u => add Unicode support

Examples:  /^Log/
           /^Log/i
           /File Name\.md/
           /waiting|waits|waited/i
           /\d\d:\d\d/

The following characters have special meaning in the pattern:
to find them literally, you must add a \ before them:
    [\^$.|?*+()

CAUTION! Regular expression (or 'regex') searching is a powerful
but advanced feature that requires thorough knowledge in order to
use successfully, and not miss intended search results.
`}explanation(t){let i=RI(t,"using regex: ",this.regexAsString());return new Ee(i)}regexAsString(){let t=`'${this.regex.source}' with `;switch(this.regex.flags.length){case 0:t+="no flags";break;case 1:t+=`flag '${this.regex.flags}'`;break;default:t+=`flags '${this.regex.flags}'`;break}return t}};function RI(r,e,t){var o;let n=r.match(/\//);if(!n)return"Error explaining instruction. Could not find a slash character";let i=2,s=((o=n.index)!=null?o:i)-i;return`${e.padEnd(s)}${t}`}var Wr=class{constructor(e,t,n,i){this.instruction=e,this.property=t,this.comparator=Wr.maybeReverse(i,n)}static maybeReverse(e,t){return e?Wr.makeReversedComparator(t):t}static makeReversedComparator(e){return(t,n,i)=>e(t,n,i)*-1}};var li=class{constructor(e,t,n,i){this.instruction=e,this.property=t,this.grouper=n,this.reverse=i}};var we=class{canCreateFilterForLine(e){return we.lineMatchesFilter(this.filterRegExp(),e)}static lineMatchesFilter(e,t){return e?e.test(t):!1}static getMatch(e,t){return e?t.match(e):null}fieldNameSingular(){return this.fieldName()}fieldNameSingularEscaped(){return Ds(this.fieldNameSingular())}supportsSorting(){return!1}createSorterFromLine(e){if(!this.supportsSorting())return null;let t=we.getMatch(this.sorterRegExp(),e);if(t===null)return null;let n=!!t[1];return this.createSorter(n)}sorterRegExp(){if(!this.supportsSorting())throw Error(`sorterRegExp() unimplemented for ${this.fieldNameSingular()}`);return new RegExp(`^sort by ${this.fieldNameSingularEscaped()}( reverse)?`,"i")}sorterInstruction(e){let t=`sort by ${this.fieldNameSingular()}`;return e&&(t+=" reverse"),t}comparator(){throw Error(`comparator() unimplemented for ${this.fieldNameSingular()}`)}createSorter(e){return new Wr(this.sorterInstruction(e),this.fieldNameSingular(),this.comparator(),e)}createNormalSorter(){return this.createSorter(!1)}createReverseSorter(){return this.createSorter(!0)}supportsGrouping(){return!1}createGrouperFromLine(e){if(!this.supportsGrouping())return null;let t=we.getMatch(this.grouperRegExp(),e);if(t===null)return null;let n=!!t[1];return this.createGrouper(n)}grouperRegExp(){if(!this.supportsGrouping())throw Error(`grouperRegExp() unimplemented for ${this.fieldNameSingular()}`);return new RegExp(`^group by ${this.fieldNameSingularEscaped()}( reverse)?$`,"i")}grouperInstruction(e){let t=`group by ${this.fieldNameSingular()}`;return e&&(t+=" reverse"),t}grouper(){throw Error(`grouper() unimplemented for ${this.fieldNameSingular()}`)}createGrouper(e){return new li(this.grouperInstruction(e),this.fieldNameSingular(),this.grouper(),e)}createNormalGrouper(){return this.createGrouper(!1)}createReverseGrouper(){return this.createGrouper(!0)}};var Un=class{constructor(e,t){this._rawInstruction=e,this._anyContinuationLinesRemoved=t.trim(),this._anyPlaceholdersExpanded=this._anyContinuationLinesRemoved}recordExpandedPlaceholders(e){this._anyPlaceholdersExpanded=e}get rawInstruction(){return this._rawInstruction}get anyContinuationLinesRemoved(){return this._anyContinuationLinesRemoved}get anyPlaceholdersExpanded(){return this._anyPlaceholdersExpanded}explainStatement(e){function t(a,o){o!==a&&(s+=` =>
${e}${o}`)}let n=this._rawInstruction.trim(),i=n.split(`
`).join(`
`+e),s=`${e}${i}`;return this._rawInstruction.includes(`
`)&&(s+=`
`+e),t(n,this._anyContinuationLinesRemoved),t(this._anyContinuationLinesRemoved,this._anyPlaceholdersExpanded),s}allLinesIdentical(){return this._rawInstruction===this._anyContinuationLinesRemoved&&this._rawInstruction===this._anyPlaceholdersExpanded}};var Et=class{constructor(e,t,n){this._statement=new Un(e,e),this.explanation=n,this.filterFunction=t}get statement(){return this._statement}setStatement(e){this._statement=e}get instruction(){return this._statement.anyPlaceholdersExpanded}explainFilterIndented(e){let t=this._statement.explainStatement(e);return this.onlyNeedsOneLineExplanation()?`${t}
`:`${t} =>
${this.explanation.asString(e+"  ")}
`}simulateExplainFilter(){return this.onlyNeedsOneLineExplanation()?this.explanation:new Ee(this.instruction+" =>",[this.explanation])}onlyNeedsOneLineExplanation(){return this.explanation.asString("")===this.instruction}};var on=class{constructor(e){this.instruction=e}get queryComponent(){return this._queryComponent}set queryComponent(e){this._queryComponent=e}get error(){return this._error}set error(e){this._error=e}isValid(){return this._queryComponent!==void 0}static fromObject(e,t){let n=new on(e);return n._queryComponent=t,n}static fromError(e,t){let n=new on(e);return n._error=t,n}};var ie=class{constructor(e){this.object=e}get instruction(){return this.object.instruction}get filter(){return this.object.queryComponent}isValid(){return this.object.isValid()}get error(){return this.object.error}get filterFunction(){if(this.filter)return this.filter.filterFunction}static fromFilter(e){return new ie(on.fromObject(e.instruction,e))}static fromError(e,t){return new ie(on.fromError(e,t))}};var Ne=class extends we{createFilterOrErrorMessage(e){let t=we.getMatch(this.filterRegExp(),e);if(t===null)return ie.fromError(e,`do not understand query filter (${this.fieldName()})`);let n=t[1].toLowerCase(),i=t[2],s=null;if(n.includes("include"))s=new Gs(i);else if(n.includes("regex")){try{s=ui.validateAndConstruct(i)}catch(u){let l=Bi("Parsing regular expression",u)+`

${ui.helpMessage()}`;return ie.fromError(e,l)}if(s===null)return ie.fromError(e,`Invalid instruction: '${e}'

${ui.helpMessage()}`)}if(s===null)return ie.fromError(e,`do not understand query filter (${this.fieldName()})`);let a=n.match(/not/)!==null,o=new Et(e,this.getFilter(s,a),s.explanation(e));return ie.fromFilter(o)}fieldPattern(){return this.fieldNameSingularEscaped()}filterOperatorPattern(){return"includes|does not include|regex matches|regex does not match"}filterRegExp(){return new RegExp(`^(?:${this.fieldPattern()}) (${this.filterOperatorPattern()}) (.*)`,"i")}getFilter(e,t){return n=>{let i=e.matches(this.value(n));return t?!i:i}}comparator(){return(e,t)=>this.value(e).localeCompare(this.value(t),void 0,{numeric:!0})}grouper(){return e=>[this.value(e)]}static escapeMarkdownCharacters(e){return e.replace(/\\/g,"\\\\").replace(/_/g,"\\_")}};var Hi=class extends Ne{fieldName(){return"description"}value(e){return ye.getInstance().removeAsSubstringFrom(e.description)}supportsSorting(){return!0}comparator(){return(e,t)=>{let n=Hi.cleanDescription(e.description),i=Hi.cleanDescription(t.description);return n.localeCompare(i,void 0,{numeric:!0})}}static cleanDescription(e){e=ye.getInstance().removeAsSubstringFrom(e);let t=/^\[\[?([^\]]*)]]?/,n=e.match(t);if(n!==null){let i=n[1];e=i.substring(i.indexOf("|")+1)+e.replace(t,"")}return e=this.replaceFormatting(e,/^\*\*([^*]+)\*\*/),e=this.replaceFormatting(e,/^\*([^*]+)\*/),e=this.replaceFormatting(e,/^==([^=]+)==/),e=this.replaceFormatting(e,/^__([^_]+)__/),e=this.replaceFormatting(e,/^_([^_]+)_/),e}static replaceFormatting(e,t){let n=e.match(t);return n!==null&&(e=n[1]+e.replace(t,"")),e}};var xl=class{findUnexpandedDateText(e){let t=["<%","YYYY-MM-DD"];for(let n of t)if(e.includes(n))return this.unexpandedDateTextMessage(n);return null}unexpandedDateTextMessage(e){return`Instruction contains unexpanded template text: "${e}" - and cannot be interpreted.

Possible causes:
- The query is an a template file, and is not intended to be searched.
- A command such as "Replace templates in the active file" needs to be run.
- The core "Daily notes" plugin is in use, and the template contained
  date calculations that it does not support.
- Some sample template text was accidentally pasted in to a tasks query,
  instead of in to a template file.

See: https://publish.obsidian.md/tasks/Advanced/Instruction+contains+unexpanded+template+text
`}};var Rl=class{constructor(e,t){this._instruction=e,this._filter=t}canCreateFilterForLine(e){return e.toLocaleLowerCase()===this._instruction.toLocaleLowerCase()}createFilterOrErrorMessage(e){return this.canCreateFilterForLine(e)?ie.fromFilter(new Et(e,this._filter,new Ee(e))):ie.fromError(e,`do not understand filter: ${e}`)}};var Yt=class{constructor(){this._filters=[]}add(e,t){this._filters.push(new Rl(e,t))}canCreateFilterForLine(e){for(let t of this._filters)if(t.canCreateFilterForLine(e))return!0;return!1}createFilterOrErrorMessage(e){for(let t of this._filters){let n=t.createFilterOrErrorMessage(e);if(n.error===void 0)return n}return ie.fromError(e,`do not understand filter: ${e}`)}};var dt=class extends we{constructor(t=null){super();t!==null?this.filterInstructions=t:(this.filterInstructions=new Yt,this.filterInstructions.add(`has ${this.fieldName()} date`,n=>this.date(n)!==null),this.filterInstructions.add(`no ${this.fieldName()} date`,n=>this.date(n)===null),this.filterInstructions.add(`${this.fieldName()} date is invalid`,n=>{let i=this.date(n);return i!==null&&!i.isValid()}))}canCreateFilterForLine(t){return this.filterInstructions.canCreateFilterForLine(t)?!0:super.canCreateFilterForLine(t)}createFilterOrErrorMessage(t){var p;let n=this.checkForUnexpandedTemplateText(t);if(n)return ie.fromError(t,n);let i=this.filterInstructions.createFilterOrErrorMessage(t);if(i.isValid())return i;let s=we.getMatch(this.filterRegExp(),t);if(s===null)return ie.fromError(t,"do not understand query filter ("+this.fieldName()+" date)");let a=s[1],o=(p=s[2])==null?void 0:p.toLowerCase(),u=s[3],l=Qt.parseDateRange(u);if(!l.isValid()){let m=Qt.parseDate(a);m.isValid()&&(l=new Rt(m,m))}if(!l.isValid())return ie.fromError(t,"do not understand "+this.fieldName()+" date");let c=this.buildFilterFunction(o,l),d=dt.buildExplanation(this.fieldNameForExplanation(),o,this.filterResultIfFieldMissing(),l);return ie.fromFilter(new Et(t,c,d))}buildFilterFunction(t,n){let i;switch(t){case"before":i=s=>s?s.isBefore(n.start):this.filterResultIfFieldMissing();break;case"after":i=s=>s?s.isAfter(n.end):this.filterResultIfFieldMissing();break;case"on or before":case"in or before":i=s=>s?s.isSameOrBefore(n.end):this.filterResultIfFieldMissing();break;case"on or after":case"in or after":i=s=>s?s.isSameOrAfter(n.start):this.filterResultIfFieldMissing();break;default:i=s=>s?s.isSameOrAfter(n.start)&&s.isSameOrBefore(n.end):this.filterResultIfFieldMissing()}return this.getFilter(i)}getFilter(t){return n=>t(this.date(n))}filterRegExp(){return new RegExp(`^${this.fieldNameForFilterInstruction()} (((?:on|in) or before|before|(?:on|in) or after|after|on|in)? ?(.*))`,"i")}fieldNameForFilterInstruction(){return this.fieldName()}static buildExplanation(t,n,i,s){let a=n,o="YYYY-MM-DD (dddd Do MMMM YYYY)",u;switch(n){case"before":case"on or after":u=s.start.format(o);break;case"after":case"on or before":u=s.end.format(o);break;case"in or before":a="on or before",u=s.end.format(o);break;case"in or after":a="on or after",u=s.start.format(o);break;default:if(!s.start.isSame(s.end)){let c=`${t} date is between:`,d=[new Ee(`${s.start.format(o)} and`),new Ee(`${s.end.format(o)} inclusive`)];return i&&d.push(new Ee(`OR no ${t} date`)),new Ee(c,d)}a="on",u=s.start.format(o);break}let l=`${t} date is ${a} ${u}`;return i&&(l+=` OR no ${t} date`),new Ee(l)}fieldNameForExplanation(){return this.fieldName()}supportsSorting(){return!0}comparator(){return(t,n)=>Tr(this.date(t),this.date(n))}supportsGrouping(){return!0}grouper(){return t=>{let n=this.date(t);return n===null?["No "+this.fieldName()+" date"]:n.isValid()?[n.format("YYYY-MM-DD dddd")]:["%%0%% Invalid "+this.fieldName()+" date"]}}checkForUnexpandedTemplateText(t){return new xl().findUnexpandedDateText(t)}};var Ml=class extends dt{fieldName(){return"created"}date(e){return e.createdDate}filterResultIfFieldMissing(){return!1}};var Cl=class extends dt{fieldName(){return"done"}date(e){return e.doneDate}filterResultIfFieldMissing(){return!1}};var Ys=class extends dt{fieldName(){return"due"}date(e){return e.dueDate}filterResultIfFieldMissing(){return!1}};var un=class extends we{constructor(){super(...arguments);this._filters=new Yt}canCreateFilterForLine(t){return this._filters.canCreateFilterForLine(t)}createFilterOrErrorMessage(t){return this._filters.createFilterOrErrorMessage(t)}filterRegExp(){return null}};var Al=class extends un{constructor(){super(),this._filters.add("exclude sub-items",e=>{if(e.indentation==="")return!0;let t=e.indentation.lastIndexOf(">");return t===-1?!1:/^ ?$/.test(e.indentation.slice(t+1))})}fieldName(){return"exclude"}};var Go=class extends on{};function Th(r,e){let t=r.map(([n])=>n);try{let n=e.includes("return")?e:`return ${e}`,i=e&&new Function(...t,n);return i instanceof Function?Go.fromObject(e,i):Go.fromError(e,"Error parsing group function")}catch(n){return Go.fromError(e,Bi(`Failed parsing expression "${e}"`,n))}}function _h(r,e){let t=e.map(([n,i])=>i);return r(...t)}function vh(r,e,t){try{return _h(r,e)}catch(n){return Bi(`Failed calculating expression "${t}"`,n)}}function Pl(r,e){return[["task",r],["query",e?e.query:null]]}function Aw(r,e,t){let n=Pl(r,t||null),i=Th(n,e);return i.error?i.error:vh(i.queryComponent,n,e)}var Yo=class{constructor(e){this.line=e,this.functionOrError=Th(Pl(null,null),e)}isValid(){return this.functionOrError.isValid()}get parseError(){return this.functionOrError.error}evaluate(e,t){if(!this.isValid())throw Error(`Error: Cannot evaluate an expression which is not valid: "${this.line}" gave error: "${this.parseError}"`);return _h(this.functionOrError.queryComponent,Pl(e,t||null))}evaluateOrCatch(e,t){return this.isValid()?vh(this.functionOrError.queryComponent,Pl(e,t),this.line):`Error: Cannot evaluate an expression which is not valid: "${this.line}" gave error: "${this.parseError}"`}};function wh(r){if(r===null)return"null";let e=typeof r;return e==="object"?r.constructor.name:e}var Nl=class extends we{createFilterOrErrorMessage(e){let t=we.getMatch(this.filterRegExp(),e);if(t===null)return ie.fromError(e,"Unable to parse line");let n=t[1],i=new Yo(n);return i.isValid()?ie.fromFilter(new Et(e,MI(i),new Ee(e))):ie.fromError(e,i.parseError)}fieldName(){return"function"}filterRegExp(){return new RegExp(`^filter by ${this.fieldNameSingularEscaped()} (.*)`,"i")}supportsSorting(){return!0}sorterRegExp(){return new RegExp(`^sort by ${this.fieldNameSingularEscaped()}( reverse)? (.*)`,"i")}createSorterFromLine(e){let t=we.getMatch(this.sorterRegExp(),e);if(t===null)return null;let n=!!t[1],i=t[2],s=new Yo(i);if(!s.isValid())throw new Error(s.parseError);let a=(o,u,l)=>{try{let c=l.queryContext(),d=this.validateTaskSortKey(s.evaluate(o,c)),p=this.validateTaskSortKey(s.evaluate(u,c));return this.compareTaskSortKeys(d,p)}catch(c){throw c instanceof Error&&(c.message+=`: while evaluating instruction '${e}'`),c}};return new Wr(e,this.fieldNameSingular(),a,n)}validateTaskSortKey(e){function t(n){throw new Error(`"${n}" is not a valid sort key`)}return e===void 0&&t("undefined"),Number.isNaN(e)&&t("NaN (Not a Number)"),Array.isArray(e)&&t("array"),e}compareTaskSortKeys(e,t){let n=wh(e),i=wh(t),s=this.compareTaskSortKeysIfOptionalMoment(e,t,n,i);if(s!==void 0)return s;let a=this.compareTaskSortKeysIfEitherIsNull(e,t);if(a!==void 0)return a;if(n!==i)throw new Error(`Unable to compare two different sort key types '${n}' and '${i}' order`);if(n==="string")return e.localeCompare(t,void 0,{numeric:!0});if(n==="TasksDate")return Tr(e.moment,t.moment);if(n==="boolean")return Number(t)-Number(e);let o=Number(e)-Number(t);if(isNaN(o))throw new Error(`Unable to determine sort order for sort key types '${n}' and '${i}'`);return o}compareTaskSortKeysIfOptionalMoment(e,t,n,i){let s=n==="Moment",a=i==="Moment";if(s&&a||s&&t===null||a&&e===null)return Tr(e,t)}compareTaskSortKeysIfEitherIsNull(e,t){if(e===null&&t===null)return 0;if(e===null&&t!==null)return-1;if(e!==null&&t===null)return 1}supportsGrouping(){return!0}createGrouperFromLine(e){let t=we.getMatch(this.grouperRegExp(),e);if(t===null)return null;let n=!!t[1],i=t[2];return new li(e,"function",AI(i),n)}grouperRegExp(){return new RegExp(`^group by ${this.fieldNameSingularEscaped()}( reverse)? (.*)`,"i")}grouper(){throw Error("grouper() function not valid for FunctionField. Use createGrouperFromLine() instead.")}};function MI(r){return(e,t)=>{let n=t.queryContext();return CI(r,e,n)}}function CI(r,e,t){let n=r.evaluate(e,t);if(typeof n=="boolean")return n;throw Error(`filtering function must return true or false. This returned "${n}".`)}function AI(r){return(e,t)=>{let n=t.queryContext();return PI(e,r,n)}}function PI(r,e,t){try{let n=Aw(r,e,t);return Array.isArray(n)?n.map(s=>s.toString()):n===null?[]:[n.toString()]}catch(n){let i=`Error: Failed calculating expression "${e}". The error message was: `;return n instanceof Error?[i+n.message]:[i+"Unknown error"]}}var Il=class extends Ne{fieldName(){return"heading"}value(e){return e.precedingHeader?e.precedingHeader:""}supportsSorting(){return!0}supportsGrouping(){return!0}grouper(){return e=>e.precedingHeader===null||e.precedingHeader.length===0?["(No heading)"]:[e.precedingHeader]}};var Bs=class extends Ne{fieldName(){return"path"}value(e){return e.path}supportsSorting(){return!0}supportsGrouping(){return!0}grouper(){return e=>[Ne.escapeMarkdownCharacters(e.path.replace(".md",""))]}};var kh=class extends we{createFilterOrErrorMessage(e){var n;let t=we.getMatch(this.filterRegExp(),e);if(t!==null){let i=t[5],s=null;switch(i.toLowerCase()){case"lowest":s="5";break;case"low":s="4";break;case"none":s="3";break;case"medium":s="2";break;case"high":s="1";break;case"highest":s="0";break}if(s===null)return ie.fromError(e,"do not understand priority");let a=e,o;switch((n=t[3])==null?void 0:n.toLowerCase()){case"above":o=u=>u.priority.localeCompare(s)<0;break;case"below":o=u=>u.priority.localeCompare(s)>0;break;case"not":o=u=>u.priority!==s;break;default:o=u=>u.priority===s,a=`${this.fieldName()} is ${i}`}return ie.fromFilter(new Et(e,o,new Ee(a)))}else return ie.fromError(e,"do not understand query filter (priority)")}fieldName(){return"priority"}filterRegExp(){return kh.priorityRegexp}supportsSorting(){return!0}comparator(){return(e,t)=>e.priority.localeCompare(t.priority)}supportsGrouping(){return!0}grouper(){return e=>[e.priorityNameGroupText]}},Vi=kh;Vi.priorityRegexp=/^priority(\s+is)?(\s+(above|below|not))?(\s+(lowest|low|none|medium|high|highest))$/i;var Fl=class extends dt{fieldName(){return"scheduled"}date(e){return e.scheduledDate}filterResultIfFieldMissing(){return!1}};var Ll=class extends dt{fieldName(){return"start"}fieldNameForFilterInstruction(){return"starts"}date(e){return e.startDate}filterResultIfFieldMissing(){return!0}};var Ul=class extends dt{constructor(){let e=new Yt;e.add("has happens date",t=>this.dates(t).some(n=>n!==null)),e.add("no happens date",t=>!this.dates(t).some(n=>n!==null)),super(e)}fieldName(){return"happens"}fieldNameForExplanation(){return"due, start or scheduled"}date(e){return this.earliestDate(e)}dates(e){return e.happensDates}earliestDate(e){return e.happens.moment}filterResultIfFieldMissing(){return!1}getFilter(e){return t=>this.dates(t).some(n=>e(n))}};var Wl=class extends un{constructor(){super(),this._filters.add("is recurring",e=>e.recurrence!==null),this._filters.add("is not recurring",e=>e.recurrence===null)}fieldName(){return"recurring"}supportsSorting(){return!0}comparator(){return(e,t)=>e.recurrence!==null&&t.recurrence===null?-1:e.recurrence===null&&t.recurrence!==null?1:0}supportsGrouping(){return!0}grouper(){return e=>e.recurrence!==null?["Recurring"]:["Not Recurring"]}};var ci=class extends un{constructor(){super(),this._filters.add("done",e=>e.isDone),this._filters.add("not done",e=>!e.isDone)}fieldName(){return"status"}supportsSorting(){return!0}comparator(){return(e,t)=>{let n=ci.oldStatusName(e),i=ci.oldStatusName(t);return n<i?1:n>i?-1:0}}static oldStatusName(e){return e.status.symbol===" "?"Todo":"Done"}supportsGrouping(){return!0}grouper(){return e=>[ci.oldStatusName(e)]}};var ql=class extends Ne{fieldNamePlural(){return this.fieldNameSingular()+"s"}fieldName(){return`${this.fieldNameSingular()}/${this.fieldNamePlural()}`}fieldPattern(){return`${this.fieldNameSingular()}|${this.fieldNamePlural()}`}filterOperatorPattern(){return`${super.filterOperatorPattern()}|include|do not include`}value(e){return this.values(e).join(", ")}getFilter(e,t){return n=>{let i=e.matchesAnyOf(this.values(n));return t?!i:i}}createGrouper(e){return new li(this.grouperInstruction(e),this.fieldNamePlural(),this.grouper(),e)}grouperRegExp(){if(!this.supportsGrouping())throw Error(`grouperRegExp() unimplemented for ${this.fieldNameSingular()}`);return new RegExp(`^group by ${this.fieldNamePlural()}( reverse)?$`,"i")}grouperInstruction(e){let t=`group by ${this.fieldNamePlural()}`;return e&&(t+=" reverse"),t}};var zi=class extends ql{constructor(){super();this.filterInstructions=new Yt,this.filterInstructions.add(`has ${this.fieldNameSingular()}`,t=>this.values(t).length>0),this.filterInstructions.add(`has ${this.fieldNamePlural()}`,t=>this.values(t).length>0),this.filterInstructions.add(`no ${this.fieldNameSingular()}`,t=>this.values(t).length===0),this.filterInstructions.add(`no ${this.fieldNamePlural()}`,t=>this.values(t).length===0)}createFilterOrErrorMessage(t){let n=this.filterInstructions.createFilterOrErrorMessage(t);return n.isValid()?n:super.createFilterOrErrorMessage(t)}canCreateFilterForLine(t){return this.filterInstructions.canCreateFilterForLine(t)?!0:super.canCreateFilterForLine(t)}fieldNameSingular(){return"tag"}values(t){return t.tags}supportsSorting(){return!0}createSorterFromLine(t){let n=t.match(this.sorterRegExp());if(n===null)return null;let i=!!n[1],s=isNaN(+n[2])?1:+n[2],a=zi.makeCompareByTagComparator(s);return new Wr(t,this.fieldNameSingular(),a,i)}sorterRegExp(){return/^sort by tag( reverse)?[\s]*(\d+)?/i}comparator(){return zi.makeCompareByTagComparator(1)}static makeCompareByTagComparator(t){return(n,i)=>{if(n.tags.length===0&&i.tags.length===0)return 0;if(n.tags.length===0)return 1;if(i.tags.length===0)return-1;let s=t-1;if(n.tags.length<t&&i.tags.length>=t)return 1;if(i.tags.length<t&&n.tags.length>=t)return-1;if(n.tags.length<t&&i.tags.length<t)return 0;let a=n.tags[s],o=i.tags[s];return a.localeCompare(o,void 0,{numeric:!0})}}supportsGrouping(){return!0}grouper(){return t=>t.tags.length==0?["(No tags)"]:t.tags}};var Hw=ga(Bw());function di(r){return new RegExp("["+Ds(r)+"]").source}var Ph=[["(",")"],["[","]"],["{","}"],['"','"']],qn=class{constructor(e,t,n){this.openFilterChars=e,this.closeFilterChars=t,this.openAndCloseFilterChars=n,this.openFilter=di(this.openFilterChars),this.closeFilter=di(this.closeFilterChars)}static allSupportedDelimiters(){let e="",t="",n="";for(let[i,s]of Ph)e+=i,t+=s,n+=qn.openAndClosing(i,s);return new qn(e,t,n)}static fromInstructionLine(e){let t=e.trim(),i=/^[A-Z ]*\s*(.*)/.exec(t);if(i){let a=i[1],o=a[0],u=a.slice(-1);for(let[l,c]of Ph)if(o===l&&u===c){let d=this.openAndClosing(l,c);return new qn(l,c,d)}}let s="All filters in a Boolean instruction must be inside one of these pairs of delimiter characters: "+Ph.map(([a,o])=>a+"..."+o).join(" or ")+". Combinations of those delimiters are no longer supported.";throw new Error(s)}static openAndClosing(e,t){let n=e;return t!=e&&(n+=t),n}};var fi=class{static preprocessExpression(e,t){let n=fi.splitLine(e,t);return fi.getFiltersAndSimplifiedLine(n,t)}static splitLine(e,t){let n=new RegExp("("+t.closeFilter+"\\s*(?:AND|OR|AND +NOT|OR +NOT|XOR)\\s*"+t.openFilter+")"),i=e.split(n),s=new RegExp("(NOT\\s*"+t.openFilter+")"),a=i.flatMap(l=>l.split(s)).filter(l=>l!==""),o=new RegExp("(^"+di(t.openFilterChars+" ")+"*)"),u=new RegExp("("+di(t.closeFilterChars+" ")+"*$)");return a.flatMap(l=>l.split(o)).flatMap(l=>l.split(u)).filter(l=>l!=="")}static getFiltersAndSimplifiedLine(e,t){let n="",i=1,s={};e.forEach(l=>{if(!fi.isAFilter(l,t))n+=`${l}`;else{let c=`f${i}`;s[c]=l,n+=c,i++}});let a=new RegExp(`(${t.closeFilter})([A-Z])`,"g");n=n.replace(a,"$1 $2");let o=new RegExp(`([A-Z])(${t.openFilter})`,"g");n=n.replace(o,"$1 $2");let u=t.openFilterChars;if(u!='"'&&u!="("){let l=new RegExp(di(u),"g");n=n.replace(l,"(");let c=t.closeFilterChars,d=new RegExp(di(c),"g");n=n.replace(d,")")}return{simplifiedLine:n,filters:s}}static isAFilter(e,t){let n=new RegExp("^"+di(" "+t.openAndCloseFilterChars)+"+$"),i=new RegExp("^ *"+t.closeFilter+" *(AND|OR|XOR) *"+t.openFilter+" *$"),s=new RegExp("^(AND|OR|XOR|NOT) *"+t.openFilter+"$"),a=new RegExp("^"+t.closeFilter+" *(AND|OR|XOR)$");return![n,i,s,a,/^(AND|OR|XOR|NOT)$/].some(u=>RegExp(u).exec(e))}};var Bl=class extends we{constructor(){super();this.supportedOperators=["AND","OR","XOR","NOT"];this.subFields={};let t=qn.allSupportedDelimiters();this.basicBooleanRegexp=new RegExp("(.*(AND|OR|XOR|NOT)\\s*"+t.openFilter+".*|"+t.openFilter+".+"+t.closeFilter+")","g")}filterRegExp(){return this.basicBooleanRegexp}createFilterOrErrorMessage(t){return this.parseLine(t)}fieldName(){return"boolean query"}parseLine(t){if(t.length===0)return ie.fromError(t,"empty line");let n;try{n=qn.fromInstructionLine(t)}catch(o){let u=o instanceof Error?o.message:"unknown error type";return ie.fromError(t,this.helpMessageFromSimpleError(t,u))}let i=fi.preprocessExpression(t,n),s=i.simplifiedLine,a=i.filters;try{let o=(0,Hw.parse)(s);for(let c of o)if(c.name==="IDENTIFIER"&&c.value){let d=c.value.trim(),p=a[d];if(c.value=p,!(p in this.subFields)){let m=Ho(p);if(m===null)return this.helpMessage(t,`couldn't parse sub-expression '${p}'`,i);if(m.error)return this.helpMessage(t,`couldn't parse sub-expression '${p}': ${m.error}`,i);m.filter&&(this.subFields[p]=m.filter)}}else if(c.name==="OPERATOR"){if(c.value==null)return this.helpMessage(t,"empty operator in boolean query",i);if(!this.supportedOperators.includes(c.value))return this.helpMessage(t,`unknown boolean operator '${c.value}'`,i)}let u=(c,d)=>this.filterTaskWithParsedQuery(c,o,d),l=this.constructExplanation(o);return ie.fromFilter(new Et(t,u,l))}catch(o){let u=o instanceof Error?o.message:"unknown error type";return this.helpMessage(t,`malformed boolean query -- ${u} (check the documentation for guidelines)`,i)}}filterTaskWithParsedQuery(t,n,i){let s=u=>u==="true",a=u=>u?"true":"false",o=[];for(let u of n)if(u.name==="IDENTIFIER"){if(u.value==null)throw Error("null token value");let c=this.subFields[u.value.trim()].filterFunction(t,i);o.push(a(c))}else if(u.name==="OPERATOR")if(u.value==="NOT"){let l=s(o.pop());o.push(a(!l))}else if(u.value==="OR"){let l=s(o.pop()),c=s(o.pop());o.push(a(l||c))}else if(u.value==="AND"){let l=s(o.pop()),c=s(o.pop());o.push(a(l&&c))}else if(u.value==="XOR"){let l=s(o.pop()),c=s(o.pop());o.push(a(l&&!c||!l&&c))}else throw Error("Unsupported operator: "+u.value);else throw Error("Unsupported token type: "+u);return s(o[0])}constructExplanation(t){let n=[];for(let i of t)if(i.name==="IDENTIFIER")this.explainExpression(i,n);else if(i.name==="OPERATOR")this.explainOperator(i,n);else throw Error("Unsupported token type: "+i.name);return n[0]}explainExpression(t,n){if(t.value==null)throw Error("null token value");let i=this.subFields[t.value.trim()],s=this.simulateExplainFilter(i);n.push(s)}simulateExplainFilter(t){return t.simulateExplainFilter()}explainOperator(t,n){if(t.value==="NOT"){let i=n.pop();n.push(Ee.booleanNot([i]))}else if(t.value==="OR"){let i=n.pop(),s=n.pop();n.push(Ee.booleanOr([s,i]))}else if(t.value==="AND"){let i=n.pop(),s=n.pop();n.push(Ee.booleanAnd([s,i]))}else if(t.value==="XOR"){let i=n.pop(),s=n.pop();n.push(Ee.booleanXor([s,i]))}else throw Error("Unsupported operator: "+t.value)}helpMessage(t,n,i){let s=i.filters,a=this.stringifySubExpressionsForErrorMessage(s),u=`${this.helpMessageFromSimpleError(t,n)}

The instruction was converted to the following simplified line:
    ${i.simplifiedLine}

Where the sub-expressions in the simplified line are:
${a}

For help, see:
    https://publish.obsidian.md/tasks/Queries/Combining+Filters
`;return ie.fromError(t,u)}stringifySubExpressionsForErrorMessage(t){return Object.entries(t).map(([n,i])=>`    '${n}': '${i}'
        => ${this.stringifySubExpressionStatus(i)}`).join(`
`)}stringifySubExpressionStatus(t){let n=Ho(t);return n?n.error?`ERROR:
           ${n.error.split(`
`).map(s=>s.trim()).join(`
           `)}`:"OK":`ERROR:
           do not understand query`}helpMessageFromSimpleError(t,n){return`Could not interpret the following instruction as a Boolean combination:
    ${t}

The error message is:
    ${n}`}};var Hl=class extends Ne{fieldName(){return"filename"}value(e){let t=e.filename;return t===null?"":t+".md"}supportsSorting(){return!0}supportsGrouping(){return!0}grouper(){return e=>{let t=e.filename;return t===null?["Unknown Location"]:["[["+t+"]]"]}}};var Js=class extends we{canCreateFilterForLine(e){return!1}createFilterOrErrorMessage(e){return ie.fromError(e,"Filtering by urgency is not yet supported")}fieldName(){return"urgency"}filterRegExp(){throw Error(`filterRegExp() unimplemented for ${this.fieldName()}`)}supportsSorting(){return!0}comparator(){return(e,t)=>t.urgency-e.urgency}supportsGrouping(){return!0}grouper(){return e=>[`${e.urgency.toFixed(2)}`]}createGrouper(e){return super.createGrouper(!e)}grouperInstruction(e){return super.grouperInstruction(!e)}};var Vl=class extends Ne{constructor(){super()}fieldName(){return"status.name"}value(e){return e.status.name}supportsSorting(){return!0}supportsGrouping(){return!0}};var fn=class extends we{canCreateFilterForLine(e){let t=new RegExp(`^(?:${this.fieldNameSingularEscaped()})`,"i");return we.lineMatchesFilter(t,e)}createFilterOrErrorMessage(e){let t=we.getMatch(this.filterRegExp(),e);if(t===null)return this.helpMessage(e);let n=t[1].toLowerCase(),i=t[2],s=er[i.toUpperCase()];if(!s)return this.helpMessage(e);let a;switch(n){case"is":a=o=>o.status.type===s;break;case"is not":a=o=>o.status.type!==s;break;default:return this.helpMessage(e)}return ie.fromFilter(new Et(e,a,new Ee(e)))}filterRegExp(){return new RegExp(`^(?:${this.fieldNameSingularEscaped()}) (is|is not) ([^ ]+)$`,"i")}helpMessage(e){let t=Object.values(er).filter(i=>i!=="EMPTY").join(" "),n=`Invalid ${this.fieldNameSingular()} instruction: '${e}'.
    Allowed options: 'is' and 'is not' (without quotes).
    Allowed values:  ${t}
                     Note: values are case-insensitive,
                           so 'in_progress' works too, for example.
    Example:         ${this.fieldNameSingular()} is not NON_TASK`;return ie.fromError(e,n)}fieldName(){return"status.type"}value(e){return e.status.type}supportsSorting(){return!0}comparator(){return(e,t)=>{let n=fn.groupName(e),i=fn.groupName(t);return n.localeCompare(i,void 0,{numeric:!0})}}supportsGrouping(){return!0}grouper(){return e=>[fn.groupName(e)]}static groupName(e){return e.status.typeGroupText}};var zl=class extends Ne{fieldName(){return"recurrence"}value(e){return e.recurrence!==null?e.recurrence.toText():""}supportsGrouping(){return!0}grouper(){return e=>e.recurrence!==null?[e.recurrence.toText()]:["None"]}};var Kl=class extends Ne{fieldName(){return"folder"}value(e){return e.file.folder}supportsGrouping(){return!0}grouper(){return e=>[Ne.escapeMarkdownCharacters(this.value(e))]}};var Ql=class extends Ne{fieldName(){return"root"}value(e){return e.file.root}supportsGrouping(){return!0}grouper(){return e=>[Ne.escapeMarkdownCharacters(this.value(e))]}};var Xl=class extends Ne{fieldName(){return"backlink"}value(e){let t=e.getLinkText({isFilenameUnique:!0});return t===null?"Unknown Location":t}createFilterOrErrorMessage(e){return ie.fromError(e,"backlink field does not support filtering")}canCreateFilterForLine(e){return!1}supportsGrouping(){return!0}grouper(){return e=>{let t=e.filename;if(t===null)return["Unknown Location"];let n=e.precedingHeader;return n===null?["[["+t+"]]"]:[`[[${t}#${n}|${t} > ${n}]]`]}}};var Zl=class extends dt{fieldName(){return"cancelled"}date(e){return e.cancelledDate}filterResultIfFieldMissing(){return!1}};var Jl=class extends un{constructor(){super(),this._filters.add("is blocking",(e,t)=>e.isBlocking(t.allTasks)),this._filters.add("is not blocking",(e,t)=>!e.isBlocking(t.allTasks)),this._filters.add("is blocked",(e,t)=>e.isBlocked(t.allTasks)),this._filters.add("is not blocked",(e,t)=>!e.isBlocked(t.allTasks))}fieldName(){return"blocking"}};var ec=class extends Ne{constructor(){super();this.filterInstructions=new Yt;this.filterInstructions.add("has id",t=>t.id.length>0),this.filterInstructions.add("no id",t=>t.id.length===0)}canCreateFilterForLine(t){return this.filterInstructions.canCreateFilterForLine(t)?!0:super.canCreateFilterForLine(t)}createFilterOrErrorMessage(t){let n=this.filterInstructions.createFilterOrErrorMessage(t);return n.isValid()?n:super.createFilterOrErrorMessage(t)}fieldName(){return"id"}value(t){return t.id}supportsSorting(){return!0}supportsGrouping(){return!0}};var tc=class extends we{constructor(){super();this.filterInstructions=new Yt;this.filterInstructions.add("has depends on",t=>t.dependsOn.length>0),this.filterInstructions.add("no depends on",t=>t.dependsOn.length===0)}canCreateFilterForLine(t){return this.filterInstructions.canCreateFilterForLine(t)?!0:super.canCreateFilterForLine(t)}createFilterOrErrorMessage(t){let n=this.filterInstructions.createFilterOrErrorMessage(t);return n.isValid()?n:ie.fromError(t,"Unknown instruction")}fieldName(){return"blocked by"}filterRegExp(){return null}};var Nh=[()=>new Vl,()=>new fn,()=>new ci,()=>new Wl,()=>new Vi,()=>new Ul,()=>new Zl,()=>new Ml,()=>new Ll,()=>new Fl,()=>new Ys,()=>new Cl,()=>new Bs,()=>new Kl,()=>new Ql,()=>new Xl,()=>new Hi,()=>new zi,()=>new Il,()=>new Al,()=>new Hl,()=>new Js,()=>new zl,()=>new Nl,()=>new ec,()=>new tc,()=>new Jl,()=>new Bl];function Ho(r){for(let e of Nh){let t=e();if(t.canCreateFilterForLine(r))return t.createFilterOrErrorMessage(r)}return null}function Vw(r){let e=/^sort by /i;if(r.match(e)===null)return null;for(let t of Nh){let i=t().createSorterFromLine(r);if(i)return i}return null}function zw(r){let e=/^group by /i;if(r.match(e)===null)return null;for(let t of Nh){let i=t().createGrouperFromLine(r);if(i)return i}return null}var rc=class{constructor(e,t,n){this.nestingLevel=e,this.displayName=t,this.property=n}};var nc=class{constructor(e,t){this.lastHeadingAtLevel=new Array;this.groupers=t;let i=e.keys().next().value.length;for(let s=0;s<i;s++)this.lastHeadingAtLevel.push("")}getHeadingsForTaskGroup(e){let t=new Array;for(let n=0;n<e.length;n++){let i=e[n];if(i!=this.lastHeadingAtLevel[n]){t.push(new rc(n,i,this.groupers[n].property));for(let s=n;s<e.length;s++)this.lastHeadingAtLevel[s]="";this.lastHeadingAtLevel[n]=i}}return t}};var ic=class{constructor(e){this.children=new Map;this.values=[];this.values=e}generateAllPaths(e=[]){let t=new Map;if(this.children.size==0)return t.set([...e],this.values),t;for(let[n,i]of this.children)e.push(n),i.generateAllPaths(e).forEach((a,o)=>t.set(o,a)),e.pop();return t}};var sc=class extends ic{},ac=class{constructor(e,t,n){this.root=new sc(t),this.buildGroupingTree(e,n)}buildGroupingTree(e,t){let n=[this.root];for(let i of e){let s=[];for(let a of n)for(let o of a.values){let u=i.grouper(o,t);u.length===0&&u.push("");for(let l of u){let c=a.children.get(l);c===void 0&&(c=new sc([]),a.children.set(l,c),s.push(c)),c.values.push(o)}}n=s}}generateTaskTreeStorage(){return this.root.generateAllPaths()}};var oc=class{constructor(e,t){this.groups=e,this.groupHeadings=[],this.tasks=t}setGroupHeadings(e){for(let t of e)this.groupHeadings.push(t)}applyTaskLimit(e){this.tasks=this.tasks.slice(0,e)}tasksAsStringOfLines(){let e="";for(let t of this.tasks)e+=t.toFileLineString()+`
`;return e}toString(){let e=`
`;e+=`Group names: [${this.groups}]
`;for(let t of this.groupHeadings)e+=`${"#".repeat(4+t.nestingLevel)} [${t.property}] ${t.displayName}
`;return e+=this.tasksAsStringOfLines(),e}};var ea=class{constructor(e,t,n){this._groups=new Array;this._totalTaskCount=0;this._totalTaskCount=t.length,this._groupers=e;let s=new ac(e,t,n).generateTaskTreeStorage();this.addTaskGroups(s),this.sortTaskGroups(),this.setGroupsHeadings(s)}get groupers(){return this._groupers}get groups(){return this._groups}totalTasksCount(){return this._totalTaskCount}toString(){let e="";e+=`Groupers (if any):
`;for(let n of this._groupers){let i=n.reverse?" reverse":"";e+=`- ${n.property}${i}
`}for(let n of this.groups)e+=n.toString(),e+=`
---
`;return e+=`
${this.totalTasksCount()} tasks
`,e}addTaskGroups(e){for(let[t,n]of e){let i=new oc(t,n);this.addTaskGroup(i)}}addTaskGroup(e){this._groups.push(e)}sortTaskGroups(){let e=(t,n)=>{let i=t.groups,s=n.groups;for(let a=0;a<i.length;a++){let o=this._groupers[a],u=i[a].localeCompare(s[a],void 0,{numeric:!0});if(u!==0)return o.reverse?-u:u}return 0};this._groups.sort(e)}setGroupsHeadings(e){let t=new nc(e,this._groupers);for(let n of this._groups)n.setGroupHeadings(t.getHeadingsForTaskGroup(n.groups))}applyTaskLimit(e){this._groupers.length!==0&&(this._groups.forEach(t=>{t.applyTaskLimit(e)}),this.recalculateTotalTaskCount())}recalculateTotalTaskCount(){let e=[];this._groups.forEach(n=>{e=[...e,...n.tasks]});let t=[...new Set(e)];this._totalTaskCount=t.length}};var pi=class{constructor(e,t){this.queryPath=e,this.allTasks=[...t]}static fromAllTasks(e){return new pi(void 0,e)}queryContext(){return this.queryPath?bh(this.queryPath,this.allTasks):void 0}};function Kw(r){return`task${r!==1?"s":""}`}var Xi=class{constructor(e,t){this.totalTasksCountBeforeLimit=0;this._searchErrorMessage=void 0;this.taskGroups=e,this.totalTasksCountBeforeLimit=t}get searchErrorMessage(){return this._searchErrorMessage}set searchErrorMessage(e){this._searchErrorMessage=e}get totalTasksCount(){return this.taskGroups.totalTasksCount()}totalTasksCountDisplayText(){let e=this.totalTasksCount,t=this.totalTasksCountBeforeLimit;return e===t?`${e} ${Kw(e)}`:`${e} of ${t} ${Kw(t)}`}get groups(){return this.taskGroups.groups}static fromError(e){let t=new Xi(new ea([],[],pi.fromAllTasks([])),0);return t._searchErrorMessage=e,t}};function Qw(r){return r.endsWith("\\")}function Xw(r){return r.endsWith("\\\\")}function aF(r){return r.replace(/^[ \t]*/,"")}function oF(r){return r.replace(/[ \t]*\\$/,"")}function uF(r,e){let t=r;return e&&(t=aF(r)),Xw(t)?t=t.slice(0,-1):Qw(r)&&(t=oF(t)),t}function Zw(r){let e=[],t=!1,n="",i="";for(let s of r.split(`
`)){let a=uF(s,t);t?(n+=`
`+s,i+=" "+a):(n=s,i=a),Xw(s)?t=!1:t=Qw(s),t||(i.trim()!==""&&e.push(new Un(n,i)),n="",i="")}return e}var ta=class{static by(e,t,n){let i=this.defaultSorters().map(a=>a.comparator),s=[];for(let a of e)s.push(a.comparator);return t.sort(ta.makeCompositeComparator([...s,...i],n))}static defaultSorters(){return[new fn().createNormalSorter(),new Js().createNormalSorter(),new Ys().createNormalSorter(),new Vi().createNormalSorter(),new Bs().createNormalSorter()]}static makeCompositeComparator(e,t){return(n,i)=>{for(let s of e){let a=s(n,i,t);if(a!==0)return a}return 0}}};var $n=class{constructor(e,t=void 0){this._limit=void 0;this._taskGroupLimit=void 0;this._taskLayoutOptions=new en;this._queryLayoutOptions=new oi;this._filters=[];this._error=void 0;this._sorting=[];this._grouping=[];this._ignoreGlobalQuery=!1;this.hideOptionsRegexp=/^(hide|show) (task count|backlink|priority|cancelled date|created date|start date|scheduled date|done date|due date|recurrence rule|edit button|postpone button|urgency|tags|depends on|id)/i;this.shortModeRegexp=/^short/i;this.fullModeRegexp=/^full/i;this.explainQueryRegexp=/^explain/i;this.ignoreGlobalQueryRegexp=/^ignore global query/i;this.logger=Ct.getLogger("tasks.Query");this._queryId="";this.limitRegexp=/^limit (groups )?(to )?(\d+)( tasks?)?/i;this.commentRegexp=/^#.*/;this._queryId=this.generateQueryId(10),this.source=e,this.filePath=t,this.debug(`Creating query: ${this.formatQueryForLogging()}`),Zw(e).forEach(n=>{let i=this.expandPlaceholders(n,t);if(this.error===void 0)try{this.parseLine(i,n)}catch(s){let a;s instanceof Error?a=s.message:a="Unknown error",this.setError(a,n);return}})}get queryId(){return this._queryId}parseLine(e,t){switch(!0){case this.shortModeRegexp.test(e):this._queryLayoutOptions.shortMode=!0;break;case this.fullModeRegexp.test(e):this._queryLayoutOptions.shortMode=!1;break;case this.explainQueryRegexp.test(e):this._queryLayoutOptions.explainQuery=!0;break;case this.ignoreGlobalQueryRegexp.test(e):this._ignoreGlobalQuery=!0;break;case this.limitRegexp.test(e):this.parseLimit(e);break;case this.parseSortBy(e):break;case this.parseGroupBy(e):break;case this.hideOptionsRegexp.test(e):this.parseHideOptions(e);break;case this.commentRegexp.test(e):break;case this.parseFilter(e,t):break;default:this.setError("do not understand query",t)}}formatQueryForLogging(){return`[${this.source.split(`
`).join(" ; ")}]`}expandPlaceholders(e,t){let n=e.anyContinuationLinesRemoved;if(n.includes("{{")&&n.includes("}}")&&this.filePath===void 0)return this._error=`The query looks like it contains a placeholder, with "{{" and "}}"
but no file path has been supplied, so cannot expand placeholder values.
The query is:
${n}`,n;let i=n;if(t){let s=Cw(t);try{i=Mw(n,s)}catch(a){return a instanceof Error?this._error=a.message:this._error="Internal error. expandPlaceholders() threw something other than Error.",n}}return e.recordExpandedPlaceholders(i),i}append(e){return this.source===""?e:e.source===""?this:new $n(`${this.source}
${e.source}`,this.filePath)}explainQuery(){return new $s().explainQuery(this)}get limit(){return this._limit}get taskGroupLimit(){return this._taskGroupLimit}get taskLayoutOptions(){return this._taskLayoutOptions}get queryLayoutOptions(){return this._queryLayoutOptions}get filters(){return this._filters}addFilter(e){this._filters.push(e)}get sorting(){return this._sorting}get grouping(){return this._grouping}get error(){return this._error}setError(e,t){t.allLinesIdentical()?this._error=`${e}
Problem line: "${t.rawInstruction}"`:this._error=`${e}
Problem statement:
${t.explainStatement("    ")}
`}get ignoreGlobalQuery(){return this._ignoreGlobalQuery}applyQueryToTasks(e){this.debug(`Executing query: ${this.formatQueryForLogging()}`);let t=new pi(this.filePath,e);try{this.filters.forEach(o=>{e=e.filter(u=>o.filterFunction(u,t))});let{debugSettings:n}=Z(),i=n.ignoreSortInstructions?e:ta.by(this.sorting,e,t),s=i.slice(0,this.limit),a=new ea(this.grouping,s,t);return this._taskGroupLimit!==void 0&&a.applyTaskLimit(this._taskGroupLimit),new Xi(a,i.length)}catch(n){let i="Search failed";return Xi.fromError(Bi(i,n))}}parseHideOptions(e){let t=e.match(this.hideOptionsRegexp);if(t!==null){let n=t[1].toLowerCase()==="hide";switch(t[2].toLowerCase()){case"task count":this._queryLayoutOptions.hideTaskCount=n;break;case"backlink":this._queryLayoutOptions.hideBacklinks=n;break;case"postpone button":this._queryLayoutOptions.hidePostponeButton=n;break;case"priority":this._taskLayoutOptions.setVisibility("priority",!n);break;case"cancelled date":this._taskLayoutOptions.setVisibility("cancelledDate",!n);break;case"created date":this._taskLayoutOptions.setVisibility("createdDate",!n);break;case"start date":this._taskLayoutOptions.setVisibility("startDate",!n);break;case"scheduled date":this._taskLayoutOptions.setVisibility("scheduledDate",!n);break;case"due date":this._taskLayoutOptions.setVisibility("dueDate",!n);break;case"done date":this._taskLayoutOptions.setVisibility("doneDate",!n);break;case"recurrence rule":this._taskLayoutOptions.setVisibility("recurrenceRule",!n);break;case"edit button":this._queryLayoutOptions.hideEditButton=n;break;case"urgency":this._queryLayoutOptions.hideUrgency=n;break;case"tags":this._taskLayoutOptions.setTagsVisibility(!n);break;case"id":this._taskLayoutOptions.setVisibility("id",!n);break;case"depends on":this._taskLayoutOptions.setVisibility("dependsOn",!n);break;default:this.setError("do not understand hide/show option",new Un(e,e))}}}parseFilter(e,t){var i;let n=Ho(e);return n!=null?(n.filter?(n.filter.setStatement(t),this._filters.push(n.filter)):this.setError((i=n.error)!=null?i:"Unknown error",t),!0):!1}parseLimit(e){let t=e.match(this.limitRegexp);if(t===null){this.setError("do not understand query limit",new Un(e,e));return}let n=Number.parseInt(t[3],10);t[1]!==void 0?this._taskGroupLimit=n:this._limit=n}parseSortBy(e){let t=Vw(e);return t?(this._sorting.push(t),!0):!1}parseGroupBy(e){let t=zw(e);return t?(this._grouping.push(t),!0):!1}generateQueryId(e){let t="AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz1234567890";return Array.from({length:e},()=>t[Math.floor(Math.random()*t.length)]).join("")}debug(e,t){this.logger.debugWithId(this._queryId,`"${this.filePath}": ${e}`,t)}};var mi=class{constructor(e=mi.empty){this._source=e}static getInstance(){return mi.instance||(mi.instance=new mi),mi.instance}set(e){this._source=e}query(e=void 0){return new $n(this._source,e)}hasInstructions(){return this._source.trim()!==mi.empty}},Sr=mi;Sr.empty="";var uc=class{constructor({obsidianEvents:e}){this.logger=Ct.getLogger("tasks.Events");this.obsidianEvents=e}onCacheUpdate(e){return this.logger.debug("TasksEvents.onCacheUpdate()"),this.obsidianEvents.on("obsidian-tasks-plugin:cache-update",e)}triggerCacheUpdate(e){this.logger.debug("TasksEvents.triggerCacheUpdate()"),this.obsidianEvents.trigger("obsidian-tasks-plugin:cache-update",e)}onRequestCacheUpdate(e){return this.logger.debug("TasksEvents.onRequestCacheUpdate()"),this.obsidianEvents.on("obsidian-tasks-plugin:request-cache-update",e)}triggerRequestCacheUpdate(e){this.logger.debug("TasksEvents.triggerRequestCacheUpdate()"),this.obsidianEvents.trigger("obsidian-tasks-plugin:request-cache-update",e)}off(e){this.logger.debug("TasksEvents.off()"),this.obsidianEvents.offref(e)}};var rk=require("obsidian");var tk=require("obsidian");var Ih=class{constructor(e){this.newStatus=e}apply(e){return this.isCheckedForTask(e)?[e]:e.handleNewStatusWithRecurrenceInUsersOrder(this.newStatus)}instructionDisplayName(){return`Change status to: [${this.newStatus.symbol}] ${this.newStatus.name}`}isCheckedForTask(e){return this.newStatus.symbol===e.status.symbol}};function Jw(r){let e=[],t=new Fe().coreStatuses.map(n=>n.symbol);for(let n of[!0,!1])for(let i of r.registeredStatuses)t.includes(i.symbol)===n&&e.push(new Ih(i));return e}var ek=require("obsidian");function Vo(r,e){return P(this,null,function*(){yield wr({originalTask:r,newTasks:e})})}var ra=class extends ek.Menu{constructor(t){super();this.taskSaver=t}addItemsForInstructions(t,n){for(let i of t)this.addItemForInstruction(n,i)}addItemForInstruction(t,n){this.addItem(i=>this.getMenuItemCallback(t,i,n))}getMenuItemCallback(t,n,i){n.setTitle(i.instructionDisplayName()).setChecked(i.isCheckedForTask(t)).onClick(()=>P(this,null,function*(){let s=i.apply(t);(s.length!==1||!Object.is(s[0],t))&&(yield this.taskSaver(t,s))}))}};var lc=class extends ra{constructor(e,t,n=Vo){super(n);let i=Jw(e);this.addItemsForInstructions(i,t)}};var cc=class{constructor(){this.data=lF}addDataAttribute(e,t,n){this.data[n].addDataAttribute(e,t,n)}addClassName(e,t){let n=this.data[t].className;e.classList.add(n)}},Fh=class{constructor(e,t,n){if(e==="")throw Error("Developer note: CSS class cannot be an empty string, please specify one.");this.className=e,this.attributeName=t,this.attributeValueCalculator=n}addDataAttribute(e,t,n){if(this.attributeName===Fh.noAttributeName)return;let i=this.attributeValueCalculator(n,t);i!==""&&(e.dataset[this.attributeName]=i)}},$r=Fh;$r.noAttributeName="",$r.noAttributeValueCalculator=()=>"",$r.dateAttributeCalculator=(e,t)=>{let i="far";function s(o){let l=window.moment().startOf("day").diff(o,"days");if(isNaN(l))return null;if(l===0)return"today";let c="";return l>0?c+="past-":l<0&&(c+="future-"),Math.abs(l)<=7?c+=Math.abs(l).toString()+"d":c+=i,c}let a=t[e];if(!Array.isArray(a)&&a instanceof window.moment){let o=s(a);if(o)return o}return""};function zo(r){return new $r(r,$r.noAttributeName,$r.noAttributeValueCalculator)}function na(r,e){return new $r(r,e,$r.dateAttributeCalculator)}var lF={createdDate:na("task-created","taskCreated"),dueDate:na("task-due","taskDue"),startDate:na("task-start","taskStart"),scheduledDate:na("task-scheduled","taskScheduled"),doneDate:na("task-done","taskDone"),cancelledDate:na("task-cancelled","taskCancelled"),priority:new $r("task-priority","taskPriority",(r,e)=>Cn.priorityNameUsingNormal(e.priority).toLocaleLowerCase()),description:zo("task-description"),recurrenceRule:zo("task-recurring"),dependsOn:zo("task-dependsOn"),id:zo("task-id"),blockLink:zo("task-block-link")};function sr(r,e){let t=document.createElement(r);return e.appendChild(t),t}var hi=class{static obsidianMarkdownRenderer(e,t,n,i){return P(this,null,function*(){if(!i)throw new Error("Must call the Obsidian renderer with an Obsidian Component object");yield tk.MarkdownRenderer.renderMarkdown(e,t,n,i)})}constructor({textRenderer:e=hi.obsidianMarkdownRenderer,obsidianComponent:t,parentUlElement:n,taskLayoutOptions:i,queryLayoutOptions:s}){this.textRenderer=e,this.obsidianComponent=t,this.parentUlElement=n,this.taskLayoutOptions=i,this.queryLayoutOptions=s}renderTaskLine(e,t,n){return P(this,null,function*(){let i=sr("li",this.parentUlElement);i.classList.add("task-list-item","plugin-tasks-list-item");let s=sr("span",i);s.classList.add("tasks-list-text"),yield this.taskToHtml(e,s,i);let a=sr("input",i);return a.classList.add("task-list-item-checkbox"),a.type="checkbox",e.status.symbol!==" "&&(a.checked=!0,i.classList.add("is-checked")),e.taskLocation.hasKnownPath&&(a.addEventListener("click",u=>{u.preventDefault(),u.stopPropagation(),a.disabled=!0;let l=e.toggleWithRecurrenceInUsersOrder();wr({originalTask:e,newTasks:l})}),a.addEventListener("contextmenu",u=>{new lc(Oe.getInstance(),e).showAtPosition({x:u.clientX,y:u.clientY})}),a.setAttribute("title","Right-click for options")),i.prepend(a),i.setAttribute("data-task",e.status.symbol.trim()),i.setAttribute("data-line",t.toString()),i.setAttribute("data-task-status-name",e.status.name),i.setAttribute("data-task-status-type",e.status.type),a.setAttribute("data-line",t.toString()),this.queryLayoutOptions.shortMode&&this.addTooltip(e,s,n),i})}taskToHtml(e,t,n){return P(this,null,function*(){let i=new cc,s=Mn.tasksPluginEmoji.taskSerializer;for(let a of this.taskLayoutOptions.shownComponents){let o=s.componentToString(e,this.queryLayoutOptions.shortMode,a);if(o){let u=sr("span",t),l=sr("span",u);yield this.renderComponentText(l,o,a,e),this.addInternalClasses(a,l),i.addClassName(u,a),i.addDataAttribute(u,e,a),i.addDataAttribute(n,e,a)}}for(let a of this.taskLayoutOptions.hiddenComponents)i.addDataAttribute(n,e,a);n.dataset.taskPriority===void 0&&i.addDataAttribute(n,e,"priority")})}renderComponentText(e,t,n,i){return P(this,null,function*(){if(n==="description"){t=ye.getInstance().removeAsWordFromDependingOnSettings(t);let{debugSettings:s}=Z();s.showTaskHiddenData&&(t+=`<br>\u{1F41B} <b>${i.lineNumber}</b> . ${i.sectionStart} . ${i.sectionIndex} . '<code>${i.originalMarkdown}</code>'<br>'<code>${i.path}</code>' > '<code>${i.precedingHeader}</code>'<br>`),yield this.textRenderer(t,e,i.path,this.obsidianComponent);let a=e.querySelector("blockquote"),o=a!=null?a:e,u=o.querySelector("p");if(u!==null){for(;u.firstChild;)o.insertBefore(u.firstChild,u);u.remove()}e.querySelectorAll("p").forEach(l=>{l.hasChildNodes()||l.remove()}),e.querySelectorAll(".footnotes").forEach(l=>{l.remove()})}else e.innerHTML=t})}addInternalClasses(e,t){function n(i){let s=/["&\x00\r\n]/g,a=i.replace(s,"-");return a=a.replace(/^[-_]+/,""),a.length>0?a:null}if(e==="description"){let i=t.getElementsByClassName("tag");for(let s=0;s<i.length;s++){let a=i[s].textContent;if(a){let o=n(a),u=i[s];o&&(u.dataset.tagName=o)}}}}addTooltip(e,t,n){let{recurrenceSymbol:i,startDateSymbol:s,createdDateSymbol:a,scheduledDateSymbol:o,dueDateSymbol:u,cancelledDateSymbol:l,doneDateSymbol:c}=Mn.tasksPluginEmoji.taskSerializer.symbols;t.addEventListener("mouseenter",()=>{function d(b,S,E){S&&b.createDiv().setText(p({signifier:E,date:S}))}function p({signifier:b,date:S}){return`${b} ${S.format(J.dateFormat)} (${S.from(window.moment().startOf("day"))})`}let m=t.createDiv();m.addClasses(["tooltip","pop-up"]),e.recurrence&&m.createDiv().setText(`${i} ${e.recurrence.toText()}`),d(m,e.createdDate,a),d(m,e.startDate,s),d(m,e.scheduledDate,o),d(m,e.dueDate,u),d(m,e.cancelledDate,l),d(m,e.doneDate,c);let g=e.getLinkText({isFilenameUnique:n});g&&m.createDiv().setText(`\u{1F517} ${g}`),t.addEventListener("mouseleave",()=>{m.remove()})})}};var dc=class{constructor({plugin:e}){this.markdownPostProcessor=this._markdownPostProcessor.bind(this);e.registerMarkdownPostProcessor(this._markdownPostProcessor.bind(this))}_markdownPostProcessor(e,t){return P(this,null,function*(){var d;let n=new rk.MarkdownRenderChild(e);t.addChild(n);let i=e.findAll(".task-list-item").filter(p=>{var b;let m=(b=p.textContent)==null?void 0:b.split(`
`);if(m===void 0)return!1;let g=null;for(let S=0;S<m.length;S=S+1)if(m[S]!==""){g=m[S];break}return g===null?!1:ye.getInstance().includedIn(g)});if(i.length===0)return;let s=t.sourcePath,a=t.getSectionInfo(e);if(a===null)return;let o=a.text.split(`
`),u=0,l=[];for(let p=a.lineStart;p<=a.lineEnd;p++){let m=o[p];if(m===void 0)continue;let g=null,b=oe.fromLine({line:m,taskLocation:new bt(new Ze(s),p,a.lineStart,u,g),fallbackDate:null});b!==null&&(l.push(b),u++)}let c=new hi({obsidianComponent:n,parentUlElement:e,taskLayoutOptions:new en,queryLayoutOptions:new oi});for(let p=0;p<i.length;p++){let m=l[p],g=i[p];if(m===void 0||g===void 0)continue;let b=(d=g.getAttr("data-line"))!=null?d:"0",S=Number.parseInt(b,10),E=yield c.renderTaskLine(m,S),_=g.childNodes;for(let U=0;U<_.length;U=U+1){let ne=_[U];ne.nodeName.toLowerCase()==="div"?E.prepend(ne):ne.nodeName.toLowerCase()==="ul"&&E.append(ne)}let R=g.querySelectorAll("[data-footnote-id]"),j=E.querySelectorAll("[data-footnote-id]");if(R.length===j.length)for(let U=0;U<R.length;U++)j[U].replaceWith(R[U]);g.replaceWith(E)}})}};var nk=require("@codemirror/view"),ik=require("obsidian");var sk=()=>nk.ViewPlugin.fromClass(Lh),Lh=class{constructor(e){this.view=e,this.handleClickEvent=this.handleClickEvent.bind(this),this.view.dom.addEventListener("click",this.handleClickEvent)}destroy(){this.view.dom.removeEventListener("click",this.handleClickEvent)}handleClickEvent(e){let{target:t}=e;if(!t||!(t instanceof HTMLInputElement)||t.type!=="checkbox")return!1;let n=t.closest("ul.plugin-tasks-query-result, div.callout-content");if(n){if(n.matches("div.callout-content")){let p=`obsidian-tasks-plugin warning: Tasks cannot add or remove completion dates or make the next copy of a recurring task for tasks written inside a callout when you click their checkboxes in Live Preview. 
If you wanted Tasks to do these things, please undo your change, then either click the line of the task and use the "Toggle Task Done" command, or switch to Reading View to click the checkbox.`;console.warn(p),new ik.Notice(p,45e3)}return!1}let{state:i}=this.view,s=this.view.posAtDOM(t),a=i.doc.lineAt(s),o=oe.fromLine({line:a.text,taskLocation:bt.fromUnknownPosition(new Ze("")),fallbackDate:null});if(o===null)return!1;e.preventDefault();let l=o.toggleWithRecurrenceInUsersOrder().map(p=>p.toFileLineString()).join(i.lineBreak),c=i.update({changes:{from:a.from,to:a.to,insert:l}});this.view.dispatch(c);let d=t.checked;return setTimeout(()=>{t.checked=d},1),!0}};var ia=require("obsidian");function Ko(r,e,t){e&&r.push(cF(t))}function cF(r){return`tasks-layout-hide-${r}`}var fc=class{constructor(e){e?this.queryLayoutOptions=e:this.queryLayoutOptions=new oi}getHiddenClasses(){let e=[],t=[[this.queryLayoutOptions.hideUrgency,"urgency"],[this.queryLayoutOptions.hideBacklinks,"backlinks"],[this.queryLayoutOptions.hideEditButton,"edit-button"],[this.queryLayoutOptions.hidePostponeButton,"postpone-button"]];for(let[n,i]of t)Ko(e,n,i);return this.queryLayoutOptions.shortMode&&e.push("tasks-layout-short-mode"),e}};function ak(r,e,t,n=void 0){let i="";e.isEmpty()||(i+=`Only tasks containing the global filter '${e.get()}'.

`);let s=new $s("  "),a=new $n(r,n);if(!a.ignoreGlobalQuery&&t.hasInstructions()){let o=t.query(n);i+=`Explanation of the global query:

${s.explainQuery(o)}
`}return i+=`Explanation of this Tasks code block query:

${s.explainQuery(a)}`,i}function pc(r,e,t){let n=new $n(r,t);return n.ignoreGlobalQuery?n:e.query(t).append(n)}function ok(r){for(let t of oe.allDateFields()){let n=r[t];if(n&&!n.isValid())return!1}let e=r.happensDates.some(t=>!!(t!=null&&t.isValid()));return!r.isDone&&e}function mc(r){return r.dueDate?"dueDate":r.scheduledDate?"scheduledDate":r.startDate?"startDate":null}function Uh(r,e,t,n){let i=r[e];return lk(i,r,e,t,n)}function uk(r,e,t,n){let i=window.moment();return lk(i,r,e,t,n)}function lk(r,e,t,n,i){let s=new $e(r).postpone(n,i),a=wt.removeInferredStatusIfNeeded(e,[new oe(be(Q({},e),{[t]:s}))])[0];return{postponedDate:s,postponedTask:a}}function ck(r,e){let t=r==null?void 0:r.format("DD MMM YYYY");return`Task's ${e} changed to ${t}`}function dk(r,e,t){return`\u2139\uFE0F ${Wh(r,e,t)} (right-click for more options)`}function Wh(r,e,t){let n=mc(r),i=r[n];return pk(n,i,e,t)}function fk(r,e,t){let n=mc(r),i=window.moment().startOf("day");return pk(n,i,e,t)}function pk(r,e,t,n){let s=new $e(e).postpone(n,t).format("ddd Do MMM"),a=t!=1?t:"a";return e.isSameOrBefore(window.moment(),"day")?`${Ps(r.replace("Date",""))} in ${a} ${n}, on ${s}`.replace(" in 0 days"," today").replace("in a day","tomorrow"):`Postpone ${r.replace("Date"," date")} by ${a} ${n}, to ${s}`}var hc=class{constructor(e){e?this.taskLayoutOptions=e:this.taskLayoutOptions=new en}generateHiddenClasses(){let e=[];return this.taskLayoutOptions.toggleableComponents.forEach(t=>{Ko(e,!this.taskLayoutOptions.isShown(t),t)}),Ko(e,!this.taskLayoutOptions.areTagsShown(),"tags"),e}};var qh=require("obsidian");var gi=class extends ra{constructor(e,t,n=Vo){super(n);let i=(l,c,d,p,m,g)=>{let b=m(t,p,d);c.setTitle(b).onClick(()=>gi.postponeOnClickCallback(l,t,p,d,g,n))},s=fk,a=uk;this.addItem(l=>i(e,l,"days",0,s,a)),this.addItem(l=>i(e,l,"day",1,s,a)),this.addSeparator();let o=Wh,u=Uh;this.addItem(l=>i(e,l,"days",2,o,u)),this.addItem(l=>i(e,l,"days",3,o,u)),this.addItem(l=>i(e,l,"days",4,o,u)),this.addItem(l=>i(e,l,"days",5,o,u)),this.addItem(l=>i(e,l,"days",6,o,u)),this.addSeparator(),this.addItem(l=>i(e,l,"week",1,o,u)),this.addItem(l=>i(e,l,"weeks",2,o,u)),this.addItem(l=>i(e,l,"weeks",3,o,u)),this.addItem(l=>i(e,l,"month",1,o,u))}static postponeOnClickCallback(o,u,l,c){return P(this,arguments,function*(e,t,n,i,s=Uh,a=Vo){let d=mc(t);if(d===null){let g="\u26A0\uFE0F Postponement requires a date: due, scheduled or start.";return new qh.Notice(g,1e4)}let{postponedDate:p,postponedTask:m}=s(t,d,i,n);yield a(t,m),gi.postponeSuccessCallback(e,d,p)})}static postponeSuccessCallback(e,t,n){e.style.pointerEvents="none";let i=ck(n,t);new qh.Notice(i,2e3)}};var Qo=class{constructor(e){this.label=e,this.start()}start(){!this.recordTimings()||performance.mark(this.labelForStart())}finish(){!this.recordTimings()||(performance.mark(this.labelForEnd()),performance.measure(this.label,this.labelForStart(),this.labelForEnd()),this.printDuration())}printDuration(){let e=performance.getEntriesByName(this.label),t=e[e.length-1];t?console.log(this.label+":",t.duration,"milliseconds"):console.log(`Measurement for ${this.label} not found`)}labelForStart(){return`${this.label} - start`}labelForEnd(){return`${this.label} - end`}recordTimings(){let{debugSettings:e}=Z();return e.recordTimings}};var gc=class{constructor({plugin:e,events:t}){this.addQueryRenderChild=this._addQueryRenderChild.bind(this);this.app=e.app,this.plugin=e,this.events=t,e.registerMarkdownCodeBlockProcessor("tasks",this._addQueryRenderChild.bind(this))}_addQueryRenderChild(e,t,n){return P(this,null,function*(){n.addChild(new $h({app:this.app,plugin:this.plugin,events:this.events,container:t,source:e,filePath:n.sourcePath}))})}},$h=class extends ia.MarkdownRenderChild{constructor({app:t,plugin:n,events:i,container:s,source:a,filePath:o}){super(s);switch(this.app=t,this.plugin=n,this.events=i,this.source=a,this.filePath=o,this.containerEl.className){case"block-language-tasks":this.query=pc(this.source,Sr.getInstance(),this.filePath),this.queryType="tasks";break;default:this.query=pc(this.source,Sr.getInstance(),this.filePath),this.queryType="tasks";break}}onload(){this.events.triggerRequestCacheUpdate(this.render.bind(this)),this.renderEventRef=this.events.onCacheUpdate(this.render.bind(this)),this.reloadQueryAtMidnight()}onunload(){this.renderEventRef!==void 0&&this.events.off(this.renderEventRef),this.queryReloadTimeout!==void 0&&clearTimeout(this.queryReloadTimeout)}reloadQueryAtMidnight(){let t=new Date;t.setHours(24,0,0,0);let n=new Date,i=t.getTime()-n.getTime();this.queryReloadTimeout=setTimeout(()=>{this.query=pc(this.source,Sr.getInstance(),this.filePath),this.events.triggerRequestCacheUpdate(this.render.bind(this)),this.reloadQueryAtMidnight()},i+1e3)}render(i){return P(this,arguments,function*({tasks:t,state:n}){var a;let s=sr("div",this.containerEl);n==="Warm"&&this.query.error===void 0?yield this.renderQuerySearchResults(t,n,s):this.query.error!==void 0?this.renderErrorMessage(s,this.query.error):this.renderLoadingMessage(s),(a=this.containerEl.firstChild)==null||a.replaceWith(s)})}renderQuerySearchResults(t,n,i){return P(this,null,function*(){let s=this.explainAndPerformSearch(n,t,i);if(s.searchErrorMessage!==void 0){this.renderErrorMessage(i,s.searchErrorMessage);return}yield this.renderSearchResults(s,i)})}explainAndPerformSearch(t,n,i){let s=new Qo(`Search: ${this.query.queryId} - ${this.filePath}`);s.start(),this.query.debug(`[render] Render called: plugin state: ${t}; searching ${n.length} tasks`),this.query.queryLayoutOptions.explainQuery&&this.createExplanation(i);let a=this.query.applyQueryToTasks(n);return s.finish(),a}renderSearchResults(t,n){return P(this,null,function*(){let i=new Qo(`Render: ${this.query.queryId} - ${this.filePath}`);i.start(),yield this.addAllTaskGroups(t.taskGroups,n);let s=t.totalTasksCount;this.addTaskCount(n,t),this.query.debug(`[render] ${s} tasks displayed`),i.finish()})}renderErrorMessage(t,n){t.createDiv().innerHTML=`<pre>Tasks query: ${n.replace(/\n/g,"<br>")}</pre>`}renderLoadingMessage(t){t.setText("Loading Tasks ...")}createExplanation(t){let n=ak(this.source,ye.getInstance(),Sr.getInstance(),this.filePath),i=sr("pre",t);i.addClasses(["plugin-tasks-query-explanation"]),i.setText(n),t.appendChild(i)}createTaskList(t,n){return P(this,null,function*(){let i=sr("ul",n);i.addClasses(["contains-task-list","plugin-tasks-query-result"]);let s=new hc(this.query.taskLayoutOptions);i.addClasses(s.generateHiddenClasses());let a=new fc(this.query.queryLayoutOptions);i.addClasses(a.getHiddenClasses());let o=this.getGroupingAttribute();o&&o.length>0&&(i.dataset.taskGroupBy=o);let u=new hi({obsidianComponent:this,parentUlElement:i,taskLayoutOptions:this.query.taskLayoutOptions,queryLayoutOptions:this.query.queryLayoutOptions});for(let[l,c]of t.entries())yield this.addTask(i,u,c,l);n.appendChild(i)})}addTask(t,n,i,s){return P(this,null,function*(){let a=this.isFilenameUnique({task:i}),o=yield n.renderTaskLine(i,s,a);o.querySelectorAll("[data-footnote-id]").forEach(d=>d.remove());let l=o.createSpan("task-extras");this.query.queryLayoutOptions.hideUrgency||this.addUrgency(l,i);let c=this.query.queryLayoutOptions.shortMode;this.query.queryLayoutOptions.hideBacklinks||this.addBacklinks(l,i,c,a),this.query.queryLayoutOptions.hideEditButton||this.addEditButton(l,i,this.plugin.getTasks()),!this.query.queryLayoutOptions.hidePostponeButton&&ok(i)&&this.addPostponeButton(l,i,c),t.appendChild(o)})}addEditButton(t,n,i){let s=sr("a",t);s.addClass("tasks-edit"),s.title="Edit task",s.href="#",s.onClickEvent(a=>{a.preventDefault();let o=l=>P(this,null,function*(){yield wr({originalTask:n,newTasks:wt.removeInferredStatusIfNeeded(n,l)})});new ai({app:this.app,task:n,onSubmit:o,allTasks:i}).open()})}addUrgency(t,n){let i=new Intl.NumberFormat().format(n.urgency);t.createSpan({text:i,cls:"tasks-urgency"})}addAllTaskGroups(t,n){return P(this,null,function*(){for(let i of t.groups)yield this.addGroupHeadings(n,i.groupHeadings),yield this.createTaskList(i.tasks,n)})}addGroupHeadings(t,n){return P(this,null,function*(){for(let i of n)yield this.addGroupHeading(t,i)})}addGroupHeading(t,n){return P(this,null,function*(){let i="h6";n.nestingLevel===0?i="h4":n.nestingLevel===1&&(i="h5");let s=sr(i,t);s.addClass("tasks-group-heading"),yield ia.MarkdownRenderer.renderMarkdown(n.displayName,s,this.filePath,this)})}addBacklinks(t,n,i,s){var c;let a=t.createSpan({cls:"tasks-backlink"});i||a.append(" (");let o=sr("a",a);o.rel="noopener",o.target="_blank",o.addClass("internal-link"),i&&o.addClass("internal-link-short-mode");let u;i?u=" \u{1F517}":u=(c=n.getLinkText({isFilenameUnique:s}))!=null?c:"",o.setText(u);let l=this.app.vault;o.addEventListener("click",d=>P(this,null,function*(){let p=yield Zm(n,l);if(p){let[m,g]=p,b=this.app.workspace.getLeaf(ia.Keymap.isModEvent(d));d.preventDefault(),yield b.openFile(g,{eState:{line:m}})}})),o.addEventListener("mousedown",d=>P(this,null,function*(){if(d.button===1){let p=yield Zm(n,l);if(p){let[m,g]=p,b=this.app.workspace.getLeaf("tab");d.preventDefault(),yield b.openFile(g,{eState:{line:m}})}}})),i||a.append(")")}addPostponeButton(t,n,i){let a="day",o=dk(n,1,a),u=sr("a",t);u.addClass("tasks-postpone"),i&&u.addClass("tasks-postpone-short-mode"),u.title=o,u.addEventListener("click",l=>{l.preventDefault(),l.stopPropagation(),gi.postponeOnClickCallback(u,n,1,a)}),u.addEventListener("contextmenu",l=>P(this,null,function*(){l.preventDefault(),l.stopPropagation(),new gi(u,n).showAtPosition({x:l.clientX,y:l.clientY})}))}addTaskCount(t,n){this.query.queryLayoutOptions.hideTaskCount||t.createDiv({text:n.totalTasksCountDisplayText(),cls:"tasks-count"})}isFilenameUnique({task:t}){let n=t.path.match(/([^/]*)\..+$/i);if(n===null)return;let i=n[1];return this.app.vault.getMarkdownFiles().filter(a=>{if(a.basename===i)return!0}).length<2}getGroupingAttribute(){let t=[];for(let n of this.query.grouping)t.push(n.property);return t.join(",")}};var ke=require("obsidian");var yc=class{constructor(e){this._markdown="";this.columnNames=e,this.addTitleRow()}get markdown(){return this._markdown}addTitleRow(){let e="|",t="|";this.columnNames.forEach(n=>{e+=` ${n} |`,t+=" ----- |"}),this._markdown+=`${e}
`,this._markdown+=`${t}
`}addRow(e){let t=this.makeRowText(e);this._markdown+=`${t}
`}addRowIfNew(e){let t=this.makeRowText(e);this._markdown.includes(t)||(this._markdown+=`${t}
`)}makeRowText(e){let t="|";return e.forEach(n=>{t+=` ${n} |`}),t}};function mk(r,e){return r.findIndex(t=>t.symbol===e)}function jn(r){return r===""?r:"`"+(r!==" "?r:"space")+"`"}function dF(r,e){let t=re.getTypeForUnknownSymbol(r.symbol);r.type!==t&&(t==="TODO"&&r.symbol!==" "||e.push(`For information, the conventional type for status symbol ${jn(r.symbol)} is ${jn(t)}: you may wish to review this type.`))}function fF(r,e,t){let n=mk(r,e.nextStatusSymbol);if(n===-1){t.push(`Next symbol ${jn(e.nextStatusSymbol)} is unknown: create a status with symbol ${jn(e.nextStatusSymbol)}.`);return}if(e.type!=="DONE")return;let i=r[n];if(i){if(i.type!=="TODO"&&i.type!=="IN_PROGRESS"){let s="https://publish.obsidian.md/tasks/Getting+Started/Statuses/Recurring+Tasks+and+Custom+Statuses",a=[`This \`DONE\` status is followed by ${jn(i.type)}, not \`TODO\` or \`IN_PROGRESS\`.`,"If used to complete a recurring task, it will instead be followed by `TODO` or `IN_PROGRESS`, to ensure the next task matches the `not done` filter.",`See [Recurring Tasks and Custom Statuses](${s}).`].join("<br>");t.push(a)}}else t.push("Unexpected failure to find the next status.")}function pF(r,e,t){let n=[];return e.symbol===re.EMPTY.symbol?(n.push("Empty symbol: this status will be ignored."),n):mk(r,e.symbol)!=t?(n.push(`Duplicate symbol '${jn(e.symbol)}': this status will be ignored.`),n):(dF(e,n),fF(r,e,n),n)}function hk(r){let e=new yc(["Status Symbol","Next Status Symbol","Status Name","Status Type","Problems (if any)"]),t=Fe.allStatuses(r);return t.forEach((n,i)=>{e.addRow([jn(n.symbol),jn(n.nextStatusSymbol),n.name,jn(n.type),pF(t,n,i).join("<br>")])}),e.markdown}function gk(r,e,t,n){let s=hk(r),a=e.mermaidDiagram(!0);return`# ${t}

## About this file

This file was created by the Obsidian Tasks plugin (version ${n}) to help visualise the task statuses in this vault.

If you change the Tasks status settings, you can get an updated report by:

- Going to \`Settings\` -> \`Tasks\`.
- Clicking on \`Review and check your Statuses\`.

You can delete this file any time.

## Status Settings

<!--
Switch to Live Preview or Reading Mode to see the table.
If there are any Markdown formatting characters in status names, such as '*' or '_',
Obsidian may only render the table correctly in Reading Mode.
-->

These are the status values in the Core and Custom statuses sections.

${s}
## Loaded Settings

<!-- Switch to Live Preview or Reading Mode to see the diagram. -->

These are the settings actually used by Tasks.
${a}`}function yk(){return[[" ","Unchecked","x","TODO"],["x","Checked"," ","DONE"],[">","Rescheduled","x","TODO"],["<","Scheduled","x","TODO"],["!","Important","x","TODO"],["-","Cancelled"," ","CANCELLED"],["/","In Progress","x","IN_PROGRESS"],["?","Question","x","TODO"],["*","Star","x","TODO"],["n","Note","x","TODO"],["l","Location","x","TODO"],["i","Information","x","TODO"],["I","Idea","x","TODO"],["S","Amount","x","TODO"],["p","Pro","x","TODO"],["c","Con","x","TODO"],["b","Bookmark","x","TODO"],['"',"Quote","x","TODO"],["0","Speech bubble 0","0","NON_TASK"],["1","Speech bubble 1","1","NON_TASK"],["2","Speech bubble 2","2","NON_TASK"],["3","Speech bubble 3","3","NON_TASK"],["4","Speech bubble 4","4","NON_TASK"],["5","Speech bubble 5","5","NON_TASK"],["6","Speech bubble 6","6","NON_TASK"],["7","Speech bubble 7","7","NON_TASK"],["8","Speech bubble 8","8","NON_TASK"],["9","Speech bubble 9","9","NON_TASK"]]}function bk(){return[[" ","incomplete","x","TODO"],["x","complete / done"," ","DONE"],["-","cancelled"," ","CANCELLED"],[">","deferred","x","TODO"],["/","in progress, or half-done","x","IN_PROGRESS"],["!","Important","x","TODO"],["?","question","x","TODO"],["R","review","x","TODO"],["+","Inbox / task that should be processed later","x","TODO"],["b","bookmark","x","TODO"],["B","brainstorm","x","TODO"],["D","deferred or scheduled","x","TODO"],["I","Info","x","TODO"],["i","idea","x","TODO"],["N","note","x","TODO"],["Q","quote","x","TODO"],["W","win / success / reward","x","TODO"],["P","pro","x","TODO"],["C","con","x","TODO"]]}function Tk(){return[[" ","Unchecked","x","TODO"],["x","Checked"," ","DONE"],["-","Cancelled"," ","CANCELLED"],["/","In Progress","x","IN_PROGRESS"],[">","Deferred","x","TODO"],["!","Important","x","TODO"],["?","Question","x","TODO"],["r","Review","x","TODO"]]}function _k(){return[[" ","Unchecked","x","TODO"],["x","Regular"," ","DONE"],["X","Checked"," ","DONE"],["-","Dropped"," ","CANCELLED"],[">","Forward","x","TODO"],["D","Date","x","TODO"],["?","Question","x","TODO"],["/","Half Done","x","IN_PROGRESS"],["+","Add","x","TODO"],["R","Research","x","TODO"],["!","Important","x","TODO"],["i","Idea","x","TODO"],["B","Brainstorm","x","TODO"],["P","Pro","x","TODO"],["C","Con","x","TODO"],["Q","Quote","x","TODO"],["N","Note","x","TODO"],["b","Bookmark","x","TODO"],["I","Information","x","TODO"],["p","Paraphrase","x","TODO"],["L","Location","x","TODO"],["E","Example","x","TODO"],["A","Answer","x","TODO"],["r","Reward","x","TODO"],["c","Choice","x","TODO"],["d","Doing","x","IN_PROGRESS"],["T","Time","x","TODO"],["@","Character / Person","x","TODO"],["t","Talk","x","TODO"],["O","Outline / Plot","x","TODO"],["~","Conflict","x","TODO"],["W","World","x","TODO"],["f","Clue / Find","x","TODO"],["F","Foreshadow","x","TODO"],["H","Favorite / Health","x","TODO"],["&","Symbolism","x","TODO"],["s","Secret","x","TODO"]]}function vk(){return[[" ","Unchecked","x","TODO"],["x","Checked"," ","DONE"],[">","Rescheduled","x","TODO"],["<","Scheduled","x","TODO"],["!","Important","x","TODO"],["-","Cancelled"," ","CANCELLED"],["/","In Progress","x","IN_PROGRESS"],["?","Question","x","TODO"],["*","Star","x","TODO"],["n","Note","x","TODO"],["l","Location","x","TODO"],["i","Information","x","TODO"],["I","Idea","x","TODO"],["S","Amount","x","TODO"],["p","Pro","x","TODO"],["c","Con","x","TODO"],["b","Bookmark","x","TODO"],["f","Fire","x","TODO"],["k","Key","x","TODO"],["w","Win","x","TODO"],["u","Up","x","TODO"],["d","Down","x","TODO"]]}function wk(){return[[" ","to-do","x","TODO"],["/","incomplete","x","IN_PROGRESS"],["x","done"," ","DONE"],["-","canceled"," ","CANCELLED"],[">","forwarded","x","TODO"],["<","scheduling","x","TODO"],["?","question","x","TODO"],["!","important","x","TODO"],["*","star","x","TODO"],['"',"quote","x","TODO"],["l","location","x","TODO"],["b","bookmark","x","TODO"],["i","information","x","TODO"],["S","savings","x","TODO"],["I","idea","x","TODO"],["p","pros","x","TODO"],["c","cons","x","TODO"],["f","fire","x","TODO"],["k","key","x","TODO"],["w","win","x","TODO"],["u","up","x","TODO"],["d","down","x","TODO"]]}function kk(){return[[" ","to-do","x","TODO"],["/","incomplete","x","IN_PROGRESS"],["x","done"," ","DONE"],["-","canceled"," ","CANCELLED"],[">","forwarded","x","TODO"],["<","scheduling","x","TODO"],["?","question","x","TODO"],["!","important","x","TODO"],["*","star","x","TODO"],['"',"quote","x","TODO"],["l","location","x","TODO"],["b","bookmark","x","TODO"],["i","information","x","TODO"],["S","savings","x","TODO"],["I","idea","x","TODO"],["p","pros","x","TODO"],["c","cons","x","TODO"],["f","fire","x","TODO"],["k","key","x","TODO"],["w","win","x","TODO"],["u","up","x","TODO"],["d","down","x","TODO"]]}var Ek=[{text:"Core Statuses",level:"h3",class:"",open:!0,notice:{class:"setting-item-description",text:null,html:"<p>These are the core statuses that Tasks supports natively, with no need for custom CSS styling or theming.</p><p>You can add edit and add your own custom statuses in the section below.</p>"},settings:[{name:"",description:"",type:"function",initialValue:"",placeholder:"",settingName:"insertTaskCoreStatusSettings",featureFlag:"",notice:null}]},{text:"Custom Statuses",level:"h3",class:"",open:!0,notice:{class:"setting-item-description",text:null,html:`<p>You should first <b>select and install a CSS Snippet or Theme</b> to style custom checkboxes.</p><p>Then, use the buttons below to set up your custom statuses, to match your chosen CSS checkboxes.</p><p><b>Note</b> Any statuses with the same symbol as any earlier statuses will be ignored. You can confirm the actually loaded statuses by running the 'Create or edit task' command and looking at the Status drop-down.</p><p></p><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Statuses">documentation</a> to get started!</p>`},settings:[{name:"",description:"",type:"function",initialValue:"",placeholder:"",settingName:"insertCustomTaskStatusSettings",featureFlag:"",notice:null}]}];var jr=require("obsidian");var Zi=class{validate(e){let t=[];return t.push(...this.validateSymbol(e)),t.push(...this.validateName(e)),t.push(...this.validateNextSymbol(e)),t}validateStatusCollectionEntry(e){let[t,n,i,s]=e,a=[];if(a.push(...this.validateType(s)),t===i&&s!=="NON_TASK"&&a.push(`Status symbol '${t}' toggles to itself`),a.length>0)return a;let o=re.createFromImportedValue(e).configuration;return a.push(...this.validateSymbolTypeConventions(o)),a.push(...this.validate(o)),a}validateSymbol(e){return Zi.validateOneSymbol(e.symbol,"Task Status Symbol")}validateNextSymbol(e){return Zi.validateOneSymbol(e.nextStatusSymbol,"Task Next Status Symbol")}validateName(e){let t=[];return e.name.length===0&&t.push("Task Status Name cannot be empty."),t}validateType(e){let t=er[e],n=[];return t||n.push(`Status Type "${e}" is not a valid type`),t=="EMPTY"&&n.push('Status Type "EMPTY" is not permitted in user data'),n}validateSymbolTypeConventions(e){let t=[],n=e.symbol,i=new Oe,s=n==="X"?"x":n,a=i.bySymbol(s);return a.type!=="EMPTY"&&(e.nextStatusSymbol!==a.nextStatusSymbol&&t.push(`Next Status Symbol for symbol '${n}': '${e.nextStatusSymbol}' is inconsistent with convention '${a.nextStatusSymbol}'`),e.type!==a.type&&t.push(`Status Type for symbol '${n}': '${e.type}' is inconsistent with convention '${a.type}'`)),t}static validateOneSymbol(e,t){let n=[];return e.length===0&&n.push(`${t} cannot be empty.`),e.length>1&&n.push(`${t} ("${e}") must be a single character.`),n}};var Ji=new Zi,ar=class extends jr.Modal{constructor(t,n,i){super(t.app);this.plugin=t;this.saved=!1;this.error=!1;this.statusSymbol=n.symbol,this.statusName=n.name,this.statusNextSymbol=n.nextStatusSymbol,this.statusAvailableAsCommand=n.availableAsCommand,this.type=n.type,this.isCoreStatus=i}statusConfiguration(){return new et(this.statusSymbol,this.statusName,this.statusNextSymbol,this.statusAvailableAsCommand,this.type)}display(){return P(this,null,function*(){let{contentEl:t}=this;t.empty();let n=t.createDiv(),i;new jr.Setting(n).setName("Task Status Symbol").setDesc("This is the character between the square braces. (It can only be edited for Custom statuses, and not Core statuses.)").addText(l=>{i=l,l.setValue(this.statusSymbol).onChange(c=>{this.statusSymbol=c,ar.setValid(l,Ji.validateSymbol(this.statusConfiguration()))})}).setDisabled(this.isCoreStatus).then(l=>{ar.setValid(i,Ji.validateSymbol(this.statusConfiguration()))});let s;new jr.Setting(n).setName("Task Status Name").setDesc("This is the friendly name of the task status.").addText(l=>{s=l,l.setValue(this.statusName).onChange(c=>{this.statusName=c,ar.setValid(l,Ji.validateName(this.statusConfiguration()))})}).then(l=>{ar.setValid(s,Ji.validateName(this.statusConfiguration()))});let a;new jr.Setting(n).setName("Task Next Status Symbol").setDesc("When clicked on this is the symbol that should be used next.").addText(l=>{a=l,l.setValue(this.statusNextSymbol).onChange(c=>{this.statusNextSymbol=c,ar.setValid(l,Ji.validateNextSymbol(this.statusConfiguration()))})}).then(l=>{ar.setValid(a,Ji.validateNextSymbol(this.statusConfiguration()))}),new jr.Setting(n).setName("Task Status Type").setDesc("Control how the status behaves for searching and toggling.").addDropdown(l=>{["TODO","IN_PROGRESS","DONE","CANCELLED","NON_TASK"].forEach(d=>{l.addOption(d,d)}),l.setValue(this.type).onChange(d=>{this.type=re.getTypeFromStatusTypeString(d)})}),re.tasksPluginCanCreateCommandsForStatuses()&&new jr.Setting(n).setName("Available as command").setDesc("If enabled this status will be available as a command so you can assign a hotkey and toggle the status using it.").addToggle(l=>{l.setValue(this.statusAvailableAsCommand).onChange(c=>P(this,null,function*(){this.statusAvailableAsCommand=c}))});let o=t.createDiv(),u=new jr.Setting(o);u.addButton(l=>(l.setTooltip("Save").setIcon("checkmark").onClick(()=>P(this,null,function*(){let c=Ji.validate(this.statusConfiguration());if(c.length>0){let d=c.join(`
`)+`

Fix errors before saving.`;new jr.Notice(d);return}this.saved=!0,this.close()})),l)),u.addExtraButton(l=>(l.setIcon("cross").setTooltip("Cancel").onClick(()=>{this.saved=!1,this.close()}),l))})}onOpen(){this.display()}static setValidationError(t){t.inputEl.addClass("tasks-settings-is-invalid")}static removeValidationError(t){t.inputEl.removeClass("tasks-settings-is-invalid")}static setValid(t,n){n.length===0?ar.removeValidationError(t):ar.setValidationError(t)}};var Bt=class extends ke.PluginSettingTab{constructor({plugin:t}){super(t.app,t);this.customFunctions={insertTaskCoreStatusSettings:this.insertTaskCoreStatusSettings.bind(this),insertCustomTaskStatusSettings:this.insertCustomTaskStatusSettings.bind(this)};this.plugin=t}saveSettings(t){return P(this,null,function*(){yield this.plugin.saveSettings(),t&&this.display()})}display(){let{containerEl:t}=this;t.empty(),this.containerEl.addClass("tasks-settings"),t.createEl("h3",{text:"Tasks Settings"}),t.createEl("p",{cls:"tasks-setting-important",text:"Changing any settings requires a restart of obsidian."}),t.createEl("h4",{text:"Task Format Settings"}),new ke.Setting(t).setName("Task Format").setDesc(Bt.createFragmentWithHTML('<p>The format that Tasks uses to read and write tasks.</p><p><b>Important:</b> Tasks currently only supports one format at a time. Selecting Dataview will currently <b>stop Tasks reading its own emoji signifiers</b>.</p><p>See the <a href="https://publish.obsidian.md/tasks/Reference/Task+Formats/About+Task+Formats">documentation</a>.</p>')).addDropdown(i=>{for(let s of Object.keys(Mn))i.addOption(s,Mn[s].displayName);i.setValue(Z().taskFormat).onChange(s=>P(this,null,function*(){tt({taskFormat:s}),yield this.plugin.saveSettings()}))}),t.createEl("h4",{text:"Global filter Settings"}),new ke.Setting(t).setName("Global task filter").setDesc(Bt.createFragmentWithHTML('<p><b>Recommended: Leave empty if you want all checklist items in your vault to be tasks managed by this plugin.</b></p><p>Use a global filter if you want Tasks to only act on a subset of your "<code>- [ ]</code>" checklist items, so that a checklist item must include the specified string in its description in order to be considered a task.<p><p>For example, if you set the global filter to <code>#task</code>, the Tasks plugin will only handle checklist items tagged with <code>#task</code>.</br>Other checklist items will remain normal checklist items and not appear in queries or get a done date set.</p><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Global+Filter">documentation</a>.</p>')).addText(i=>{i.setPlaceholder("e.g. #task or TODO").setValue(ye.getInstance().get()).onChange(s=>P(this,null,function*(){tt({globalFilter:s}),ye.getInstance().set(s),yield this.plugin.saveSettings()}))}),new ke.Setting(t).setName("Remove global filter from description").setDesc("Enabling this removes the string that you set as global filter from the task description when displaying a task.").addToggle(i=>{let s=Z();i.setValue(s.removeGlobalFilter).onChange(a=>P(this,null,function*(){tt({removeGlobalFilter:a}),ye.getInstance().setRemoveGlobalFilter(a),yield this.plugin.saveSettings()}))}),t.createEl("h4",{text:"Global Query"}),yF(new ke.Setting(t).setDesc(Bt.createFragmentWithHTML('<p>A query that is automatically included at the start of every Tasks block in the vault. Useful for adding default filters, or layout options.</p><p>See the <a href="https://publish.obsidian.md/tasks/Queries/Global+Query">documentation</a>.</p>')).addTextArea(i=>{let s=Z();i.inputEl.rows=4,i.setPlaceholder(`# For example...
path does not include _templates/
limit 300
show urgency`).setValue(s.globalQuery).onChange(a=>P(this,null,function*(){tt({globalQuery:a}),Sr.getInstance().set(a),yield this.plugin.saveSettings()}))})),t.createEl("h4",{text:"Task Statuses"});let{headingOpened:n}=Z();Ek.forEach(i=>{this.addOneSettingsBlock(t,i,n)}),t.createEl("h4",{text:"Date Settings"}),new ke.Setting(t).setName("Set created date on every added task").setDesc(Bt.createFragmentWithHTML(`Enabling this will add a timestamp \u2795 YYYY-MM-DD before other date values, when a task is created with 'Create or edit task', or by completing a recurring task.</br><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Dates#Created+date">documentation</a>.</p>`)).addToggle(i=>{let s=Z();i.setValue(s.setCreatedDate).onChange(a=>P(this,null,function*(){tt({setCreatedDate:a}),yield this.plugin.saveSettings()}))}),new ke.Setting(t).setName("Set done date on every completed task").setDesc(Bt.createFragmentWithHTML('Enabling this will add a timestamp \u2705 YYYY-MM-DD at the end when a task is toggled to done.</br><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Dates#Done+date">documentation</a>.</p>')).addToggle(i=>{let s=Z();i.setValue(s.setDoneDate).onChange(a=>P(this,null,function*(){tt({setDoneDate:a}),yield this.plugin.saveSettings()}))}),new ke.Setting(t).setName("Set cancelled date on every cancelled task").setDesc(Bt.createFragmentWithHTML('Enabling this will add a timestamp \u274C YYYY-MM-DD at the end when a task is toggled to cancelled.</br><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Dates#Cancelled+date">documentation</a>.</p>')).addToggle(i=>{let s=Z();i.setValue(s.setCancelledDate).onChange(a=>P(this,null,function*(){tt({setCancelledDate:a}),yield this.plugin.saveSettings()}))}),new ke.Setting(t).setName("Use filename as Scheduled date for undated tasks").setDesc(Bt.createFragmentWithHTML('Save time entering Scheduled (\u23F3) dates.</br>If this option is enabled, any undated tasks will be given a default Scheduled date extracted from their file name.</br>The date in the file name must be in one of <code>YYYY-MM-DD</code> or <code>YYYYMMDD</code> formats.</br>Undated tasks have none of Due (\u{1F4C5} ), Scheduled (\u23F3) and Start (\u{1F6EB}) dates.</br><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Use+Filename+as+Default+Date">documentation</a>.</p>')).addToggle(i=>{let s=Z();i.setValue(s.useFilenameAsScheduledDate).onChange(a=>P(this,null,function*(){tt({useFilenameAsScheduledDate:a}),yield this.plugin.saveSettings()}))}),new ke.Setting(t).setName("Folders with default Scheduled dates").setDesc("Leave empty if you want to use default Scheduled dates everywhere, or enter a comma-separated list of folders.").addText(i=>P(this,null,function*(){let s=Z();yield this.plugin.saveSettings(),i.setValue(Bt.renderFolderArray(s.filenameAsDateFolders)).onChange(a=>P(this,null,function*(){let o=Bt.parseCommaSeparatedFolders(a);tt({filenameAsDateFolders:o}),yield this.plugin.saveSettings()}))})),t.createEl("h4",{text:"Recurring task Settings"}),new ke.Setting(t).setName("Next recurrence appears on the line below").setDesc(Bt.createFragmentWithHTML('Enabling this will make the next recurrence of a task appear on the line below the completed task. Otherwise the next recurrence will appear before the completed one.</br><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Recurring+Tasks">documentation</a>.</p>')).addToggle(i=>{let{recurrenceOnNextLine:s}=Z();i.setValue(s).onChange(a=>P(this,null,function*(){tt({recurrenceOnNextLine:a}),yield this.plugin.saveSettings()}))}),t.createEl("h4",{text:"Auto-suggest Settings"}),new ke.Setting(t).setName("Auto-suggest task content").setDesc(Bt.createFragmentWithHTML('Enabling this will open an intelligent suggest menu while typing inside a recognized task line.</br><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Auto-Suggest">documentation</a>.</p>')).addToggle(i=>{let s=Z();i.setValue(s.autoSuggestInEditor).onChange(a=>P(this,null,function*(){tt({autoSuggestInEditor:a}),yield this.plugin.saveSettings()}))}),new ke.Setting(t).setName("Minimum match length for auto-suggest").setDesc("If higher than 0, auto-suggest will be triggered only when the beginning of any supported keywords is recognized.").addSlider(i=>{let s=Z();i.setLimits(0,3,1).setValue(s.autoSuggestMinMatch).setDynamicTooltip().onChange(a=>P(this,null,function*(){tt({autoSuggestMinMatch:a}),yield this.plugin.saveSettings()}))}),new ke.Setting(t).setName("Maximum number of auto-suggestions to show").setDesc('How many suggestions should be shown when an auto-suggest menu pops up (including the "\u23CE" option).').addSlider(i=>{let s=Z();i.setLimits(3,12,1).setValue(s.autoSuggestMaxItems).setDynamicTooltip().onChange(a=>P(this,null,function*(){tt({autoSuggestMaxItems:a}),yield this.plugin.saveSettings()}))}),t.createEl("h4",{text:"Dialog Settings"}),new ke.Setting(t).setName("Provide access keys in dialogs").setDesc(Bt.createFragmentWithHTML('If the access keys (keyboard shortcuts) for various controls in dialog boxes conflict with system keyboard shortcuts or assistive technology functionality that is important for you, you may want to deactivate them here.</br><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Create+or+edit+Task#Keyboard+shortcuts">documentation</a>.</p>')).addToggle(i=>{let s=Z();i.setValue(s.provideAccessKeys).onChange(a=>P(this,null,function*(){tt({provideAccessKeys:a}),yield this.plugin.saveSettings()}))})}addOneSettingsBlock(t,n,i){let s=t.createEl("details",{cls:"tasks-nested-settings",attr:Q({},n.open||i[n.text]?{open:!0}:{})});s.empty(),s.ontoggle=()=>{i[n.text]=s.open,tt({headingOpened:i}),this.plugin.saveSettings()};let a=s.createEl("summary");if(new ke.Setting(a).setHeading().setName(n.text),a.createDiv("collapser").createDiv("handle"),n.notice!==null){let o=s.createEl("div",{cls:n.notice.class,text:n.notice.text});n.notice.html!==null&&o.insertAdjacentHTML("beforeend",n.notice.html)}n.settings.forEach(o=>{if(!(o.featureFlag!==""&&!bv(o.featureFlag))&&(o.type==="checkbox"?new ke.Setting(s).setName(o.name).setDesc(o.description).addToggle(u=>{let l=Z();l.generalSettings[o.settingName]||Fi(o.settingName,o.initialValue),u.setValue(l.generalSettings[o.settingName]).onChange(c=>P(this,null,function*(){Fi(o.settingName,c),yield this.plugin.saveSettings()}))}):o.type==="text"?new ke.Setting(s).setName(o.name).setDesc(o.description).addText(u=>{let l=Z();l.generalSettings[o.settingName]||Fi(o.settingName,o.initialValue);let c=d=>P(this,null,function*(){Fi(o.settingName,d),yield this.plugin.saveSettings()});u.setPlaceholder(o.placeholder.toString()).setValue(l.generalSettings[o.settingName].toString()).onChange((0,ke.debounce)(c,500,!0))}):o.type==="textarea"?new ke.Setting(s).setName(o.name).setDesc(o.description).addTextArea(u=>{let l=Z();l.generalSettings[o.settingName]||Fi(o.settingName,o.initialValue);let c=d=>P(this,null,function*(){Fi(o.settingName,d),yield this.plugin.saveSettings()});u.setPlaceholder(o.placeholder.toString()).setValue(l.generalSettings[o.settingName].toString()).onChange((0,ke.debounce)(c,500,!0)),u.inputEl.rows=8,u.inputEl.cols=40}):o.type==="function"&&this.customFunctions[o.settingName](s,this),o.notice!==null)){let u=s.createEl("p",{cls:o.notice.class,text:o.notice.text});o.notice.html!==null&&u.insertAdjacentHTML("beforeend",o.notice.html)}})}static parseCommaSeparatedFolders(t){return t.split(",").map(n=>n.trim()).map(n=>n.replace(/^\/|\/$/g,"")).filter(n=>n!=="")}static renderFolderArray(t){return t.join(",")}insertTaskCoreStatusSettings(t,n){let{statusSettings:i}=Z();i.coreStatuses.forEach(a=>{Sk(t,a,i.coreStatuses,i,n,n.plugin,!0)}),new ke.Setting(t).addButton(a=>{let o="Review and check your Statuses";a.setButtonText(o).setCta().onClick(()=>P(this,null,function*(){let l=window.moment().format("YYYY-MM-DD HH-mm-ss"),c=`Tasks Plugin - ${o} ${l}.md`,d=this.plugin.manifest.version,p=Oe.getInstance(),m=gk(i,p,o,d),g=yield app.vault.create(c,m);yield this.app.workspace.getLeaf(!0).openFile(g)})),a.setTooltip("Create a new file in the root of the vault, containing a Mermaid diagram of the current status settings.")}).infoEl.remove()}insertCustomTaskStatusSettings(t,n){let{statusSettings:i}=Z();i.customStatuses.forEach(l=>{Sk(t,l,i.customStatuses,i,n,n.plugin,!1)}),t.createEl("div"),new ke.Setting(t).addButton(l=>{l.setButtonText("Add New Task Status").setCta().onClick(()=>P(this,null,function*(){Fe.addStatus(i.customStatuses,new et("","","",!1,"TODO")),yield sa(i,n)}))}).infoEl.remove();let a=[["AnuPpuccin Theme",yk()],["Aura Theme",bk()],["Ebullientworks Theme",Tk()],["ITS Theme & SlRvb Checkboxes",_k()],["Minimal Theme",wk()],["Things Theme",kk()],["LYT Mode Theme (Dark mode only)",vk()]];for(let[l,c]of a)new ke.Setting(t).addButton(p=>{let m=`${l}: Add ${c.length} supported Statuses`;p.setButtonText(m).onClick(()=>P(this,null,function*(){yield gF(c,i,n)}))}).infoEl.remove();new ke.Setting(t).addButton(l=>{l.setButtonText("Add All Unknown Status Types").setCta().onClick(()=>P(this,null,function*(){let d=this.plugin.getTasks().map(m=>m.status),p=Oe.getInstance().findUnknownStatuses(d);p.length!==0&&(p.forEach(m=>{Fe.addStatus(i.customStatuses,m)}),yield sa(i,n))}))}).infoEl.remove(),new ke.Setting(t).addButton(l=>{l.setButtonText("Reset Custom Status Types to Defaults").setWarning().onClick(()=>P(this,null,function*(){Fe.resetAllCustomStatuses(i),yield sa(i,n)}))}).infoEl.remove()}},Xo=Bt;Xo.createFragmentWithHTML=t=>createFragment(n=>n.createDiv().innerHTML=t);function Sk(r,e,t,n,i,s,a){let o=r.createEl("pre");o.addClass("row-for-status"),o.textContent=new re(e).previewText();let u=new ke.Setting(r);u.infoEl.replaceWith(o),a||u.addExtraButton(l=>{l.setIcon("cross").setTooltip("Delete").onClick(()=>P(this,null,function*(){Fe.deleteStatus(t,e)&&(yield sa(n,i))}))}),u.addExtraButton(l=>{l.setIcon("pencil").setTooltip("Edit").onClick(()=>P(this,null,function*(){let c=new ar(s,e,a);c.onClose=()=>P(this,null,function*(){c.saved&&Fe.replaceStatus(t,e,c.statusConfiguration())&&(yield sa(n,i))}),c.open()}))}),u.infoEl.remove()}function gF(r,e,t){return P(this,null,function*(){Fe.bulkAddStatusCollection(e,r).forEach(i=>{new ke.Notice(i)}),yield sa(e,t)})}function sa(r,e){return P(this,null,function*(){tt({statusSettings:r}),Fe.applyToStatusRegistry(r,Oe.getInstance()),yield e.saveSettings(!0)})}function yF(r){let{settingEl:e,infoEl:t,controlEl:n}=r,i=n.querySelector("textarea");i!==null&&(e.style.display="block",t.style.marginRight="0px",i.style.minWidth="-webkit-fill-available")}var Ok=require("obsidian");var bc=class extends Ok.EditorSuggest{constructor(t,n,i){super(t);this.settings=n,this.plugin=i,t.scope.register([],"Tab",()=>{var a;let s=(a=this.context)==null?void 0:a.editor;return s?(s.exec("indentMore"),!1):!0})}onTrigger(t,n,i){if(!this.settings.autoSuggestInEditor)return null;let s=n.getLine(t.line);return gv(s,t,n)?{start:{line:t.line,ch:0},end:{line:t.line,ch:s.length},query:s}:null}getSuggestions(t){var u,l,c;let n=t.query,i=t.editor.getCursor(),s=this.plugin.getTasks(),a=s.find(d=>d.taskLocation.path==t.file.path&&d.taskLocation.lineNumber==i.line);return((c=(l=(u=Ro()).buildSuggestions)==null?void 0:l.call(u,n,i.ch,this.settings,s,a))!=null?c:[]).map(d=>be(Q({},d),{context:t}))}renderSuggestion(t,n){n.setText(t.displayText)}selectSuggestion(t,n){return P(this,null,function*(){var u,l,c;let i=t.context.editor;if(t.suggestionType==="empty"){this.close();let d=new KeyboardEvent("keydown",{code:"Enter",key:"Enter"});(l=(u=i==null?void 0:i.cm)==null?void 0:u.contentDOM)==null||l.dispatchEvent(d);return}if(t.taskItDependsOn!=null){let d=sl(t.taskItDependsOn,this.plugin.getTasks().map(p=>p.id));if(t.appendText+=` ${d.id}`,t.context.file.basename==d.filename){console.log(t.taskItDependsOn.toFileLineString());let p={line:t.taskItDependsOn.lineNumber,ch:0},m={line:t.taskItDependsOn.lineNumber,ch:t.taskItDependsOn.toFileLineString().length};t.context.editor.replaceRange(d.toFileLineString(),p,m)}else wr({originalTask:t.taskItDependsOn,newTasks:d})}let s=t.context.editor.getCursor(),a={line:s.line,ch:(c=t.insertAt)!=null?c:s.ch},o=t.insertSkip?{line:s.line,ch:a.ch+t.insertSkip}:void 0;t.context.editor.replaceRange(t.appendText,a,o),t.context.editor.setCursor({line:s.line,ch:a.ch+t.appendText.length})})}};var Dk=(r,e)=>{let t,n=new Promise((a,o)=>{t=a});return e(r,a=>{let o=a.map(u=>u.toFileLineString()).join(`
`);t(o)}).open(),n};var xk=(r,e)=>{let t=Ol({line:"",path:""});return new ai({app:r,task:t,onSubmit:e,allTasks:[]})};var Rk=r=>({createTaskLineModal:()=>Dk(r,xk),executeToggleTaskDoneCommand:(e,t)=>ph(e,t).text});var Tc=class extends Mk.Plugin{get apiV1(){return Rk(app)}onload(){return P(this,null,function*(){Ct.registerConsoleLogger(),jm("info",`loading plugin "${this.manifest.name}" v${this.manifest.version}`),yield this.loadSettings();let{loggingOptions:t}=Z();Ct.configure(t),this.addSettingTab(new Xo({plugin:this})),Lv({metadataCache:this.app.metadataCache,vault:this.app.vault,workspace:this.app.workspace}),yield this.loadTaskStatuses();let n=new uc({obsidianEvents:this.app.workspace});this.cache=new Li({metadataCache:this.app.metadataCache,vault:this.app.vault,events:n}),this.inlineRenderer=new dc({plugin:this}),this.queryRenderer=new gc({plugin:this,events:n}),this.registerEditorExtension(sk()),this.registerEditorSuggest(new bc(this.app,Z(),this)),new Dl({plugin:this})})}loadTaskStatuses(){return P(this,null,function*(){let{statusSettings:t}=Z();Fe.applyToStatusRegistry(t,Oe.getInstance())})}onunload(){var t;jm("info",`unloading plugin "${this.manifest.name}" v${this.manifest.version}`),(t=this.cache)==null||t.unload()}loadSettings(){return P(this,null,function*(){let t=yield this.loadData();tt(t),t=Z(),ye.getInstance().set(t.globalFilter),ye.getInstance().setRemoveGlobalFilter(t.removeGlobalFilter),Sr.getInstance().set(t.globalQuery),yield this.loadTaskStatuses()})}saveSettings(){return P(this,null,function*(){yield this.saveData(Z())})}getTasks(){return this.cache===void 0?[]:this.cache.getTasks()}};
/*!
 * EventEmitter2
 * https://github.com/hij1nx/EventEmitter2
 *
 * Copyright (c) 2013 hij1nx
 * Licensed under the MIT license.
 */
/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
