<%-*
const definitionFile = "术语/Obsidian 插件.md"
const tfile = tp.file.find_tfile(definitionFile)
const content = await app.vault.read(tfile)
const lines = content.split('\n')
const { headings, sections } = app.metadataCache.getFileCache(tfile)
// [标题，行数]
const pluginNames = []
const pluginAliases = []
headings.filter(h => h && h.level === 1)
   .forEach(h => {
        pluginNames.push([h.heading.trim(), h.position.start.line])
    })
const selectedHeading = await tp.system.suggester(name => name[0], pluginNames)
const aliasReg = /(?<=\*)(.+?)(?=\*)/g
const aliases = lines[selectedHeading[1] + 2]
let result
if (aliasReg.test(aliases)) {
    const ok = await tp.system.prompt('使用别名？', aliases.match(aliasReg)[0])
    if (ok) {
        result = aliases.match(aliasReg)[0]
    } else {
        result = selectedHeading[0]
    }
} else {
    result = selectedHeading[0]
}
-%>

<%- result -%>