---
created_at: 2024-06-19 21:28:44
updated_at: 2024-06-22 21:36:24
tags:
  - Typst
---
文档：[[Typst.Tutorial.CN.v0.1.0.pdf]]

## 编写一篇基本文档⸺标记篇

排版的基本语法。

### 段落

- 段落另起一行不会产生新的段落，缩进不会产生新的空格。
- 中文排版中，另起一行会引入一个小的空格。

````typst
#code(
```typ
测试文本，
前面会有一个空格

测试文本，前面不会有一个空格
```
)
````

### 标题

- 使用 '=' 号来表示标题，多个等号就表示多级标题。
- 标题会强制划分新的段落，想要改变这个默认规则，需要设置 `#show heading.where(level: 3): box`。

````typst
#code(
```typ
#show heading.where(level: 3): box
= heading 1
#lorem(20)

=== heading 3
#lorem(10)
```
)
````

### 着重和强调语义

**着重**使用「星号」（\*）作为界定符，而**强调**使用「下划线」（\_）作为界定符。

自定义强调样式。

````typst
#code(
```typ
#show strong: content => {
  show regex("\p{sc=Han}"): it => box(place(text(".", size: 1.3em), dx: 0.2em, dy: -0.4em)) + it
  content.body
}

*中文排版的着重语义用加点表示* \
strong: *strong* \
emphasis: _emphasis_ \
strong and emphasis: *_strong emph_* 或 _*emph strong*_
```
)
````

### 代码片段

代码片段，使用「反引号」(\`)。如果里面有嵌套的「代码块」，需要在最外层添加「反引号」。

``````````typst
#code(
``````typ
短代码片段：`code` \
显示「反引号」``` ` ``` \
显示多个「反引号」：```` ``` ```` \
一段有高亮的代码片段：```javascript function uninstallLaTeX {}```

块代码片段：
```js 
function fibnacci(n) {
 return n <= 1 ?: `...`;
} 
```
``````
)
``````````

### 列表

列表，使用「减号」（-）开启一个无符号列表，使用「加号」（+）开启一个编号的列表。

````typst
#code(
```typ
- 一级 1
- 二级 1.1
- 三级 1.1.1
+ A
+ B
+ C
+ A
- 二级列表 1.1
+ C
- 二级列表 1.2
+ B
- 二级列表 2.1
1. A
2. B
3. C
+ D
+ E
```
)
````

### 转义序列

使用「反斜杠」（\）输入特殊标记。

下表给出了部分可以转义的字符：  

![[Pasted image 20240619215126.png]]

>[!note] 如果添加「反斜杠」已被 Typst 赋予含义，就可以考虑使用 `\u{unicode}`。

### 输出换行符

使用「反斜杠」加任意一个空白字符，表示在此处插入一个段落内的换行符：

````typst
#code(
```typ
#lorem(10) \
中文文字 \
换行！
```
)
````

>[!note] 空白字符可以取短空格（U+0020）、长空格（U+3000）、回车（U+000D）等。

### 速记符号

在「速记模式」（Markup Mode）下，一些符号需要用特殊的符号组合打出，这种符号组合被称为「速记符号」（Shorthand）。它们是：

- **空格** （`u+0020`） 的「速记符号」由两个连续的「波浪号」（~）组成：

````typst
#code(
```typ
AB v.s. A~B
```
)
````

- **连接号** （en dash, `u+0020`） 的「速记符号」由两个连续的「连字号」（-）组成：

````typst
#code(
```typ
北京--上海路线的列车到站。
```
)
````

- **省略号**的「速记符号」由三个连续的「点号」（.）组成：

````typst
#code(
```typ
真的假的......
```
)
````

### 注释

有 2 种「注释」方式：

1. 使用 `\\`
2. 使用 `/* */`

## 编写一篇基本文档——脚本篇

从现在开始，示例将逐渐开始出现脚本。

### 解释模式

Typst 有 3 种「解释模式」，不同的模式下解释器以不同的语法规则解释你的文档。

在「标记模式」下可以使用各种记号创建标题、列表、段落……在这个模式下，Typst 语法几乎就和 Markdown 一样。

当 Typst 处于「标记模式」，且遇到一个「井号」（#）时，Typst 会立即将后续一段代码认作「脚本」并执行，即进入了「脚本模式」（Scription Mode）。

在「脚本模式」下，你可以转而**主要**计算各种内容。

````typst
#code(
```typ
#(1024*1024*8*7*17+1)是一个常见的素数。
```
)
````

特别地，当处于「脚本模式」时，你还可以通过「内容块」语法临时返回「标记模式」，以嵌套复杂的逻辑：

````typst
#code(
```typ
#([== 脚本模式下创建一个标题] +
strong[后接一段文本])
```
)
````

### 函数和函数调用

````typst
#code(
```typ
四的三次方为 #calc.pow(4, 3)。\
#strong[
#lorem(5) \
#lorem(5)
] \
#emph[
#lorem(5) *Strong* text.
]
```
)
````

### 文字修饰

- 使用 `highlight` 高亮一段文本内容：

````typst
#code(
```typ
#highlight[高亮一段内容] \
#highlight(fill: orange)[高亮一段文本]
```
)
````

- 使用 `underline`、`overline` 或 `strike` 为一段内容添加下划线、上划线或中划线（删除线）：

````typst
#code(
```typ
#underline[测试文本]
#overline[测试文本]
#strike[测试文本]
```
)
````

- 使用 `sub` 或 `super` 将一段文本调整至下标或目标位置：

````typst
#code(
```typ
下标：我的#sub[小跟班] \
上标：给我带#super[绿帽子]\
设定大小：Mac#super(size: 0.8em)[※]
```
)
````

### 文字属性

文本本身也可以设置一些「具名参数」。

````typst
#code(
```typ
#text[一段文字内容]
```
)
````

下例修改了「代码片段」元素中的文本元素为红色：

`````````typst
#code(
``````typ
#text(fill: red)[```
影响块元素的内容```] 
#text[```typ #strong[一段内容] #emph[一段内容]```] 
#text(fill: red)[```typ #strong[一段内容] #emph[一段内容]```] \
#text(fill: red, text(fill: blue, "一段内容"))

``````
)
`````````

#### 设置大小

通过 `size` 参数，可以设置文本大小。

````typst
#code(
```typ
#text(size: 12pt)[一斤鸭梨]
#text(size: 24pt)[四斤鸭梨]
```
)
````

其中 `pt` 是点单位。中文排版中常见的号单位与点单位有直接换算关系：

![[Pasted image 20240621191342.png]]

另一个常见单位是 `em`：

````typst
#code(
```typ
#text(size: 1em)[一斤鸭梨]
#text(size: 2em)[四斤鸭梨]
```
)
````

`1em` 是当前设置的文字大小。

#### 设置颜色

通过 `fill` 参数为文字配置各种颜色。

````typst
#code(
```typ
#text(fill: red)[红色鸭梨]
#text(fill: blue)[蓝色鸭梨] \
#text(fill: rgb("ef475d"))[茉莉红色鸭梨]
#text(fill: color.hsl(200deg, 100%, 70%))[天依蓝色鸭梨]
```
)
````

#### 设置字体

通过 `font` 参数为文本配置字体。

````typst
#code(
```typ
#text(font: "FangSong")[北京鸭梨]
#text(font: "SimSun")[板正鸭梨]
#text(font: ("Times New Roman", "FangSong"))[中西 Pear]
```
)
````

### 「set」 语法

`set` 关键字后跟随一个与函数调用相同语法的表达式，表示此后所有的元素都具有新的默认值。这比 `#text(fill: red)[红色鸭梨]` 要更易读。

````typst
#code(
```typ
#set text(fill: red)
红色鸭梨
```
)
````

### 图像

图像对应的元素为 `image`。

参考：[[Image]]

### 图形

你可以通过 `figure` 函数为图像设置标题。

参考：[[Figure]]

### 行内盒子

参考：[[Block]]

### 链接

链接可以分为外链与内链。最简单情况下，你只需要使用 `link` 函数即可创建一个链接：

````typst
#code(
```typ
#link("https://zh.wikipedia.org") \
https://typst.app/docs/reference/symbols/sym/ \
#link("https://typst.app/docs/reference/symbols/sym/")[sym]为数学符号链接 \
#link("...")[链接] 等价于 #link("...", [链接])
```
)
````

>[!summary] 学到 33 页暂时不记了，进度太慢了。

## 参考

- [Unicode 属性匹配（\p）-CSDN博客](https://blog.csdn.net/qiang_zi_/article/details/103072074)
- [regex - Rust (docs.rs)](https://docs.rs/regex/latest/regex/)